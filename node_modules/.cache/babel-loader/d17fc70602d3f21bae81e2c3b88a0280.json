{"ast":null,"code":"// Object.keys\nif (!Object.keys) {\n  Object.keys = function (object) {\n    var keys = [];\n\n    for (var name in object) {\n      if (Object.prototype.hasOwnProperty.call(object, name)) {\n        keys.push(name);\n      }\n    }\n\n    return keys;\n  };\n} // ChildNode.remove\n\n\nif (!(\"remove\" in Element.prototype)) {\n  Element.prototype.remove = function () {\n    if (this.parentNode) {\n      this.parentNode.removeChild(this);\n    }\n  };\n}\n\nimport { raf } from './helpers/raf.js';\nimport { caf } from './helpers/caf.js';\nimport { extend } from './helpers/extend.js';\nimport { checkStorageValue } from './helpers/checkStorageValue.js';\nimport { setLocalStorage } from './helpers/setLocalStorage.js';\nimport { getSlideId } from './helpers/getSlideId.js';\nimport { calc } from './helpers/calc.js';\nimport { percentageLayout } from './helpers/percentageLayout.js';\nimport { mediaquerySupport } from './helpers/mediaquerySupport.js';\nimport { createStyleSheet } from './helpers/createStyleSheet.js';\nimport { addCSSRule } from './helpers/addCSSRule.js';\nimport { removeCSSRule } from './helpers/removeCSSRule.js';\nimport { getCssRulesLength } from './helpers/getCssRulesLength.js';\nimport { toDegree } from './helpers/toDegree.js';\nimport { getTouchDirection } from './helpers/getTouchDirection.js';\nimport { forEach } from './helpers/forEach.js';\nimport { hasClass } from './helpers/hasClass.js';\nimport { addClass } from './helpers/addClass.js';\nimport { removeClass } from './helpers/removeClass.js';\nimport { hasAttr } from './helpers/hasAttr.js';\nimport { getAttr } from './helpers/getAttr.js';\nimport { setAttrs } from './helpers/setAttrs.js';\nimport { removeAttrs } from './helpers/removeAttrs.js';\nimport { arrayFromNodeList } from './helpers/arrayFromNodeList.js';\nimport { hideElement } from './helpers/hideElement.js';\nimport { showElement } from './helpers/showElement.js';\nimport { isVisible } from './helpers/isVisible.js';\nimport { whichProperty } from './helpers/whichProperty.js';\nimport { has3DTransforms } from './helpers/has3DTransforms.js';\nimport { getEndProperty } from './helpers/getEndProperty.js';\nimport { addEvents } from './helpers/addEvents.js';\nimport { removeEvents } from './helpers/removeEvents.js';\nimport { Events } from './helpers/events.js';\nimport { jsTransform } from './helpers/jsTransform.js';\nexport var tns = function (options) {\n  options = extend({\n    container: '.slider',\n    mode: 'carousel',\n    axis: 'horizontal',\n    items: 1,\n    gutter: 0,\n    edgePadding: 0,\n    fixedWidth: false,\n    autoWidth: false,\n    viewportMax: false,\n    slideBy: 1,\n    center: false,\n    controls: true,\n    controlsPosition: 'top',\n    controlsText: ['prev', 'next'],\n    controlsContainer: false,\n    prevButton: false,\n    nextButton: false,\n    nav: true,\n    navPosition: 'top',\n    navContainer: false,\n    navAsThumbnails: false,\n    arrowKeys: false,\n    speed: 300,\n    autoplay: false,\n    autoplayPosition: 'top',\n    autoplayTimeout: 5000,\n    autoplayDirection: 'forward',\n    autoplayText: ['start', 'stop'],\n    autoplayHoverPause: false,\n    autoplayButton: false,\n    autoplayButtonOutput: true,\n    autoplayResetOnVisibility: true,\n    animateIn: 'tns-fadeIn',\n    animateOut: 'tns-fadeOut',\n    animateNormal: 'tns-normal',\n    animateDelay: false,\n    loop: true,\n    rewind: false,\n    autoHeight: false,\n    responsive: false,\n    lazyload: false,\n    lazyloadSelector: '.tns-lazy-img',\n    touch: true,\n    mouseDrag: false,\n    swipeAngle: 15,\n    nested: false,\n    preventActionWhenRunning: false,\n    preventScrollOnTouch: false,\n    freezable: true,\n    onInit: false,\n    useLocalStorage: true,\n    nonce: false\n  }, options || {});\n  var doc = document,\n      win = window,\n      KEYS = {\n    ENTER: 13,\n    SPACE: 32,\n    LEFT: 37,\n    RIGHT: 39\n  },\n      tnsStorage = {},\n      localStorageAccess = options.useLocalStorage;\n\n  if (localStorageAccess) {\n    // check browser version and local storage access\n    var browserInfo = navigator.userAgent;\n    var uid = new Date();\n\n    try {\n      tnsStorage = win.localStorage;\n\n      if (tnsStorage) {\n        tnsStorage.setItem(uid, uid);\n        localStorageAccess = tnsStorage.getItem(uid) == uid;\n        tnsStorage.removeItem(uid);\n      } else {\n        localStorageAccess = false;\n      }\n\n      if (!localStorageAccess) {\n        tnsStorage = {};\n      }\n    } catch (e) {\n      localStorageAccess = false;\n    }\n\n    if (localStorageAccess) {\n      // remove storage when browser version changes\n      if (tnsStorage['tnsApp'] && tnsStorage['tnsApp'] !== browserInfo) {\n        ['tC', 'tPL', 'tMQ', 'tTf', 't3D', 'tTDu', 'tTDe', 'tADu', 'tADe', 'tTE', 'tAE'].forEach(function (item) {\n          tnsStorage.removeItem(item);\n        });\n      } // update browserInfo\n\n\n      localStorage['tnsApp'] = browserInfo;\n    }\n  }\n\n  var CALC = tnsStorage['tC'] ? checkStorageValue(tnsStorage['tC']) : setLocalStorage(tnsStorage, 'tC', calc(), localStorageAccess),\n      PERCENTAGELAYOUT = tnsStorage['tPL'] ? checkStorageValue(tnsStorage['tPL']) : setLocalStorage(tnsStorage, 'tPL', percentageLayout(), localStorageAccess),\n      CSSMQ = tnsStorage['tMQ'] ? checkStorageValue(tnsStorage['tMQ']) : setLocalStorage(tnsStorage, 'tMQ', mediaquerySupport(), localStorageAccess),\n      TRANSFORM = tnsStorage['tTf'] ? checkStorageValue(tnsStorage['tTf']) : setLocalStorage(tnsStorage, 'tTf', whichProperty('transform'), localStorageAccess),\n      HAS3DTRANSFORMS = tnsStorage['t3D'] ? checkStorageValue(tnsStorage['t3D']) : setLocalStorage(tnsStorage, 't3D', has3DTransforms(TRANSFORM), localStorageAccess),\n      TRANSITIONDURATION = tnsStorage['tTDu'] ? checkStorageValue(tnsStorage['tTDu']) : setLocalStorage(tnsStorage, 'tTDu', whichProperty('transitionDuration'), localStorageAccess),\n      TRANSITIONDELAY = tnsStorage['tTDe'] ? checkStorageValue(tnsStorage['tTDe']) : setLocalStorage(tnsStorage, 'tTDe', whichProperty('transitionDelay'), localStorageAccess),\n      ANIMATIONDURATION = tnsStorage['tADu'] ? checkStorageValue(tnsStorage['tADu']) : setLocalStorage(tnsStorage, 'tADu', whichProperty('animationDuration'), localStorageAccess),\n      ANIMATIONDELAY = tnsStorage['tADe'] ? checkStorageValue(tnsStorage['tADe']) : setLocalStorage(tnsStorage, 'tADe', whichProperty('animationDelay'), localStorageAccess),\n      TRANSITIONEND = tnsStorage['tTE'] ? checkStorageValue(tnsStorage['tTE']) : setLocalStorage(tnsStorage, 'tTE', getEndProperty(TRANSITIONDURATION, 'Transition'), localStorageAccess),\n      ANIMATIONEND = tnsStorage['tAE'] ? checkStorageValue(tnsStorage['tAE']) : setLocalStorage(tnsStorage, 'tAE', getEndProperty(ANIMATIONDURATION, 'Animation'), localStorageAccess); // get element nodes from selectors\n\n  var supportConsoleWarn = win.console && typeof win.console.warn === \"function\",\n      tnsList = ['container', 'controlsContainer', 'prevButton', 'nextButton', 'navContainer', 'autoplayButton'],\n      optionsElements = {};\n  tnsList.forEach(function (item) {\n    if (typeof options[item] === 'string') {\n      var str = options[item],\n          el = doc.querySelector(str);\n      optionsElements[item] = str;\n\n      if (el && el.nodeName) {\n        options[item] = el;\n      } else {\n        if (supportConsoleWarn) {\n          console.warn('Can\\'t find', options[item]);\n        }\n\n        return;\n      }\n    }\n  }); // make sure at least 1 slide\n\n  if (options.container.children.length < 1) {\n    if (supportConsoleWarn) {\n      console.warn('No slides found in', options.container);\n    }\n\n    return;\n  } // update options\n\n\n  var responsive = options.responsive,\n      nested = options.nested,\n      carousel = options.mode === 'carousel' ? true : false;\n\n  if (responsive) {\n    // apply responsive[0] to options and remove it\n    if (0 in responsive) {\n      options = extend(options, responsive[0]);\n      delete responsive[0];\n    }\n\n    var responsiveTem = {};\n\n    for (var key in responsive) {\n      var val = responsive[key]; // update responsive\n      // from: 300: 2\n      // to:\n      //   300: {\n      //     items: 2\n      //   }\n\n      val = typeof val === 'number' ? {\n        items: val\n      } : val;\n      responsiveTem[key] = val;\n    }\n\n    responsive = responsiveTem;\n    responsiveTem = null;\n  } // update options\n\n\n  function updateOptions(obj) {\n    for (var key in obj) {\n      if (!carousel) {\n        if (key === 'slideBy') {\n          obj[key] = 'page';\n        }\n\n        if (key === 'edgePadding') {\n          obj[key] = false;\n        }\n\n        if (key === 'autoHeight') {\n          obj[key] = false;\n        }\n      } // update responsive options\n\n\n      if (key === 'responsive') {\n        updateOptions(obj[key]);\n      }\n    }\n  }\n\n  if (!carousel) {\n    updateOptions(options);\n  } // === define and set variables ===\n\n\n  if (!carousel) {\n    options.axis = 'horizontal';\n    options.slideBy = 'page';\n    options.edgePadding = false;\n    var animateIn = options.animateIn,\n        animateOut = options.animateOut,\n        animateDelay = options.animateDelay,\n        animateNormal = options.animateNormal;\n  }\n\n  var horizontal = options.axis === 'horizontal' ? true : false,\n      outerWrapper = doc.createElement('div'),\n      innerWrapper = doc.createElement('div'),\n      middleWrapper,\n      container = options.container,\n      containerParent = container.parentNode,\n      containerHTML = container.outerHTML,\n      slideItems = container.children,\n      slideCount = slideItems.length,\n      breakpointZone,\n      windowWidth = getWindowWidth(),\n      isOn = false;\n\n  if (responsive) {\n    setBreakpointZone();\n  }\n\n  if (carousel) {\n    container.className += ' tns-vpfix';\n  } // fixedWidth: viewport > rightBoundary > indexMax\n\n\n  var autoWidth = options.autoWidth,\n      fixedWidth = getOption('fixedWidth'),\n      edgePadding = getOption('edgePadding'),\n      gutter = getOption('gutter'),\n      viewport = getViewportWidth(),\n      center = getOption('center'),\n      items = !autoWidth ? Math.floor(getOption('items')) : 1,\n      slideBy = getOption('slideBy'),\n      viewportMax = options.viewportMax || options.fixedWidthViewportWidth,\n      arrowKeys = getOption('arrowKeys'),\n      speed = getOption('speed'),\n      rewind = options.rewind,\n      loop = rewind ? false : options.loop,\n      autoHeight = getOption('autoHeight'),\n      controls = getOption('controls'),\n      controlsText = getOption('controlsText'),\n      nav = getOption('nav'),\n      touch = getOption('touch'),\n      mouseDrag = getOption('mouseDrag'),\n      autoplay = getOption('autoplay'),\n      autoplayTimeout = getOption('autoplayTimeout'),\n      autoplayText = getOption('autoplayText'),\n      autoplayHoverPause = getOption('autoplayHoverPause'),\n      autoplayResetOnVisibility = getOption('autoplayResetOnVisibility'),\n      sheet = createStyleSheet(null, getOption('nonce')),\n      lazyload = options.lazyload,\n      lazyloadSelector = options.lazyloadSelector,\n      slidePositions,\n      // collection of slide positions\n  slideItemsOut = [],\n      cloneCount = loop ? getCloneCountForLoop() : 0,\n      slideCountNew = !carousel ? slideCount + cloneCount : slideCount + cloneCount * 2,\n      hasRightDeadZone = (fixedWidth || autoWidth) && !loop ? true : false,\n      rightBoundary = fixedWidth ? getRightBoundary() : null,\n      updateIndexBeforeTransform = !carousel || !loop ? true : false,\n      // transform\n  transformAttr = horizontal ? 'left' : 'top',\n      transformPrefix = '',\n      transformPostfix = '',\n      // index\n  getIndexMax = function () {\n    if (fixedWidth) {\n      return function () {\n        return center && !loop ? slideCount - 1 : Math.ceil(-rightBoundary / (fixedWidth + gutter));\n      };\n    } else if (autoWidth) {\n      return function () {\n        for (var i = 0; i < slideCountNew; i++) {\n          if (slidePositions[i] >= -rightBoundary) {\n            return i;\n          }\n        }\n      };\n    } else {\n      return function () {\n        if (center && carousel && !loop) {\n          return slideCount - 1;\n        } else {\n          return loop || carousel ? Math.max(0, slideCountNew - Math.ceil(items)) : slideCountNew - 1;\n        }\n      };\n    }\n  }(),\n      index = getStartIndex(getOption('startIndex')),\n      indexCached = index,\n      displayIndex = getCurrentSlide(),\n      indexMin = 0,\n      indexMax = !autoWidth ? getIndexMax() : null,\n      // resize\n  resizeTimer,\n      preventActionWhenRunning = options.preventActionWhenRunning,\n      swipeAngle = options.swipeAngle,\n      moveDirectionExpected = swipeAngle ? '?' : true,\n      running = false,\n      onInit = options.onInit,\n      events = new Events(),\n      // id, class\n  newContainerClasses = ' tns-slider tns-' + options.mode,\n      slideId = container.id || getSlideId(),\n      disable = getOption('disable'),\n      disabled = false,\n      freezable = options.freezable,\n      freeze = freezable && !autoWidth ? getFreeze() : false,\n      frozen = false,\n      controlsEvents = {\n    'click': onControlsClick,\n    'keydown': onControlsKeydown\n  },\n      navEvents = {\n    'click': onNavClick,\n    'keydown': onNavKeydown\n  },\n      hoverEvents = {\n    'mouseover': mouseoverPause,\n    'mouseout': mouseoutRestart\n  },\n      visibilityEvent = {\n    'visibilitychange': onVisibilityChange\n  },\n      docmentKeydownEvent = {\n    'keydown': onDocumentKeydown\n  },\n      touchEvents = {\n    'touchstart': onPanStart,\n    'touchmove': onPanMove,\n    'touchend': onPanEnd,\n    'touchcancel': onPanEnd\n  },\n      dragEvents = {\n    'mousedown': onPanStart,\n    'mousemove': onPanMove,\n    'mouseup': onPanEnd,\n    'mouseleave': onPanEnd\n  },\n      hasControls = hasOption('controls'),\n      hasNav = hasOption('nav'),\n      navAsThumbnails = autoWidth ? true : options.navAsThumbnails,\n      hasAutoplay = hasOption('autoplay'),\n      hasTouch = hasOption('touch'),\n      hasMouseDrag = hasOption('mouseDrag'),\n      slideActiveClass = 'tns-slide-active',\n      slideClonedClass = 'tns-slide-cloned',\n      imgCompleteClass = 'tns-complete',\n      imgEvents = {\n    'load': onImgLoaded,\n    'error': onImgFailed\n  },\n      imgsComplete,\n      liveregionCurrent,\n      preventScroll = options.preventScrollOnTouch === 'force' ? true : false; // controls\n\n\n  if (hasControls) {\n    var controlsContainer = options.controlsContainer,\n        controlsContainerHTML = options.controlsContainer ? options.controlsContainer.outerHTML : '',\n        prevButton = options.prevButton,\n        nextButton = options.nextButton,\n        prevButtonHTML = options.prevButton ? options.prevButton.outerHTML : '',\n        nextButtonHTML = options.nextButton ? options.nextButton.outerHTML : '',\n        prevIsButton,\n        nextIsButton;\n  } // nav\n\n\n  if (hasNav) {\n    var navContainer = options.navContainer,\n        navContainerHTML = options.navContainer ? options.navContainer.outerHTML : '',\n        navItems,\n        pages = autoWidth ? slideCount : getPages(),\n        pagesCached = 0,\n        navClicked = -1,\n        navCurrentIndex = getCurrentNavIndex(),\n        navCurrentIndexCached = navCurrentIndex,\n        navActiveClass = 'tns-nav-active',\n        navStr = 'Carousel Page ',\n        navStrCurrent = ' (Current Slide)';\n  } // autoplay\n\n\n  if (hasAutoplay) {\n    var autoplayDirection = options.autoplayDirection === 'forward' ? 1 : -1,\n        autoplayButton = options.autoplayButton,\n        autoplayButtonHTML = options.autoplayButton ? options.autoplayButton.outerHTML : '',\n        autoplayHtmlStrings = ['<span class=\\'tns-visually-hidden\\'>', ' animation</span>'],\n        autoplayTimer,\n        animating,\n        autoplayHoverPaused,\n        autoplayUserPaused,\n        autoplayVisibilityPaused;\n  }\n\n  if (hasTouch || hasMouseDrag) {\n    var initPosition = {},\n        lastPosition = {},\n        translateInit,\n        disX,\n        disY,\n        panStart = false,\n        rafIndex,\n        getDist = horizontal ? function (a, b) {\n      return a.x - b.x;\n    } : function (a, b) {\n      return a.y - b.y;\n    };\n  } // disable slider when slidecount <= items\n\n\n  if (!autoWidth) {\n    resetVariblesWhenDisable(disable || freeze);\n  }\n\n  if (TRANSFORM) {\n    transformAttr = TRANSFORM;\n    transformPrefix = 'translate';\n\n    if (HAS3DTRANSFORMS) {\n      transformPrefix += horizontal ? '3d(' : '3d(0px, ';\n      transformPostfix = horizontal ? ', 0px, 0px)' : ', 0px)';\n    } else {\n      transformPrefix += horizontal ? 'X(' : 'Y(';\n      transformPostfix = ')';\n    }\n  }\n\n  if (carousel) {\n    container.className = container.className.replace('tns-vpfix', '');\n  }\n\n  initStructure();\n  initSheet();\n  initSliderTransform(); // === COMMON FUNCTIONS === //\n\n  function resetVariblesWhenDisable(condition) {\n    if (condition) {\n      controls = nav = touch = mouseDrag = arrowKeys = autoplay = autoplayHoverPause = autoplayResetOnVisibility = false;\n    }\n  }\n\n  function getCurrentSlide() {\n    var tem = carousel ? index - cloneCount : index;\n\n    while (tem < 0) {\n      tem += slideCount;\n    }\n\n    return tem % slideCount + 1;\n  }\n\n  function getStartIndex(ind) {\n    ind = ind ? Math.max(0, Math.min(loop ? slideCount - 1 : slideCount - items, ind)) : 0;\n    return carousel ? ind + cloneCount : ind;\n  }\n\n  function getAbsIndex(i) {\n    if (i == null) {\n      i = index;\n    }\n\n    if (carousel) {\n      i -= cloneCount;\n    }\n\n    while (i < 0) {\n      i += slideCount;\n    }\n\n    return Math.floor(i % slideCount);\n  }\n\n  function getCurrentNavIndex() {\n    var absIndex = getAbsIndex(),\n        result;\n    result = navAsThumbnails ? absIndex : fixedWidth || autoWidth ? Math.ceil((absIndex + 1) * pages / slideCount - 1) : Math.floor(absIndex / items); // set active nav to the last one when reaches the right edge\n\n    if (!loop && carousel && index === indexMax) {\n      result = pages - 1;\n    }\n\n    return result;\n  }\n\n  function getItemsMax() {\n    // fixedWidth or autoWidth while viewportMax is not available\n    if (autoWidth || fixedWidth && !viewportMax) {\n      return slideCount - 1; // most cases\n    } else {\n      var str = fixedWidth ? 'fixedWidth' : 'items',\n          arr = [];\n\n      if (fixedWidth || options[str] < slideCount) {\n        arr.push(options[str]);\n      }\n\n      if (responsive) {\n        for (var bp in responsive) {\n          var tem = responsive[bp][str];\n\n          if (tem && (fixedWidth || tem < slideCount)) {\n            arr.push(tem);\n          }\n        }\n      }\n\n      if (!arr.length) {\n        arr.push(0);\n      }\n\n      return Math.ceil(fixedWidth ? viewportMax / Math.min.apply(null, arr) : Math.max.apply(null, arr));\n    }\n  }\n\n  function getCloneCountForLoop() {\n    var itemsMax = getItemsMax(),\n        result = carousel ? Math.ceil((itemsMax * 5 - slideCount) / 2) : itemsMax * 4 - slideCount;\n    result = Math.max(itemsMax, result);\n    return hasOption('edgePadding') ? result + 1 : result;\n  }\n\n  function getWindowWidth() {\n    return win.innerWidth || doc.documentElement.clientWidth || doc.body.clientWidth;\n  }\n\n  function getInsertPosition(pos) {\n    return pos === 'top' ? 'afterbegin' : 'beforeend';\n  }\n\n  function getClientWidth(el) {\n    if (el == null) {\n      return;\n    }\n\n    var div = doc.createElement('div'),\n        rect,\n        width;\n    el.appendChild(div);\n    rect = div.getBoundingClientRect();\n    width = rect.right - rect.left;\n    div.remove();\n    return width || getClientWidth(el.parentNode);\n  }\n\n  function getViewportWidth() {\n    var gap = edgePadding ? edgePadding * 2 - gutter : 0;\n    return getClientWidth(containerParent) - gap;\n  }\n\n  function hasOption(item) {\n    if (options[item]) {\n      return true;\n    } else {\n      if (responsive) {\n        for (var bp in responsive) {\n          if (responsive[bp][item]) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    }\n  } // get option:\n  // fixed width: viewport, fixedWidth, gutter => items\n  // others: window width => all variables\n  // all: items => slideBy\n\n\n  function getOption(item, ww) {\n    if (ww == null) {\n      ww = windowWidth;\n    }\n\n    if (item === 'items' && fixedWidth) {\n      return Math.floor((viewport + gutter) / (fixedWidth + gutter)) || 1;\n    } else {\n      var result = options[item];\n\n      if (responsive) {\n        for (var bp in responsive) {\n          // bp: convert string to number\n          if (ww >= parseInt(bp)) {\n            if (item in responsive[bp]) {\n              result = responsive[bp][item];\n            }\n          }\n        }\n      }\n\n      if (item === 'slideBy' && result === 'page') {\n        result = getOption('items');\n      }\n\n      if (!carousel && (item === 'slideBy' || item === 'items')) {\n        result = Math.floor(result);\n      }\n\n      return result;\n    }\n  }\n\n  function getSlideMarginLeft(i) {\n    return CALC ? CALC + '(' + i * 100 + '% / ' + slideCountNew + ')' : i * 100 / slideCountNew + '%';\n  }\n\n  function getInnerWrapperStyles(edgePaddingTem, gutterTem, fixedWidthTem, speedTem, autoHeightBP) {\n    var str = '';\n\n    if (edgePaddingTem !== undefined) {\n      var gap = edgePaddingTem;\n\n      if (gutterTem) {\n        gap -= gutterTem;\n      }\n\n      str = horizontal ? 'margin: 0 ' + gap + 'px 0 ' + edgePaddingTem + 'px;' : 'margin: ' + edgePaddingTem + 'px 0 ' + gap + 'px 0;';\n    } else if (gutterTem && !fixedWidthTem) {\n      var gutterTemUnit = '-' + gutterTem + 'px',\n          dir = horizontal ? gutterTemUnit + ' 0 0' : '0 ' + gutterTemUnit + ' 0';\n      str = 'margin: 0 ' + dir + ';';\n    }\n\n    if (!carousel && autoHeightBP && TRANSITIONDURATION && speedTem) {\n      str += getTransitionDurationStyle(speedTem);\n    }\n\n    return str;\n  }\n\n  function getContainerWidth(fixedWidthTem, gutterTem, itemsTem) {\n    if (fixedWidthTem) {\n      return (fixedWidthTem + gutterTem) * slideCountNew + 'px';\n    } else {\n      return CALC ? CALC + '(' + slideCountNew * 100 + '% / ' + itemsTem + ')' : slideCountNew * 100 / itemsTem + '%';\n    }\n  }\n\n  function getSlideWidthStyle(fixedWidthTem, gutterTem, itemsTem) {\n    var width;\n\n    if (fixedWidthTem) {\n      width = fixedWidthTem + gutterTem + 'px';\n    } else {\n      if (!carousel) {\n        itemsTem = Math.floor(itemsTem);\n      }\n\n      var dividend = carousel ? slideCountNew : itemsTem;\n      width = CALC ? CALC + '(100% / ' + dividend + ')' : 100 / dividend + '%';\n    }\n\n    width = 'width:' + width; // inner slider: overwrite outer slider styles\n\n    return nested !== 'inner' ? width + ';' : width + ' !important;';\n  }\n\n  function getSlideGutterStyle(gutterTem) {\n    var str = ''; // gutter maybe interger || 0\n    // so can't use 'if (gutter)'\n\n    if (gutterTem !== false) {\n      var prop = horizontal ? 'padding-' : 'margin-',\n          dir = horizontal ? 'right' : 'bottom';\n      str = prop + dir + ': ' + gutterTem + 'px;';\n    }\n\n    return str;\n  }\n\n  function getCSSPrefix(name, num) {\n    var prefix = name.substring(0, name.length - num).toLowerCase();\n\n    if (prefix) {\n      prefix = '-' + prefix + '-';\n    }\n\n    return prefix;\n  }\n\n  function getTransitionDurationStyle(speed) {\n    return getCSSPrefix(TRANSITIONDURATION, 18) + 'transition-duration:' + speed / 1000 + 's;';\n  }\n\n  function getAnimationDurationStyle(speed) {\n    return getCSSPrefix(ANIMATIONDURATION, 17) + 'animation-duration:' + speed / 1000 + 's;';\n  }\n\n  function initStructure() {\n    var classOuter = 'tns-outer',\n        classInner = 'tns-inner',\n        hasGutter = hasOption('gutter');\n    outerWrapper.className = classOuter;\n    innerWrapper.className = classInner;\n    outerWrapper.id = slideId + '-ow';\n    innerWrapper.id = slideId + '-iw'; // set container properties\n\n    if (container.id === '') {\n      container.id = slideId;\n    }\n\n    newContainerClasses += PERCENTAGELAYOUT || autoWidth ? ' tns-subpixel' : ' tns-no-subpixel';\n    newContainerClasses += CALC ? ' tns-calc' : ' tns-no-calc';\n\n    if (autoWidth) {\n      newContainerClasses += ' tns-autowidth';\n    }\n\n    newContainerClasses += ' tns-' + options.axis;\n    container.className += newContainerClasses; // add constrain layer for carousel\n\n    if (carousel) {\n      middleWrapper = doc.createElement('div');\n      middleWrapper.id = slideId + '-mw';\n      middleWrapper.className = 'tns-ovh';\n      outerWrapper.appendChild(middleWrapper);\n      middleWrapper.appendChild(innerWrapper);\n    } else {\n      outerWrapper.appendChild(innerWrapper);\n    }\n\n    if (autoHeight) {\n      var wp = middleWrapper ? middleWrapper : innerWrapper;\n      wp.className += ' tns-ah';\n    }\n\n    containerParent.insertBefore(outerWrapper, container);\n    innerWrapper.appendChild(container); // add id, class, aria attributes\n    // before clone slides\n\n    forEach(slideItems, function (item, i) {\n      addClass(item, 'tns-item');\n\n      if (!item.id) {\n        item.id = slideId + '-item' + i;\n      }\n\n      if (!carousel && animateNormal) {\n        addClass(item, animateNormal);\n      }\n\n      setAttrs(item, {\n        'aria-hidden': 'true',\n        'tabindex': '-1'\n      });\n    }); // ## clone slides\n    // carousel: n + slides + n\n    // gallery:      slides + n\n\n    if (cloneCount) {\n      var fragmentBefore = doc.createDocumentFragment(),\n          fragmentAfter = doc.createDocumentFragment();\n\n      for (var j = cloneCount; j--;) {\n        var num = j % slideCount,\n            cloneFirst = slideItems[num].cloneNode(true);\n        addClass(cloneFirst, slideClonedClass);\n        removeAttrs(cloneFirst, 'id');\n        fragmentAfter.insertBefore(cloneFirst, fragmentAfter.firstChild);\n\n        if (carousel) {\n          var cloneLast = slideItems[slideCount - 1 - num].cloneNode(true);\n          addClass(cloneLast, slideClonedClass);\n          removeAttrs(cloneLast, 'id');\n          fragmentBefore.appendChild(cloneLast);\n        }\n      }\n\n      container.insertBefore(fragmentBefore, container.firstChild);\n      container.appendChild(fragmentAfter);\n      slideItems = container.children;\n    }\n  }\n\n  function initSliderTransform() {\n    // ## images loaded/failed\n    if (hasOption('autoHeight') || autoWidth || !horizontal) {\n      var imgs = container.querySelectorAll('img'); // add img load event listener\n\n      forEach(imgs, function (img) {\n        var src = img.src;\n\n        if (!lazyload) {\n          // not data img\n          if (src && src.indexOf('data:image') < 0) {\n            img.src = '';\n            addEvents(img, imgEvents);\n            addClass(img, 'loading');\n            img.src = src; // data img\n          } else {\n            imgLoaded(img);\n          }\n        }\n      }); // set imgsComplete\n\n      raf(function () {\n        imgsLoadedCheck(arrayFromNodeList(imgs), function () {\n          imgsComplete = true;\n        });\n      }); // reset imgs for auto height: check visible imgs only\n\n      if (hasOption('autoHeight')) {\n        imgs = getImageArray(index, Math.min(index + items - 1, slideCountNew - 1));\n      }\n\n      lazyload ? initSliderTransformStyleCheck() : raf(function () {\n        imgsLoadedCheck(arrayFromNodeList(imgs), initSliderTransformStyleCheck);\n      });\n    } else {\n      // set container transform property\n      if (carousel) {\n        doContainerTransformSilent();\n      } // update slider tools and events\n\n\n      initTools();\n      initEvents();\n    }\n  }\n\n  function initSliderTransformStyleCheck() {\n    if (autoWidth && slideCount > 1) {\n      // check styles application\n      var num = loop ? index : slideCount - 1;\n\n      (function stylesApplicationCheck() {\n        var left = slideItems[num].getBoundingClientRect().left;\n        var right = slideItems[num - 1].getBoundingClientRect().right;\n        Math.abs(left - right) <= 1 ? initSliderTransformCore() : setTimeout(function () {\n          stylesApplicationCheck();\n        }, 16);\n      })();\n    } else {\n      initSliderTransformCore();\n    }\n  }\n\n  function initSliderTransformCore() {\n    // run Fn()s which are rely on image loading\n    if (!horizontal || autoWidth) {\n      setSlidePositions();\n\n      if (autoWidth) {\n        rightBoundary = getRightBoundary();\n\n        if (freezable) {\n          freeze = getFreeze();\n        }\n\n        indexMax = getIndexMax(); // <= slidePositions, rightBoundary <=\n\n        resetVariblesWhenDisable(disable || freeze);\n      } else {\n        updateContentWrapperHeight();\n      }\n    } // set container transform property\n\n\n    if (carousel) {\n      doContainerTransformSilent();\n    } // update slider tools and events\n\n\n    initTools();\n    initEvents();\n  }\n\n  function initSheet() {\n    // gallery:\n    // set animation classes and left value for gallery slider\n    if (!carousel) {\n      for (var i = index, l = index + Math.min(slideCount, items); i < l; i++) {\n        var item = slideItems[i];\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, animateIn);\n        removeClass(item, animateNormal);\n      }\n    } // #### LAYOUT\n    // ## INLINE-BLOCK VS FLOAT\n    // ## PercentageLayout:\n    // slides: inline-block\n    // remove blank space between slides by set font-size: 0\n    // ## Non PercentageLayout:\n    // slides: float\n    //         margin-right: -100%\n    //         margin-left: ~\n    // Resource: https://docs.google.com/spreadsheets/d/147up245wwTXeQYve3BRSAD4oVcvQmuGsFteJOeA5xNQ/edit?usp=sharing\n\n\n    if (horizontal) {\n      if (PERCENTAGELAYOUT || autoWidth) {\n        addCSSRule(sheet, '#' + slideId + ' > .tns-item', 'font-size:' + win.getComputedStyle(slideItems[0]).fontSize + ';', getCssRulesLength(sheet));\n        addCSSRule(sheet, '#' + slideId, 'font-size:0;', getCssRulesLength(sheet));\n      } else if (carousel) {\n        forEach(slideItems, function (slide, i) {\n          slide.style.marginLeft = getSlideMarginLeft(i);\n        });\n      }\n    } // ## BASIC STYLES\n\n\n    if (CSSMQ) {\n      // middle wrapper style\n      if (TRANSITIONDURATION) {\n        var str = middleWrapper && options.autoHeight ? getTransitionDurationStyle(options.speed) : '';\n        addCSSRule(sheet, '#' + slideId + '-mw', str, getCssRulesLength(sheet));\n      } // inner wrapper styles\n\n\n      str = getInnerWrapperStyles(options.edgePadding, options.gutter, options.fixedWidth, options.speed, options.autoHeight);\n      addCSSRule(sheet, '#' + slideId + '-iw', str, getCssRulesLength(sheet)); // container styles\n\n      if (carousel) {\n        str = horizontal && !autoWidth ? 'width:' + getContainerWidth(options.fixedWidth, options.gutter, options.items) + ';' : '';\n\n        if (TRANSITIONDURATION) {\n          str += getTransitionDurationStyle(speed);\n        }\n\n        addCSSRule(sheet, '#' + slideId, str, getCssRulesLength(sheet));\n      } // slide styles\n\n\n      str = horizontal && !autoWidth ? getSlideWidthStyle(options.fixedWidth, options.gutter, options.items) : '';\n\n      if (options.gutter) {\n        str += getSlideGutterStyle(options.gutter);\n      } // set gallery items transition-duration\n\n\n      if (!carousel) {\n        if (TRANSITIONDURATION) {\n          str += getTransitionDurationStyle(speed);\n        }\n\n        if (ANIMATIONDURATION) {\n          str += getAnimationDurationStyle(speed);\n        }\n      }\n\n      if (str) {\n        addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet));\n      } // non CSS mediaqueries: IE8\n      // ## update inner wrapper, container, slides if needed\n      // set inline styles for inner wrapper & container\n      // insert stylesheet (one line) for slides only (since slides are many)\n\n    } else {\n      // middle wrapper styles\n      update_carousel_transition_duration(); // inner wrapper styles\n\n      innerWrapper.style.cssText = getInnerWrapperStyles(edgePadding, gutter, fixedWidth, autoHeight); // container styles\n\n      if (carousel && horizontal && !autoWidth) {\n        container.style.width = getContainerWidth(fixedWidth, gutter, items);\n      } // slide styles\n\n\n      var str = horizontal && !autoWidth ? getSlideWidthStyle(fixedWidth, gutter, items) : '';\n\n      if (gutter) {\n        str += getSlideGutterStyle(gutter);\n      } // append to the last line\n\n\n      if (str) {\n        addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet));\n      }\n    } // ## MEDIAQUERIES\n\n\n    if (responsive && CSSMQ) {\n      for (var bp in responsive) {\n        // bp: convert string to number\n        bp = parseInt(bp);\n        var opts = responsive[bp],\n            str = '',\n            middleWrapperStr = '',\n            innerWrapperStr = '',\n            containerStr = '',\n            slideStr = '',\n            itemsBP = !autoWidth ? getOption('items', bp) : null,\n            fixedWidthBP = getOption('fixedWidth', bp),\n            speedBP = getOption('speed', bp),\n            edgePaddingBP = getOption('edgePadding', bp),\n            autoHeightBP = getOption('autoHeight', bp),\n            gutterBP = getOption('gutter', bp); // middle wrapper string\n\n        if (TRANSITIONDURATION && middleWrapper && getOption('autoHeight', bp) && 'speed' in opts) {\n          middleWrapperStr = '#' + slideId + '-mw{' + getTransitionDurationStyle(speedBP) + '}';\n        } // inner wrapper string\n\n\n        if ('edgePadding' in opts || 'gutter' in opts) {\n          innerWrapperStr = '#' + slideId + '-iw{' + getInnerWrapperStyles(edgePaddingBP, gutterBP, fixedWidthBP, speedBP, autoHeightBP) + '}';\n        } // container string\n\n\n        if (carousel && horizontal && !autoWidth && ('fixedWidth' in opts || 'items' in opts || fixedWidth && 'gutter' in opts)) {\n          containerStr = 'width:' + getContainerWidth(fixedWidthBP, gutterBP, itemsBP) + ';';\n        }\n\n        if (TRANSITIONDURATION && 'speed' in opts) {\n          containerStr += getTransitionDurationStyle(speedBP);\n        }\n\n        if (containerStr) {\n          containerStr = '#' + slideId + '{' + containerStr + '}';\n        } // slide string\n\n\n        if ('fixedWidth' in opts || fixedWidth && 'gutter' in opts || !carousel && 'items' in opts) {\n          slideStr += getSlideWidthStyle(fixedWidthBP, gutterBP, itemsBP);\n        }\n\n        if ('gutter' in opts) {\n          slideStr += getSlideGutterStyle(gutterBP);\n        } // set gallery items transition-duration\n\n\n        if (!carousel && 'speed' in opts) {\n          if (TRANSITIONDURATION) {\n            slideStr += getTransitionDurationStyle(speedBP);\n          }\n\n          if (ANIMATIONDURATION) {\n            slideStr += getAnimationDurationStyle(speedBP);\n          }\n        }\n\n        if (slideStr) {\n          slideStr = '#' + slideId + ' > .tns-item{' + slideStr + '}';\n        } // add up\n\n\n        str = middleWrapperStr + innerWrapperStr + containerStr + slideStr;\n\n        if (str) {\n          sheet.insertRule('@media (min-width: ' + bp / 16 + 'em) {' + str + '}', sheet.cssRules.length);\n        }\n      }\n    }\n  }\n\n  function initTools() {\n    // == slides ==\n    updateSlideStatus(); // == live region ==\n\n    outerWrapper.insertAdjacentHTML('afterbegin', '<div class=\"tns-liveregion tns-visually-hidden\" aria-live=\"polite\" aria-atomic=\"true\">slide <span class=\"current\">' + getLiveRegionStr() + '</span>  of ' + slideCount + '</div>');\n    liveregionCurrent = outerWrapper.querySelector('.tns-liveregion .current'); // == autoplayInit ==\n\n    if (hasAutoplay) {\n      var txt = autoplay ? 'stop' : 'start';\n\n      if (autoplayButton) {\n        setAttrs(autoplayButton, {\n          'data-action': txt\n        });\n      } else if (options.autoplayButtonOutput) {\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.autoplayPosition), '<button type=\"button\" data-action=\"' + txt + '\">' + autoplayHtmlStrings[0] + txt + autoplayHtmlStrings[1] + autoplayText[0] + '</button>');\n        autoplayButton = outerWrapper.querySelector('[data-action]');\n      } // add event\n\n\n      if (autoplayButton) {\n        addEvents(autoplayButton, {\n          'click': toggleAutoplay\n        });\n      }\n\n      if (autoplay) {\n        startAutoplay();\n\n        if (autoplayHoverPause) {\n          addEvents(container, hoverEvents);\n        }\n\n        if (autoplayResetOnVisibility) {\n          addEvents(container, visibilityEvent);\n        }\n      }\n    } // == navInit ==\n\n\n    if (hasNav) {\n      var initIndex = !carousel ? 0 : cloneCount; // customized nav\n      // will not hide the navs in case they're thumbnails\n\n      if (navContainer) {\n        setAttrs(navContainer, {\n          'aria-label': 'Carousel Pagination'\n        });\n        navItems = navContainer.children;\n        forEach(navItems, function (item, i) {\n          setAttrs(item, {\n            'data-nav': i,\n            'tabindex': '-1',\n            'aria-label': navStr + (i + 1),\n            'aria-controls': slideId\n          });\n        }); // generated nav\n      } else {\n        var navHtml = '',\n            hiddenStr = navAsThumbnails ? '' : 'style=\"display:none\"';\n\n        for (var i = 0; i < slideCount; i++) {\n          // hide nav items by default\n          navHtml += '<button type=\"button\" data-nav=\"' + i + '\" tabindex=\"-1\" aria-controls=\"' + slideId + '\" ' + hiddenStr + ' aria-label=\"' + navStr + (i + 1) + '\"></button>';\n        }\n\n        navHtml = '<div class=\"tns-nav\" aria-label=\"Carousel Pagination\">' + navHtml + '</div>';\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.navPosition), navHtml);\n        navContainer = outerWrapper.querySelector('.tns-nav');\n        navItems = navContainer.children;\n      }\n\n      updateNavVisibility(); // add transition\n\n      if (TRANSITIONDURATION) {\n        var prefix = TRANSITIONDURATION.substring(0, TRANSITIONDURATION.length - 18).toLowerCase(),\n            str = 'transition: all ' + speed / 1000 + 's';\n\n        if (prefix) {\n          str = '-' + prefix + '-' + str;\n        }\n\n        addCSSRule(sheet, '[aria-controls^=' + slideId + '-item]', str, getCssRulesLength(sheet));\n      }\n\n      setAttrs(navItems[navCurrentIndex], {\n        'aria-label': navStr + (navCurrentIndex + 1) + navStrCurrent\n      });\n      removeAttrs(navItems[navCurrentIndex], 'tabindex');\n      addClass(navItems[navCurrentIndex], navActiveClass); // add events\n\n      addEvents(navContainer, navEvents);\n    } // == controlsInit ==\n\n\n    if (hasControls) {\n      if (!controlsContainer && (!prevButton || !nextButton)) {\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.controlsPosition), '<div class=\"tns-controls\" aria-label=\"Carousel Navigation\" tabindex=\"0\"><button type=\"button\" data-controls=\"prev\" tabindex=\"-1\" aria-controls=\"' + slideId + '\">' + controlsText[0] + '</button><button type=\"button\" data-controls=\"next\" tabindex=\"-1\" aria-controls=\"' + slideId + '\">' + controlsText[1] + '</button></div>');\n        controlsContainer = outerWrapper.querySelector('.tns-controls');\n      }\n\n      if (!prevButton || !nextButton) {\n        prevButton = controlsContainer.children[0];\n        nextButton = controlsContainer.children[1];\n      }\n\n      if (options.controlsContainer) {\n        setAttrs(controlsContainer, {\n          'aria-label': 'Carousel Navigation',\n          'tabindex': '0'\n        });\n      }\n\n      if (options.controlsContainer || options.prevButton && options.nextButton) {\n        setAttrs([prevButton, nextButton], {\n          'aria-controls': slideId,\n          'tabindex': '-1'\n        });\n      }\n\n      if (options.controlsContainer || options.prevButton && options.nextButton) {\n        setAttrs(prevButton, {\n          'data-controls': 'prev'\n        });\n        setAttrs(nextButton, {\n          'data-controls': 'next'\n        });\n      }\n\n      prevIsButton = isButton(prevButton);\n      nextIsButton = isButton(nextButton);\n      updateControlsStatus(); // add events\n\n      if (controlsContainer) {\n        addEvents(controlsContainer, controlsEvents);\n      } else {\n        addEvents(prevButton, controlsEvents);\n        addEvents(nextButton, controlsEvents);\n      }\n    } // hide tools if needed\n\n\n    disableUI();\n  }\n\n  function initEvents() {\n    // add events\n    if (carousel && TRANSITIONEND) {\n      var eve = {};\n      eve[TRANSITIONEND] = onTransitionEnd;\n      addEvents(container, eve);\n    }\n\n    if (touch) {\n      addEvents(container, touchEvents, options.preventScrollOnTouch);\n    }\n\n    if (mouseDrag) {\n      addEvents(container, dragEvents);\n    }\n\n    if (arrowKeys) {\n      addEvents(doc, docmentKeydownEvent);\n    }\n\n    if (nested === 'inner') {\n      events.on('outerResized', function () {\n        resizeTasks();\n        events.emit('innerLoaded', info());\n      });\n    } else if (responsive || fixedWidth || autoWidth || autoHeight || !horizontal) {\n      addEvents(win, {\n        'resize': onResize\n      });\n    }\n\n    if (autoHeight) {\n      if (nested === 'outer') {\n        events.on('innerLoaded', doAutoHeight);\n      } else if (!disable) {\n        doAutoHeight();\n      }\n    }\n\n    doLazyLoad();\n\n    if (disable) {\n      disableSlider();\n    } else if (freeze) {\n      freezeSlider();\n    }\n\n    events.on('indexChanged', additionalUpdates);\n\n    if (nested === 'inner') {\n      events.emit('innerLoaded', info());\n    }\n\n    if (typeof onInit === 'function') {\n      onInit(info());\n    }\n\n    isOn = true;\n  }\n\n  function destroy() {\n    // sheet\n    sheet.disabled = true;\n\n    if (sheet.ownerNode) {\n      sheet.ownerNode.remove();\n    } // remove win event listeners\n\n\n    removeEvents(win, {\n      'resize': onResize\n    }); // arrowKeys, controls, nav\n\n    if (arrowKeys) {\n      removeEvents(doc, docmentKeydownEvent);\n    }\n\n    if (controlsContainer) {\n      removeEvents(controlsContainer, controlsEvents);\n    }\n\n    if (navContainer) {\n      removeEvents(navContainer, navEvents);\n    } // autoplay\n\n\n    removeEvents(container, hoverEvents);\n    removeEvents(container, visibilityEvent);\n\n    if (autoplayButton) {\n      removeEvents(autoplayButton, {\n        'click': toggleAutoplay\n      });\n    }\n\n    if (autoplay) {\n      clearInterval(autoplayTimer);\n    } // container\n\n\n    if (carousel && TRANSITIONEND) {\n      var eve = {};\n      eve[TRANSITIONEND] = onTransitionEnd;\n      removeEvents(container, eve);\n    }\n\n    if (touch) {\n      removeEvents(container, touchEvents);\n    }\n\n    if (mouseDrag) {\n      removeEvents(container, dragEvents);\n    } // cache Object values in options && reset HTML\n\n\n    var htmlList = [containerHTML, controlsContainerHTML, prevButtonHTML, nextButtonHTML, navContainerHTML, autoplayButtonHTML];\n    tnsList.forEach(function (item, i) {\n      var el = item === 'container' ? outerWrapper : options[item];\n\n      if (typeof el === 'object' && el) {\n        var prevEl = el.previousElementSibling ? el.previousElementSibling : false,\n            parentEl = el.parentNode;\n        el.outerHTML = htmlList[i];\n        options[item] = prevEl ? prevEl.nextElementSibling : parentEl.firstElementChild;\n      }\n    }); // reset variables\n\n    tnsList = animateIn = animateOut = animateDelay = animateNormal = horizontal = outerWrapper = innerWrapper = container = containerParent = containerHTML = slideItems = slideCount = breakpointZone = windowWidth = autoWidth = fixedWidth = edgePadding = gutter = viewport = items = slideBy = viewportMax = arrowKeys = speed = rewind = loop = autoHeight = sheet = lazyload = slidePositions = slideItemsOut = cloneCount = slideCountNew = hasRightDeadZone = rightBoundary = updateIndexBeforeTransform = transformAttr = transformPrefix = transformPostfix = getIndexMax = index = indexCached = indexMin = indexMax = resizeTimer = swipeAngle = moveDirectionExpected = running = onInit = events = newContainerClasses = slideId = disable = disabled = freezable = freeze = frozen = controlsEvents = navEvents = hoverEvents = visibilityEvent = docmentKeydownEvent = touchEvents = dragEvents = hasControls = hasNav = navAsThumbnails = hasAutoplay = hasTouch = hasMouseDrag = slideActiveClass = imgCompleteClass = imgEvents = imgsComplete = controls = controlsText = controlsContainer = controlsContainerHTML = prevButton = nextButton = prevIsButton = nextIsButton = nav = navContainer = navContainerHTML = navItems = pages = pagesCached = navClicked = navCurrentIndex = navCurrentIndexCached = navActiveClass = navStr = navStrCurrent = autoplay = autoplayTimeout = autoplayDirection = autoplayText = autoplayHoverPause = autoplayButton = autoplayButtonHTML = autoplayResetOnVisibility = autoplayHtmlStrings = autoplayTimer = animating = autoplayHoverPaused = autoplayUserPaused = autoplayVisibilityPaused = initPosition = lastPosition = translateInit = disX = disY = panStart = rafIndex = getDist = touch = mouseDrag = null; // check variables\n    // [animateIn, animateOut, animateDelay, animateNormal, horizontal, outerWrapper, innerWrapper, container, containerParent, containerHTML, slideItems, slideCount, breakpointZone, windowWidth, autoWidth, fixedWidth, edgePadding, gutter, viewport, items, slideBy, viewportMax, arrowKeys, speed, rewind, loop, autoHeight, sheet, lazyload, slidePositions, slideItemsOut, cloneCount, slideCountNew, hasRightDeadZone, rightBoundary, updateIndexBeforeTransform, transformAttr, transformPrefix, transformPostfix, getIndexMax, index, indexCached, indexMin, indexMax, resizeTimer, swipeAngle, moveDirectionExpected, running, onInit, events, newContainerClasses, slideId, disable, disabled, freezable, freeze, frozen, controlsEvents, navEvents, hoverEvents, visibilityEvent, docmentKeydownEvent, touchEvents, dragEvents, hasControls, hasNav, navAsThumbnails, hasAutoplay, hasTouch, hasMouseDrag, slideActiveClass, imgCompleteClass, imgEvents, imgsComplete, controls, controlsText, controlsContainer, controlsContainerHTML, prevButton, nextButton, prevIsButton, nextIsButton, nav, navContainer, navContainerHTML, navItems, pages, pagesCached, navClicked, navCurrentIndex, navCurrentIndexCached, navActiveClass, navStr, navStrCurrent, autoplay, autoplayTimeout, autoplayDirection, autoplayText, autoplayHoverPause, autoplayButton, autoplayButtonHTML, autoplayResetOnVisibility, autoplayHtmlStrings, autoplayTimer, animating, autoplayHoverPaused, autoplayUserPaused, autoplayVisibilityPaused, initPosition, lastPosition, translateInit, disX, disY, panStart, rafIndex, getDist, touch, mouseDrag ].forEach(function(item) { if (item !== null) { console.log(item); } });\n\n    for (var a in this) {\n      if (a !== 'rebuild') {\n        this[a] = null;\n      }\n    }\n\n    isOn = false;\n  } // === ON RESIZE ===\n  // responsive || fixedWidth || autoWidth || !horizontal\n\n\n  function onResize(e) {\n    raf(function () {\n      resizeTasks(getEvent(e));\n    });\n  }\n\n  function resizeTasks(e) {\n    if (!isOn) {\n      return;\n    }\n\n    if (nested === 'outer') {\n      events.emit('outerResized', info(e));\n    }\n\n    windowWidth = getWindowWidth();\n    var bpChanged,\n        breakpointZoneTem = breakpointZone,\n        needContainerTransform = false;\n\n    if (responsive) {\n      setBreakpointZone();\n      bpChanged = breakpointZoneTem !== breakpointZone; // if (hasRightDeadZone) { needContainerTransform = true; } // *?\n\n      if (bpChanged) {\n        events.emit('newBreakpointStart', info(e));\n      }\n    }\n\n    var indChanged,\n        itemsChanged,\n        itemsTem = items,\n        disableTem = disable,\n        freezeTem = freeze,\n        arrowKeysTem = arrowKeys,\n        controlsTem = controls,\n        navTem = nav,\n        touchTem = touch,\n        mouseDragTem = mouseDrag,\n        autoplayTem = autoplay,\n        autoplayHoverPauseTem = autoplayHoverPause,\n        autoplayResetOnVisibilityTem = autoplayResetOnVisibility,\n        indexTem = index;\n\n    if (bpChanged) {\n      var fixedWidthTem = fixedWidth,\n          autoHeightTem = autoHeight,\n          controlsTextTem = controlsText,\n          centerTem = center,\n          autoplayTextTem = autoplayText;\n\n      if (!CSSMQ) {\n        var gutterTem = gutter,\n            edgePaddingTem = edgePadding;\n      }\n    } // get option:\n    // fixed width: viewport, fixedWidth, gutter => items\n    // others: window width => all variables\n    // all: items => slideBy\n\n\n    arrowKeys = getOption('arrowKeys');\n    controls = getOption('controls');\n    nav = getOption('nav');\n    touch = getOption('touch');\n    center = getOption('center');\n    mouseDrag = getOption('mouseDrag');\n    autoplay = getOption('autoplay');\n    autoplayHoverPause = getOption('autoplayHoverPause');\n    autoplayResetOnVisibility = getOption('autoplayResetOnVisibility');\n\n    if (bpChanged) {\n      disable = getOption('disable');\n      fixedWidth = getOption('fixedWidth');\n      speed = getOption('speed');\n      autoHeight = getOption('autoHeight');\n      controlsText = getOption('controlsText');\n      autoplayText = getOption('autoplayText');\n      autoplayTimeout = getOption('autoplayTimeout');\n\n      if (!CSSMQ) {\n        edgePadding = getOption('edgePadding');\n        gutter = getOption('gutter');\n      }\n    } // update options\n\n\n    resetVariblesWhenDisable(disable);\n    viewport = getViewportWidth(); // <= edgePadding, gutter\n\n    if ((!horizontal || autoWidth) && !disable) {\n      setSlidePositions();\n\n      if (!horizontal) {\n        updateContentWrapperHeight(); // <= setSlidePositions\n\n        needContainerTransform = true;\n      }\n    }\n\n    if (fixedWidth || autoWidth) {\n      rightBoundary = getRightBoundary(); // autoWidth: <= viewport, slidePositions, gutter\n      // fixedWidth: <= viewport, fixedWidth, gutter\n\n      indexMax = getIndexMax(); // autoWidth: <= rightBoundary, slidePositions\n      // fixedWidth: <= rightBoundary, fixedWidth, gutter\n    }\n\n    if (bpChanged || fixedWidth) {\n      items = getOption('items');\n      slideBy = getOption('slideBy');\n      itemsChanged = items !== itemsTem;\n\n      if (itemsChanged) {\n        if (!fixedWidth && !autoWidth) {\n          indexMax = getIndexMax();\n        } // <= items\n        // check index before transform in case\n        // slider reach the right edge then items become bigger\n\n\n        updateIndex();\n      }\n    }\n\n    if (bpChanged) {\n      if (disable !== disableTem) {\n        if (disable) {\n          disableSlider();\n        } else {\n          enableSlider(); // <= slidePositions, rightBoundary, indexMax\n        }\n      }\n    }\n\n    if (freezable && (bpChanged || fixedWidth || autoWidth)) {\n      freeze = getFreeze(); // <= autoWidth: slidePositions, gutter, viewport, rightBoundary\n      // <= fixedWidth: fixedWidth, gutter, rightBoundary\n      // <= others: items\n\n      if (freeze !== freezeTem) {\n        if (freeze) {\n          doContainerTransform(getContainerTransformValue(getStartIndex(0)));\n          freezeSlider();\n        } else {\n          unfreezeSlider();\n          needContainerTransform = true;\n        }\n      }\n    }\n\n    resetVariblesWhenDisable(disable || freeze); // controls, nav, touch, mouseDrag, arrowKeys, autoplay, autoplayHoverPause, autoplayResetOnVisibility\n\n    if (!autoplay) {\n      autoplayHoverPause = autoplayResetOnVisibility = false;\n    }\n\n    if (arrowKeys !== arrowKeysTem) {\n      arrowKeys ? addEvents(doc, docmentKeydownEvent) : removeEvents(doc, docmentKeydownEvent);\n    }\n\n    if (controls !== controlsTem) {\n      if (controls) {\n        if (controlsContainer) {\n          showElement(controlsContainer);\n        } else {\n          if (prevButton) {\n            showElement(prevButton);\n          }\n\n          if (nextButton) {\n            showElement(nextButton);\n          }\n        }\n      } else {\n        if (controlsContainer) {\n          hideElement(controlsContainer);\n        } else {\n          if (prevButton) {\n            hideElement(prevButton);\n          }\n\n          if (nextButton) {\n            hideElement(nextButton);\n          }\n        }\n      }\n    }\n\n    if (nav !== navTem) {\n      if (nav) {\n        showElement(navContainer);\n        updateNavVisibility();\n      } else {\n        hideElement(navContainer);\n      }\n    }\n\n    if (touch !== touchTem) {\n      touch ? addEvents(container, touchEvents, options.preventScrollOnTouch) : removeEvents(container, touchEvents);\n    }\n\n    if (mouseDrag !== mouseDragTem) {\n      mouseDrag ? addEvents(container, dragEvents) : removeEvents(container, dragEvents);\n    }\n\n    if (autoplay !== autoplayTem) {\n      if (autoplay) {\n        if (autoplayButton) {\n          showElement(autoplayButton);\n        }\n\n        if (!animating && !autoplayUserPaused) {\n          startAutoplay();\n        }\n      } else {\n        if (autoplayButton) {\n          hideElement(autoplayButton);\n        }\n\n        if (animating) {\n          stopAutoplay();\n        }\n      }\n    }\n\n    if (autoplayHoverPause !== autoplayHoverPauseTem) {\n      autoplayHoverPause ? addEvents(container, hoverEvents) : removeEvents(container, hoverEvents);\n    }\n\n    if (autoplayResetOnVisibility !== autoplayResetOnVisibilityTem) {\n      autoplayResetOnVisibility ? addEvents(doc, visibilityEvent) : removeEvents(doc, visibilityEvent);\n    }\n\n    if (bpChanged) {\n      if (fixedWidth !== fixedWidthTem || center !== centerTem) {\n        needContainerTransform = true;\n      }\n\n      if (autoHeight !== autoHeightTem) {\n        if (!autoHeight) {\n          innerWrapper.style.height = '';\n        }\n      }\n\n      if (controls && controlsText !== controlsTextTem) {\n        prevButton.innerHTML = controlsText[0];\n        nextButton.innerHTML = controlsText[1];\n      }\n\n      if (autoplayButton && autoplayText !== autoplayTextTem) {\n        var i = autoplay ? 1 : 0,\n            html = autoplayButton.innerHTML,\n            len = html.length - autoplayTextTem[i].length;\n\n        if (html.substring(len) === autoplayTextTem[i]) {\n          autoplayButton.innerHTML = html.substring(0, len) + autoplayText[i];\n        }\n      }\n    } else {\n      if (center && (fixedWidth || autoWidth)) {\n        needContainerTransform = true;\n      }\n    }\n\n    if (itemsChanged || fixedWidth && !autoWidth) {\n      pages = getPages();\n      updateNavVisibility();\n    }\n\n    indChanged = index !== indexTem;\n\n    if (indChanged) {\n      events.emit('indexChanged', info());\n      needContainerTransform = true;\n    } else if (itemsChanged) {\n      if (!indChanged) {\n        additionalUpdates();\n      }\n    } else if (fixedWidth || autoWidth) {\n      doLazyLoad();\n      updateSlideStatus();\n      updateLiveRegion();\n    }\n\n    if (itemsChanged && !carousel) {\n      updateGallerySlidePositions();\n    }\n\n    if (!disable && !freeze) {\n      // non-mediaqueries: IE8\n      if (bpChanged && !CSSMQ) {\n        // middle wrapper styles\n        // inner wrapper styles\n        if (edgePadding !== edgePaddingTem || gutter !== gutterTem) {\n          innerWrapper.style.cssText = getInnerWrapperStyles(edgePadding, gutter, fixedWidth, speed, autoHeight);\n        }\n\n        if (horizontal) {\n          // container styles\n          if (carousel) {\n            container.style.width = getContainerWidth(fixedWidth, gutter, items);\n          } // slide styles\n\n\n          var str = getSlideWidthStyle(fixedWidth, gutter, items) + getSlideGutterStyle(gutter); // remove the last line and\n          // add new styles\n\n          removeCSSRule(sheet, getCssRulesLength(sheet) - 1);\n          addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet));\n        }\n      } // auto height\n\n\n      if (autoHeight) {\n        doAutoHeight();\n      }\n\n      if (needContainerTransform) {\n        doContainerTransformSilent();\n        indexCached = index;\n      }\n    }\n\n    if (bpChanged) {\n      events.emit('newBreakpointEnd', info(e));\n    }\n  } // === INITIALIZATION FUNCTIONS === //\n\n\n  function getFreeze() {\n    if (!fixedWidth && !autoWidth) {\n      var a = center ? items - (items - 1) / 2 : items;\n      return slideCount <= a;\n    }\n\n    var width = fixedWidth ? (fixedWidth + gutter) * slideCount : slidePositions[slideCount],\n        vp = edgePadding ? viewport + edgePadding * 2 : viewport + gutter;\n\n    if (center) {\n      vp -= fixedWidth ? (viewport - fixedWidth) / 2 : (viewport - (slidePositions[index + 1] - slidePositions[index] - gutter)) / 2;\n    }\n\n    return width <= vp;\n  }\n\n  function setBreakpointZone() {\n    breakpointZone = 0;\n\n    for (var bp in responsive) {\n      bp = parseInt(bp); // convert string to number\n\n      if (windowWidth >= bp) {\n        breakpointZone = bp;\n      }\n    }\n  } // (slideBy, indexMin, indexMax) => index\n\n\n  var updateIndex = function () {\n    return loop ? carousel ? // loop + carousel\n    function () {\n      var leftEdge = indexMin,\n          rightEdge = indexMax;\n      leftEdge += slideBy;\n      rightEdge -= slideBy; // adjust edges when has edge paddings\n      // or fixed-width slider with extra space on the right side\n\n      if (edgePadding) {\n        leftEdge += 1;\n        rightEdge -= 1;\n      } else if (fixedWidth) {\n        if ((viewport + gutter) % (fixedWidth + gutter)) {\n          rightEdge -= 1;\n        }\n      }\n\n      if (cloneCount) {\n        if (index > rightEdge) {\n          index -= slideCount;\n        } else if (index < leftEdge) {\n          index += slideCount;\n        }\n      }\n    } : // loop + gallery\n    function () {\n      if (index > indexMax) {\n        while (index >= indexMin + slideCount) {\n          index -= slideCount;\n        }\n      } else if (index < indexMin) {\n        while (index <= indexMax - slideCount) {\n          index += slideCount;\n        }\n      }\n    } : // non-loop\n    function () {\n      index = Math.max(indexMin, Math.min(indexMax, index));\n    };\n  }();\n\n  function disableUI() {\n    if (!autoplay && autoplayButton) {\n      hideElement(autoplayButton);\n    }\n\n    if (!nav && navContainer) {\n      hideElement(navContainer);\n    }\n\n    if (!controls) {\n      if (controlsContainer) {\n        hideElement(controlsContainer);\n      } else {\n        if (prevButton) {\n          hideElement(prevButton);\n        }\n\n        if (nextButton) {\n          hideElement(nextButton);\n        }\n      }\n    }\n  }\n\n  function enableUI() {\n    if (autoplay && autoplayButton) {\n      showElement(autoplayButton);\n    }\n\n    if (nav && navContainer) {\n      showElement(navContainer);\n    }\n\n    if (controls) {\n      if (controlsContainer) {\n        showElement(controlsContainer);\n      } else {\n        if (prevButton) {\n          showElement(prevButton);\n        }\n\n        if (nextButton) {\n          showElement(nextButton);\n        }\n      }\n    }\n  }\n\n  function freezeSlider() {\n    if (frozen) {\n      return;\n    } // remove edge padding from inner wrapper\n\n\n    if (edgePadding) {\n      innerWrapper.style.margin = '0px';\n    } // add class tns-transparent to cloned slides\n\n\n    if (cloneCount) {\n      var str = 'tns-transparent';\n\n      for (var i = cloneCount; i--;) {\n        if (carousel) {\n          addClass(slideItems[i], str);\n        }\n\n        addClass(slideItems[slideCountNew - i - 1], str);\n      }\n    } // update tools\n\n\n    disableUI();\n    frozen = true;\n  }\n\n  function unfreezeSlider() {\n    if (!frozen) {\n      return;\n    } // restore edge padding for inner wrapper\n    // for mordern browsers\n\n\n    if (edgePadding && CSSMQ) {\n      innerWrapper.style.margin = '';\n    } // remove class tns-transparent to cloned slides\n\n\n    if (cloneCount) {\n      var str = 'tns-transparent';\n\n      for (var i = cloneCount; i--;) {\n        if (carousel) {\n          removeClass(slideItems[i], str);\n        }\n\n        removeClass(slideItems[slideCountNew - i - 1], str);\n      }\n    } // update tools\n\n\n    enableUI();\n    frozen = false;\n  }\n\n  function disableSlider() {\n    if (disabled) {\n      return;\n    }\n\n    sheet.disabled = true;\n    container.className = container.className.replace(newContainerClasses.substring(1), '');\n    removeAttrs(container, ['style']);\n\n    if (loop) {\n      for (var j = cloneCount; j--;) {\n        if (carousel) {\n          hideElement(slideItems[j]);\n        }\n\n        hideElement(slideItems[slideCountNew - j - 1]);\n      }\n    } // vertical slider\n\n\n    if (!horizontal || !carousel) {\n      removeAttrs(innerWrapper, ['style']);\n    } // gallery\n\n\n    if (!carousel) {\n      for (var i = index, l = index + slideCount; i < l; i++) {\n        var item = slideItems[i];\n        removeAttrs(item, ['style']);\n        removeClass(item, animateIn);\n        removeClass(item, animateNormal);\n      }\n    } // update tools\n\n\n    disableUI();\n    disabled = true;\n  }\n\n  function enableSlider() {\n    if (!disabled) {\n      return;\n    }\n\n    sheet.disabled = false;\n    container.className += newContainerClasses;\n    doContainerTransformSilent();\n\n    if (loop) {\n      for (var j = cloneCount; j--;) {\n        if (carousel) {\n          showElement(slideItems[j]);\n        }\n\n        showElement(slideItems[slideCountNew - j - 1]);\n      }\n    } // gallery\n\n\n    if (!carousel) {\n      for (var i = index, l = index + slideCount; i < l; i++) {\n        var item = slideItems[i],\n            classN = i < index + items ? animateIn : animateNormal;\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, classN);\n      }\n    } // update tools\n\n\n    enableUI();\n    disabled = false;\n  }\n\n  function updateLiveRegion() {\n    var str = getLiveRegionStr();\n\n    if (liveregionCurrent.innerHTML !== str) {\n      liveregionCurrent.innerHTML = str;\n    }\n  }\n\n  function getLiveRegionStr() {\n    var arr = getVisibleSlideRange(),\n        start = arr[0] + 1,\n        end = arr[1] + 1;\n    return start === end ? start + '' : start + ' to ' + end;\n  }\n\n  function getVisibleSlideRange(val) {\n    if (val == null) {\n      val = getContainerTransformValue();\n    }\n\n    var start = index,\n        end,\n        rangestart,\n        rangeend; // get range start, range end for autoWidth and fixedWidth\n\n    if (center || edgePadding) {\n      if (autoWidth || fixedWidth) {\n        rangestart = -(parseFloat(val) + edgePadding);\n        rangeend = rangestart + viewport + edgePadding * 2;\n      }\n    } else {\n      if (autoWidth) {\n        rangestart = slidePositions[index];\n        rangeend = rangestart + viewport;\n      }\n    } // get start, end\n    // - check auto width\n\n\n    if (autoWidth) {\n      slidePositions.forEach(function (point, i) {\n        if (i < slideCountNew) {\n          if ((center || edgePadding) && point <= rangestart + 0.5) {\n            start = i;\n          }\n\n          if (rangeend - point >= 0.5) {\n            end = i;\n          }\n        }\n      }); // - check percentage width, fixed width\n    } else {\n      if (fixedWidth) {\n        var cell = fixedWidth + gutter;\n\n        if (center || edgePadding) {\n          start = Math.floor(rangestart / cell);\n          end = Math.ceil(rangeend / cell - 1);\n        } else {\n          end = start + Math.ceil(viewport / cell) - 1;\n        }\n      } else {\n        if (center || edgePadding) {\n          var a = items - 1;\n\n          if (center) {\n            start -= a / 2;\n            end = index + a / 2;\n          } else {\n            end = index + a;\n          }\n\n          if (edgePadding) {\n            var b = edgePadding * items / viewport;\n            start -= b;\n            end += b;\n          }\n\n          start = Math.floor(start);\n          end = Math.ceil(end);\n        } else {\n          end = start + items - 1;\n        }\n      }\n\n      start = Math.max(start, 0);\n      end = Math.min(end, slideCountNew - 1);\n    }\n\n    return [start, end];\n  }\n\n  function doLazyLoad() {\n    if (lazyload && !disable) {\n      var arg = getVisibleSlideRange();\n      arg.push(lazyloadSelector);\n      getImageArray.apply(null, arg).forEach(function (img) {\n        if (!hasClass(img, imgCompleteClass)) {\n          // stop propagation transitionend event to container\n          var eve = {};\n\n          eve[TRANSITIONEND] = function (e) {\n            e.stopPropagation();\n          };\n\n          addEvents(img, eve);\n          addEvents(img, imgEvents); // update src\n\n          img.src = getAttr(img, 'data-src'); // update srcset\n\n          var srcset = getAttr(img, 'data-srcset');\n\n          if (srcset) {\n            img.srcset = srcset;\n          }\n\n          addClass(img, 'loading');\n        }\n      });\n    }\n  }\n\n  function onImgLoaded(e) {\n    imgLoaded(getTarget(e));\n  }\n\n  function onImgFailed(e) {\n    imgFailed(getTarget(e));\n  }\n\n  function imgLoaded(img) {\n    addClass(img, 'loaded');\n    imgCompleted(img);\n  }\n\n  function imgFailed(img) {\n    addClass(img, 'failed');\n    imgCompleted(img);\n  }\n\n  function imgCompleted(img) {\n    addClass(img, imgCompleteClass);\n    removeClass(img, 'loading');\n    removeEvents(img, imgEvents);\n  }\n\n  function getImageArray(start, end, imgSelector) {\n    var imgs = [];\n\n    if (!imgSelector) {\n      imgSelector = 'img';\n    }\n\n    while (start <= end) {\n      forEach(slideItems[start].querySelectorAll(imgSelector), function (img) {\n        imgs.push(img);\n      });\n      start++;\n    }\n\n    return imgs;\n  } // check if all visible images are loaded\n  // and update container height if it's done\n\n\n  function doAutoHeight() {\n    var imgs = getImageArray.apply(null, getVisibleSlideRange());\n    raf(function () {\n      imgsLoadedCheck(imgs, updateInnerWrapperHeight);\n    });\n  }\n\n  function imgsLoadedCheck(imgs, cb) {\n    // execute callback function if all images are complete\n    if (imgsComplete) {\n      return cb();\n    } // check image classes\n\n\n    imgs.forEach(function (img, index) {\n      if (!lazyload && img.complete) {\n        imgCompleted(img);\n      } // Check image.complete\n\n\n      if (hasClass(img, imgCompleteClass)) {\n        imgs.splice(index, 1);\n      }\n    }); // execute callback function if selected images are all complete\n\n    if (!imgs.length) {\n      return cb();\n    } // otherwise execute this functiona again\n\n\n    raf(function () {\n      imgsLoadedCheck(imgs, cb);\n    });\n  }\n\n  function additionalUpdates() {\n    doLazyLoad();\n    updateSlideStatus();\n    updateLiveRegion();\n    updateControlsStatus();\n    updateNavStatus();\n  }\n\n  function update_carousel_transition_duration() {\n    if (carousel && autoHeight) {\n      middleWrapper.style[TRANSITIONDURATION] = speed / 1000 + 's';\n    }\n  }\n\n  function getMaxSlideHeight(slideStart, slideRange) {\n    var heights = [];\n\n    for (var i = slideStart, l = Math.min(slideStart + slideRange, slideCountNew); i < l; i++) {\n      heights.push(slideItems[i].offsetHeight);\n    }\n\n    return Math.max.apply(null, heights);\n  } // update inner wrapper height\n  // 1. get the max-height of the visible slides\n  // 2. set transitionDuration to speed\n  // 3. update inner wrapper height to max-height\n  // 4. set transitionDuration to 0s after transition done\n\n\n  function updateInnerWrapperHeight() {\n    var maxHeight = autoHeight ? getMaxSlideHeight(index, items) : getMaxSlideHeight(cloneCount, slideCount),\n        wp = middleWrapper ? middleWrapper : innerWrapper;\n\n    if (wp.style.height !== maxHeight) {\n      wp.style.height = maxHeight + 'px';\n    }\n  } // get the distance from the top edge of the first slide to each slide\n  // (init) => slidePositions\n\n\n  function setSlidePositions() {\n    slidePositions = [0];\n    var attr = horizontal ? 'left' : 'top',\n        attr2 = horizontal ? 'right' : 'bottom',\n        base = slideItems[0].getBoundingClientRect()[attr];\n    forEach(slideItems, function (item, i) {\n      // skip the first slide\n      if (i) {\n        slidePositions.push(item.getBoundingClientRect()[attr] - base);\n      } // add the end edge\n\n\n      if (i === slideCountNew - 1) {\n        slidePositions.push(item.getBoundingClientRect()[attr2] - base);\n      }\n    });\n  } // update slide\n\n\n  function updateSlideStatus() {\n    var range = getVisibleSlideRange(),\n        start = range[0],\n        end = range[1];\n    forEach(slideItems, function (item, i) {\n      // show slides\n      if (i >= start && i <= end) {\n        if (hasAttr(item, 'aria-hidden')) {\n          removeAttrs(item, ['aria-hidden', 'tabindex']);\n          addClass(item, slideActiveClass);\n        } // hide slides\n\n      } else {\n        if (!hasAttr(item, 'aria-hidden')) {\n          setAttrs(item, {\n            'aria-hidden': 'true',\n            'tabindex': '-1'\n          });\n          removeClass(item, slideActiveClass);\n        }\n      }\n    });\n  } // gallery: update slide position\n\n\n  function updateGallerySlidePositions() {\n    var l = index + Math.min(slideCount, items);\n\n    for (var i = slideCountNew; i--;) {\n      var item = slideItems[i];\n\n      if (i >= index && i < l) {\n        // add transitions to visible slides when adjusting their positions\n        addClass(item, 'tns-moving');\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, animateIn);\n        removeClass(item, animateNormal);\n      } else if (item.style.left) {\n        item.style.left = '';\n        addClass(item, animateNormal);\n        removeClass(item, animateIn);\n      } // remove outlet animation\n\n\n      removeClass(item, animateOut);\n    } // removing '.tns-moving'\n\n\n    setTimeout(function () {\n      forEach(slideItems, function (el) {\n        removeClass(el, 'tns-moving');\n      });\n    }, 300);\n  } // set tabindex on Nav\n\n\n  function updateNavStatus() {\n    // get current nav\n    if (nav) {\n      navCurrentIndex = navClicked >= 0 ? navClicked : getCurrentNavIndex();\n      navClicked = -1;\n\n      if (navCurrentIndex !== navCurrentIndexCached) {\n        var navPrev = navItems[navCurrentIndexCached],\n            navCurrent = navItems[navCurrentIndex];\n        setAttrs(navPrev, {\n          'tabindex': '-1',\n          'aria-label': navStr + (navCurrentIndexCached + 1)\n        });\n        removeClass(navPrev, navActiveClass);\n        setAttrs(navCurrent, {\n          'aria-label': navStr + (navCurrentIndex + 1) + navStrCurrent\n        });\n        removeAttrs(navCurrent, 'tabindex');\n        addClass(navCurrent, navActiveClass);\n        navCurrentIndexCached = navCurrentIndex;\n      }\n    }\n  }\n\n  function getLowerCaseNodeName(el) {\n    return el.nodeName.toLowerCase();\n  }\n\n  function isButton(el) {\n    return getLowerCaseNodeName(el) === 'button';\n  }\n\n  function isAriaDisabled(el) {\n    return el.getAttribute('aria-disabled') === 'true';\n  }\n\n  function disEnableElement(isButton, el, val) {\n    if (isButton) {\n      el.disabled = val;\n    } else {\n      el.setAttribute('aria-disabled', val.toString());\n    }\n  } // set 'disabled' to true on controls when reach the edges\n\n\n  function updateControlsStatus() {\n    if (!controls || rewind || loop) {\n      return;\n    }\n\n    var prevDisabled = prevIsButton ? prevButton.disabled : isAriaDisabled(prevButton),\n        nextDisabled = nextIsButton ? nextButton.disabled : isAriaDisabled(nextButton),\n        disablePrev = index <= indexMin ? true : false,\n        disableNext = !rewind && index >= indexMax ? true : false;\n\n    if (disablePrev && !prevDisabled) {\n      disEnableElement(prevIsButton, prevButton, true);\n    }\n\n    if (!disablePrev && prevDisabled) {\n      disEnableElement(prevIsButton, prevButton, false);\n    }\n\n    if (disableNext && !nextDisabled) {\n      disEnableElement(nextIsButton, nextButton, true);\n    }\n\n    if (!disableNext && nextDisabled) {\n      disEnableElement(nextIsButton, nextButton, false);\n    }\n  } // set duration\n\n\n  function resetDuration(el, str) {\n    if (TRANSITIONDURATION) {\n      el.style[TRANSITIONDURATION] = str;\n    }\n  }\n\n  function getSliderWidth() {\n    return fixedWidth ? (fixedWidth + gutter) * slideCountNew : slidePositions[slideCountNew];\n  }\n\n  function getCenterGap(num) {\n    if (num == null) {\n      num = index;\n    }\n\n    var gap = edgePadding ? gutter : 0;\n    return autoWidth ? (viewport - gap - (slidePositions[num + 1] - slidePositions[num] - gutter)) / 2 : fixedWidth ? (viewport - fixedWidth) / 2 : (items - 1) / 2;\n  }\n\n  function getRightBoundary() {\n    var gap = edgePadding ? gutter : 0,\n        result = viewport + gap - getSliderWidth();\n\n    if (center && !loop) {\n      result = fixedWidth ? -(fixedWidth + gutter) * (slideCountNew - 1) - getCenterGap() : getCenterGap(slideCountNew - 1) - slidePositions[slideCountNew - 1];\n    }\n\n    if (result > 0) {\n      result = 0;\n    }\n\n    return result;\n  }\n\n  function getContainerTransformValue(num) {\n    if (num == null) {\n      num = index;\n    }\n\n    var val;\n\n    if (horizontal && !autoWidth) {\n      if (fixedWidth) {\n        val = -(fixedWidth + gutter) * num;\n\n        if (center) {\n          val += getCenterGap();\n        }\n      } else {\n        var denominator = TRANSFORM ? slideCountNew : items;\n\n        if (center) {\n          num -= getCenterGap();\n        }\n\n        val = -num * 100 / denominator;\n      }\n    } else {\n      val = -slidePositions[num];\n\n      if (center && autoWidth) {\n        val += getCenterGap();\n      }\n    }\n\n    if (hasRightDeadZone) {\n      val = Math.max(val, rightBoundary);\n    }\n\n    val += horizontal && !autoWidth && !fixedWidth ? '%' : 'px';\n    return val;\n  }\n\n  function doContainerTransformSilent(val) {\n    resetDuration(container, '0s');\n    doContainerTransform(val);\n  }\n\n  function doContainerTransform(val) {\n    if (val == null) {\n      val = getContainerTransformValue();\n    }\n\n    container.style[transformAttr] = transformPrefix + val + transformPostfix;\n  }\n\n  function animateSlide(number, classOut, classIn, isOut) {\n    var l = number + items;\n\n    if (!loop) {\n      l = Math.min(l, slideCountNew);\n    }\n\n    for (var i = number; i < l; i++) {\n      var item = slideItems[i]; // set item positions\n\n      if (!isOut) {\n        item.style.left = (i - index) * 100 / items + '%';\n      }\n\n      if (animateDelay && TRANSITIONDELAY) {\n        item.style[TRANSITIONDELAY] = item.style[ANIMATIONDELAY] = animateDelay * (i - number) / 1000 + 's';\n      }\n\n      removeClass(item, classOut);\n      addClass(item, classIn);\n\n      if (isOut) {\n        slideItemsOut.push(item);\n      }\n    }\n  } // make transfer after click/drag:\n  // 1. change 'transform' property for mordern browsers\n  // 2. change 'left' property for legacy browsers\n\n\n  var transformCore = function () {\n    return carousel ? function () {\n      resetDuration(container, '');\n\n      if (TRANSITIONDURATION || !speed) {\n        // for morden browsers with non-zero duration or\n        // zero duration for all browsers\n        doContainerTransform(); // run fallback function manually\n        // when duration is 0 / container is hidden\n\n        if (!speed || !isVisible(container)) {\n          onTransitionEnd();\n        }\n      } else {\n        // for old browser with non-zero duration\n        jsTransform(container, transformAttr, transformPrefix, transformPostfix, getContainerTransformValue(), speed, onTransitionEnd);\n      }\n\n      if (!horizontal) {\n        updateContentWrapperHeight();\n      }\n    } : function () {\n      slideItemsOut = [];\n      var eve = {};\n      eve[TRANSITIONEND] = eve[ANIMATIONEND] = onTransitionEnd;\n      removeEvents(slideItems[indexCached], eve);\n      addEvents(slideItems[index], eve);\n      animateSlide(indexCached, animateIn, animateOut, true);\n      animateSlide(index, animateNormal, animateIn); // run fallback function manually\n      // when transition or animation not supported / duration is 0\n\n      if (!TRANSITIONEND || !ANIMATIONEND || !speed || !isVisible(container)) {\n        onTransitionEnd();\n      }\n    };\n  }();\n\n  function render(e, sliderMoved) {\n    if (updateIndexBeforeTransform) {\n      updateIndex();\n    } // render when slider was moved (touch or drag) even though index may not change\n\n\n    if (index !== indexCached || sliderMoved) {\n      // events\n      events.emit('indexChanged', info());\n      events.emit('transitionStart', info());\n\n      if (autoHeight) {\n        doAutoHeight();\n      } // pause autoplay when click or keydown from user\n\n\n      if (animating && e && ['click', 'keydown'].indexOf(e.type) >= 0) {\n        stopAutoplay();\n      }\n\n      running = true;\n      transformCore();\n    }\n  }\n  /*\n   * Transfer prefixed properties to the same format\n   * CSS: -Webkit-Transform => webkittransform\n   * JS: WebkitTransform => webkittransform\n   * @param {string} str - property\n   *\n   */\n\n\n  function strTrans(str) {\n    return str.toLowerCase().replace(/-/g, '');\n  } // AFTER TRANSFORM\n  // Things need to be done after a transfer:\n  // 1. check index\n  // 2. add classes to visible slide\n  // 3. disable controls buttons when reach the first/last slide in non-loop slider\n  // 4. update nav status\n  // 5. lazyload images\n  // 6. update container height\n\n\n  function onTransitionEnd(event) {\n    // check running on gallery mode\n    // make sure trantionend/animationend events run only once\n    if (carousel || running) {\n      events.emit('transitionEnd', info(event));\n\n      if (!carousel && slideItemsOut.length > 0) {\n        for (var i = 0; i < slideItemsOut.length; i++) {\n          var item = slideItemsOut[i]; // set item positions\n\n          item.style.left = '';\n\n          if (ANIMATIONDELAY && TRANSITIONDELAY) {\n            item.style[ANIMATIONDELAY] = '';\n            item.style[TRANSITIONDELAY] = '';\n          }\n\n          removeClass(item, animateOut);\n          addClass(item, animateNormal);\n        }\n      }\n      /* update slides, nav, controls after checking ...\n       * => legacy browsers who don't support 'event'\n       *    have to check event first, otherwise event.target will cause an error\n       * => or 'gallery' mode:\n       *   + event target is slide item\n       * => or 'carousel' mode:\n       *   + event target is container,\n       *   + event.property is the same with transform attribute\n       */\n\n\n      if (!event || !carousel && event.target.parentNode === container || event.target === container && strTrans(event.propertyName) === strTrans(transformAttr)) {\n        if (!updateIndexBeforeTransform) {\n          var indexTem = index;\n          updateIndex();\n\n          if (index !== indexTem) {\n            events.emit('indexChanged', info());\n            doContainerTransformSilent();\n          }\n        }\n\n        if (nested === 'inner') {\n          events.emit('innerLoaded', info());\n        }\n\n        running = false;\n        indexCached = index;\n      }\n    }\n  } // # ACTIONS\n\n\n  function goTo(targetIndex, e) {\n    if (freeze) {\n      return;\n    } // prev slideBy\n\n\n    if (targetIndex === 'prev') {\n      onControlsClick(e, -1); // next slideBy\n    } else if (targetIndex === 'next') {\n      onControlsClick(e, 1); // go to exact slide\n    } else {\n      if (running) {\n        if (preventActionWhenRunning) {\n          return;\n        } else {\n          onTransitionEnd();\n        }\n      }\n\n      var absIndex = getAbsIndex(),\n          indexGap = 0;\n\n      if (targetIndex === 'first') {\n        indexGap = -absIndex;\n      } else if (targetIndex === 'last') {\n        indexGap = carousel ? slideCount - items - absIndex : slideCount - 1 - absIndex;\n      } else {\n        if (typeof targetIndex !== 'number') {\n          targetIndex = parseInt(targetIndex);\n        }\n\n        if (!isNaN(targetIndex)) {\n          // from directly called goTo function\n          if (!e) {\n            targetIndex = Math.max(0, Math.min(slideCount - 1, targetIndex));\n          }\n\n          indexGap = targetIndex - absIndex;\n        }\n      } // gallery: make sure new page won't overlap with current page\n\n\n      if (!carousel && indexGap && Math.abs(indexGap) < items) {\n        var factor = indexGap > 0 ? 1 : -1;\n        indexGap += index + indexGap - slideCount >= indexMin ? slideCount * factor : slideCount * 2 * factor * -1;\n      }\n\n      index += indexGap; // make sure index is in range\n\n      if (carousel && loop) {\n        if (index < indexMin) {\n          index += slideCount;\n        }\n\n        if (index > indexMax) {\n          index -= slideCount;\n        }\n      } // if index is changed, start rendering\n\n\n      if (getAbsIndex(index) !== getAbsIndex(indexCached)) {\n        render(e);\n      }\n    }\n  } // on controls click\n\n\n  function onControlsClick(e, dir) {\n    if (running) {\n      if (preventActionWhenRunning) {\n        return;\n      } else {\n        onTransitionEnd();\n      }\n    }\n\n    var passEventObject;\n\n    if (!dir) {\n      e = getEvent(e);\n      var target = getTarget(e);\n\n      while (target !== controlsContainer && [prevButton, nextButton].indexOf(target) < 0) {\n        target = target.parentNode;\n      }\n\n      var targetIn = [prevButton, nextButton].indexOf(target);\n\n      if (targetIn >= 0) {\n        passEventObject = true;\n        dir = targetIn === 0 ? -1 : 1;\n      }\n    }\n\n    if (rewind) {\n      if (index === indexMin && dir === -1) {\n        goTo('last', e);\n        return;\n      } else if (index === indexMax && dir === 1) {\n        goTo('first', e);\n        return;\n      }\n    }\n\n    if (dir) {\n      index += slideBy * dir;\n\n      if (autoWidth) {\n        index = Math.floor(index);\n      } // pass e when click control buttons or keydown\n\n\n      render(passEventObject || e && e.type === 'keydown' ? e : null);\n    }\n  } // on nav click\n\n\n  function onNavClick(e) {\n    if (running) {\n      if (preventActionWhenRunning) {\n        return;\n      } else {\n        onTransitionEnd();\n      }\n    }\n\n    e = getEvent(e);\n    var target = getTarget(e),\n        navIndex; // find the clicked nav item\n\n    while (target !== navContainer && !hasAttr(target, 'data-nav')) {\n      target = target.parentNode;\n    }\n\n    if (hasAttr(target, 'data-nav')) {\n      var navIndex = navClicked = Number(getAttr(target, 'data-nav')),\n          targetIndexBase = fixedWidth || autoWidth ? navIndex * slideCount / pages : navIndex * items,\n          targetIndex = navAsThumbnails ? navIndex : Math.min(Math.ceil(targetIndexBase), slideCount - 1);\n      goTo(targetIndex, e);\n\n      if (navCurrentIndex === navIndex) {\n        if (animating) {\n          stopAutoplay();\n        }\n\n        navClicked = -1; // reset navClicked\n      }\n    }\n  } // autoplay functions\n\n\n  function setAutoplayTimer() {\n    autoplayTimer = setInterval(function () {\n      onControlsClick(null, autoplayDirection);\n    }, autoplayTimeout);\n    animating = true;\n  }\n\n  function stopAutoplayTimer() {\n    clearInterval(autoplayTimer);\n    animating = false;\n  }\n\n  function updateAutoplayButton(action, txt) {\n    setAttrs(autoplayButton, {\n      'data-action': action\n    });\n    autoplayButton.innerHTML = autoplayHtmlStrings[0] + action + autoplayHtmlStrings[1] + txt;\n  }\n\n  function startAutoplay() {\n    setAutoplayTimer();\n\n    if (autoplayButton) {\n      updateAutoplayButton('stop', autoplayText[1]);\n    }\n  }\n\n  function stopAutoplay() {\n    stopAutoplayTimer();\n\n    if (autoplayButton) {\n      updateAutoplayButton('start', autoplayText[0]);\n    }\n  } // programaitcally play/pause the slider\n\n\n  function play() {\n    if (autoplay && !animating) {\n      startAutoplay();\n      autoplayUserPaused = false;\n    }\n  }\n\n  function pause() {\n    if (animating) {\n      stopAutoplay();\n      autoplayUserPaused = true;\n    }\n  }\n\n  function toggleAutoplay() {\n    if (animating) {\n      stopAutoplay();\n      autoplayUserPaused = true;\n    } else {\n      startAutoplay();\n      autoplayUserPaused = false;\n    }\n  }\n\n  function onVisibilityChange() {\n    if (doc.hidden) {\n      if (animating) {\n        stopAutoplayTimer();\n        autoplayVisibilityPaused = true;\n      }\n    } else if (autoplayVisibilityPaused) {\n      setAutoplayTimer();\n      autoplayVisibilityPaused = false;\n    }\n  }\n\n  function mouseoverPause() {\n    if (animating) {\n      stopAutoplayTimer();\n      autoplayHoverPaused = true;\n    }\n  }\n\n  function mouseoutRestart() {\n    if (autoplayHoverPaused) {\n      setAutoplayTimer();\n      autoplayHoverPaused = false;\n    }\n  } // keydown events on document\n\n\n  function onDocumentKeydown(e) {\n    e = getEvent(e);\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT].indexOf(e.keyCode);\n\n    if (keyIndex >= 0) {\n      onControlsClick(e, keyIndex === 0 ? -1 : 1);\n    }\n  } // on key control\n\n\n  function onControlsKeydown(e) {\n    e = getEvent(e);\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT].indexOf(e.keyCode);\n\n    if (keyIndex >= 0) {\n      if (keyIndex === 0) {\n        if (!prevButton.disabled) {\n          onControlsClick(e, -1);\n        }\n      } else if (!nextButton.disabled) {\n        onControlsClick(e, 1);\n      }\n    }\n  } // set focus\n\n\n  function setFocus(el) {\n    el.focus();\n  } // on key nav\n\n\n  function onNavKeydown(e) {\n    e = getEvent(e);\n    var curElement = doc.activeElement;\n\n    if (!hasAttr(curElement, 'data-nav')) {\n      return;\n    } // var code = e.keyCode,\n\n\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT, KEYS.ENTER, KEYS.SPACE].indexOf(e.keyCode),\n        navIndex = Number(getAttr(curElement, 'data-nav'));\n\n    if (keyIndex >= 0) {\n      if (keyIndex === 0) {\n        if (navIndex > 0) {\n          setFocus(navItems[navIndex - 1]);\n        }\n      } else if (keyIndex === 1) {\n        if (navIndex < pages - 1) {\n          setFocus(navItems[navIndex + 1]);\n        }\n      } else {\n        navClicked = navIndex;\n        goTo(navIndex, e);\n      }\n    }\n  }\n\n  function getEvent(e) {\n    e = e || win.event;\n    return isTouchEvent(e) ? e.changedTouches[0] : e;\n  }\n\n  function getTarget(e) {\n    return e.target || win.event.srcElement;\n  }\n\n  function isTouchEvent(e) {\n    return e.type.indexOf('touch') >= 0;\n  }\n\n  function preventDefaultBehavior(e) {\n    e.preventDefault ? e.preventDefault() : e.returnValue = false;\n  }\n\n  function getMoveDirectionExpected() {\n    return getTouchDirection(toDegree(lastPosition.y - initPosition.y, lastPosition.x - initPosition.x), swipeAngle) === options.axis;\n  }\n\n  function onPanStart(e) {\n    if (running) {\n      if (preventActionWhenRunning) {\n        return;\n      } else {\n        onTransitionEnd();\n      }\n    }\n\n    if (autoplay && animating) {\n      stopAutoplayTimer();\n    }\n\n    panStart = true;\n\n    if (rafIndex) {\n      caf(rafIndex);\n      rafIndex = null;\n    }\n\n    var $ = getEvent(e);\n    events.emit(isTouchEvent(e) ? 'touchStart' : 'dragStart', info(e));\n\n    if (!isTouchEvent(e) && ['img', 'a'].indexOf(getLowerCaseNodeName(getTarget(e))) >= 0) {\n      preventDefaultBehavior(e);\n    }\n\n    lastPosition.x = initPosition.x = $.clientX;\n    lastPosition.y = initPosition.y = $.clientY;\n\n    if (carousel) {\n      translateInit = parseFloat(container.style[transformAttr].replace(transformPrefix, ''));\n      resetDuration(container, '0s');\n    }\n  }\n\n  function onPanMove(e) {\n    if (panStart) {\n      var $ = getEvent(e);\n      lastPosition.x = $.clientX;\n      lastPosition.y = $.clientY;\n\n      if (carousel) {\n        if (!rafIndex) {\n          rafIndex = raf(function () {\n            panUpdate(e);\n          });\n        }\n      } else {\n        if (moveDirectionExpected === '?') {\n          moveDirectionExpected = getMoveDirectionExpected();\n        }\n\n        if (moveDirectionExpected) {\n          preventScroll = true;\n        }\n      }\n\n      if ((typeof e.cancelable !== 'boolean' || e.cancelable) && preventScroll) {\n        e.preventDefault();\n      }\n    }\n  }\n\n  function panUpdate(e) {\n    if (!moveDirectionExpected) {\n      panStart = false;\n      return;\n    }\n\n    caf(rafIndex);\n\n    if (panStart) {\n      rafIndex = raf(function () {\n        panUpdate(e);\n      });\n    }\n\n    if (moveDirectionExpected === '?') {\n      moveDirectionExpected = getMoveDirectionExpected();\n    }\n\n    if (moveDirectionExpected) {\n      if (!preventScroll && isTouchEvent(e)) {\n        preventScroll = true;\n      }\n\n      try {\n        if (e.type) {\n          events.emit(isTouchEvent(e) ? 'touchMove' : 'dragMove', info(e));\n        }\n      } catch (err) {}\n\n      var x = translateInit,\n          dist = getDist(lastPosition, initPosition);\n\n      if (!horizontal || fixedWidth || autoWidth) {\n        x += dist;\n        x += 'px';\n      } else {\n        var percentageX = TRANSFORM ? dist * items * 100 / ((viewport + gutter) * slideCountNew) : dist * 100 / (viewport + gutter);\n        x += percentageX;\n        x += '%';\n      }\n\n      container.style[transformAttr] = transformPrefix + x + transformPostfix;\n    }\n  }\n\n  function onPanEnd(e) {\n    if (panStart) {\n      if (rafIndex) {\n        caf(rafIndex);\n        rafIndex = null;\n      }\n\n      if (carousel) {\n        resetDuration(container, '');\n      }\n\n      panStart = false;\n      var $ = getEvent(e);\n      lastPosition.x = $.clientX;\n      lastPosition.y = $.clientY;\n      var dist = getDist(lastPosition, initPosition);\n\n      if (Math.abs(dist)) {\n        // drag vs click\n        if (!isTouchEvent(e)) {\n          // prevent \"click\"\n          var target = getTarget(e);\n          addEvents(target, {\n            'click': function preventClick(e) {\n              preventDefaultBehavior(e);\n              removeEvents(target, {\n                'click': preventClick\n              });\n            }\n          });\n        }\n\n        if (carousel) {\n          rafIndex = raf(function () {\n            if (horizontal && !autoWidth) {\n              var indexMoved = -dist * items / (viewport + gutter);\n              indexMoved = dist > 0 ? Math.floor(indexMoved) : Math.ceil(indexMoved);\n              index += indexMoved;\n            } else {\n              var moved = -(translateInit + dist);\n\n              if (moved <= 0) {\n                index = indexMin;\n              } else if (moved >= slidePositions[slideCountNew - 1]) {\n                index = indexMax;\n              } else {\n                var i = 0;\n\n                while (i < slideCountNew && moved >= slidePositions[i]) {\n                  index = i;\n\n                  if (moved > slidePositions[i] && dist < 0) {\n                    index += 1;\n                  }\n\n                  i++;\n                }\n              }\n            }\n\n            render(e, dist);\n            events.emit(isTouchEvent(e) ? 'touchEnd' : 'dragEnd', info(e));\n          });\n        } else {\n          if (moveDirectionExpected) {\n            onControlsClick(e, dist > 0 ? -1 : 1);\n          }\n        }\n      }\n    } // reset\n\n\n    if (options.preventScrollOnTouch === 'auto') {\n      preventScroll = false;\n    }\n\n    if (swipeAngle) {\n      moveDirectionExpected = '?';\n    }\n\n    if (autoplay && !animating) {\n      setAutoplayTimer();\n    }\n  } // === RESIZE FUNCTIONS === //\n  // (slidePositions, index, items) => vertical_conentWrapper.height\n\n\n  function updateContentWrapperHeight() {\n    var wp = middleWrapper ? middleWrapper : innerWrapper;\n    wp.style.height = slidePositions[index + items] - slidePositions[index] + 'px';\n  }\n\n  function getPages() {\n    var rough = fixedWidth ? (fixedWidth + gutter) * slideCount / viewport : slideCount / items;\n    return Math.min(Math.ceil(rough), slideCount);\n  }\n  /*\n   * 1. update visible nav items list\n   * 2. add \"hidden\" attributes to previous visible nav items\n   * 3. remove \"hidden\" attrubutes to new visible nav items\n   */\n\n\n  function updateNavVisibility() {\n    if (!nav || navAsThumbnails) {\n      return;\n    }\n\n    if (pages !== pagesCached) {\n      var min = pagesCached,\n          max = pages,\n          fn = showElement;\n\n      if (pagesCached > pages) {\n        min = pages;\n        max = pagesCached;\n        fn = hideElement;\n      }\n\n      while (min < max) {\n        fn(navItems[min]);\n        min++;\n      } // cache pages\n\n\n      pagesCached = pages;\n    }\n  }\n\n  function info(e) {\n    return {\n      container: container,\n      slideItems: slideItems,\n      navContainer: navContainer,\n      navItems: navItems,\n      controlsContainer: controlsContainer,\n      hasControls: hasControls,\n      prevButton: prevButton,\n      nextButton: nextButton,\n      items: items,\n      slideBy: slideBy,\n      cloneCount: cloneCount,\n      slideCount: slideCount,\n      slideCountNew: slideCountNew,\n      index: index,\n      indexCached: indexCached,\n      displayIndex: getCurrentSlide(),\n      navCurrentIndex: navCurrentIndex,\n      navCurrentIndexCached: navCurrentIndexCached,\n      pages: pages,\n      pagesCached: pagesCached,\n      sheet: sheet,\n      isOn: isOn,\n      event: e || {}\n    };\n  }\n\n  return {\n    version: '2.9.4',\n    getInfo: info,\n    events: events,\n    goTo: goTo,\n    play: play,\n    pause: pause,\n    isOn: isOn,\n    updateSliderHeight: updateInnerWrapperHeight,\n    refresh: initSliderTransform,\n    destroy: destroy,\n    rebuild: function () {\n      return tns(extend(options, optionsElements));\n    }\n  };\n};","map":{"version":3,"names":["Object","keys","object","name","prototype","hasOwnProperty","call","push","Element","remove","parentNode","removeChild","raf","caf","extend","checkStorageValue","setLocalStorage","getSlideId","calc","percentageLayout","mediaquerySupport","createStyleSheet","addCSSRule","removeCSSRule","getCssRulesLength","toDegree","getTouchDirection","forEach","hasClass","addClass","removeClass","hasAttr","getAttr","setAttrs","removeAttrs","arrayFromNodeList","hideElement","showElement","isVisible","whichProperty","has3DTransforms","getEndProperty","addEvents","removeEvents","Events","jsTransform","tns","options","container","mode","axis","items","gutter","edgePadding","fixedWidth","autoWidth","viewportMax","slideBy","center","controls","controlsPosition","controlsText","controlsContainer","prevButton","nextButton","nav","navPosition","navContainer","navAsThumbnails","arrowKeys","speed","autoplay","autoplayPosition","autoplayTimeout","autoplayDirection","autoplayText","autoplayHoverPause","autoplayButton","autoplayButtonOutput","autoplayResetOnVisibility","animateIn","animateOut","animateNormal","animateDelay","loop","rewind","autoHeight","responsive","lazyload","lazyloadSelector","touch","mouseDrag","swipeAngle","nested","preventActionWhenRunning","preventScrollOnTouch","freezable","onInit","useLocalStorage","nonce","doc","document","win","window","KEYS","ENTER","SPACE","LEFT","RIGHT","tnsStorage","localStorageAccess","browserInfo","navigator","userAgent","uid","Date","localStorage","setItem","getItem","removeItem","e","item","CALC","PERCENTAGELAYOUT","CSSMQ","TRANSFORM","HAS3DTRANSFORMS","TRANSITIONDURATION","TRANSITIONDELAY","ANIMATIONDURATION","ANIMATIONDELAY","TRANSITIONEND","ANIMATIONEND","supportConsoleWarn","console","warn","tnsList","optionsElements","str","el","querySelector","nodeName","children","length","carousel","responsiveTem","key","val","updateOptions","obj","horizontal","outerWrapper","createElement","innerWrapper","middleWrapper","containerParent","containerHTML","outerHTML","slideItems","slideCount","breakpointZone","windowWidth","getWindowWidth","isOn","setBreakpointZone","className","getOption","viewport","getViewportWidth","Math","floor","fixedWidthViewportWidth","sheet","slidePositions","slideItemsOut","cloneCount","getCloneCountForLoop","slideCountNew","hasRightDeadZone","rightBoundary","getRightBoundary","updateIndexBeforeTransform","transformAttr","transformPrefix","transformPostfix","getIndexMax","ceil","i","max","index","getStartIndex","indexCached","displayIndex","getCurrentSlide","indexMin","indexMax","resizeTimer","moveDirectionExpected","running","events","newContainerClasses","slideId","id","disable","disabled","freeze","getFreeze","frozen","controlsEvents","onControlsClick","onControlsKeydown","navEvents","onNavClick","onNavKeydown","hoverEvents","mouseoverPause","mouseoutRestart","visibilityEvent","onVisibilityChange","docmentKeydownEvent","onDocumentKeydown","touchEvents","onPanStart","onPanMove","onPanEnd","dragEvents","hasControls","hasOption","hasNav","hasAutoplay","hasTouch","hasMouseDrag","slideActiveClass","slideClonedClass","imgCompleteClass","imgEvents","onImgLoaded","onImgFailed","imgsComplete","liveregionCurrent","preventScroll","controlsContainerHTML","prevButtonHTML","nextButtonHTML","prevIsButton","nextIsButton","navContainerHTML","navItems","pages","getPages","pagesCached","navClicked","navCurrentIndex","getCurrentNavIndex","navCurrentIndexCached","navActiveClass","navStr","navStrCurrent","autoplayButtonHTML","autoplayHtmlStrings","autoplayTimer","animating","autoplayHoverPaused","autoplayUserPaused","autoplayVisibilityPaused","initPosition","lastPosition","translateInit","disX","disY","panStart","rafIndex","getDist","a","b","x","y","resetVariblesWhenDisable","replace","initStructure","initSheet","initSliderTransform","condition","tem","ind","min","getAbsIndex","absIndex","result","getItemsMax","arr","bp","apply","itemsMax","innerWidth","documentElement","clientWidth","body","getInsertPosition","pos","getClientWidth","div","rect","width","appendChild","getBoundingClientRect","right","left","gap","ww","parseInt","getSlideMarginLeft","getInnerWrapperStyles","edgePaddingTem","gutterTem","fixedWidthTem","speedTem","autoHeightBP","undefined","gutterTemUnit","dir","getTransitionDurationStyle","getContainerWidth","itemsTem","getSlideWidthStyle","dividend","getSlideGutterStyle","prop","getCSSPrefix","num","prefix","substring","toLowerCase","getAnimationDurationStyle","classOuter","classInner","hasGutter","wp","insertBefore","fragmentBefore","createDocumentFragment","fragmentAfter","j","cloneFirst","cloneNode","firstChild","cloneLast","imgs","querySelectorAll","img","src","indexOf","imgLoaded","imgsLoadedCheck","getImageArray","initSliderTransformStyleCheck","doContainerTransformSilent","initTools","initEvents","stylesApplicationCheck","abs","initSliderTransformCore","setTimeout","setSlidePositions","updateContentWrapperHeight","l","style","getComputedStyle","fontSize","slide","marginLeft","update_carousel_transition_duration","cssText","opts","middleWrapperStr","innerWrapperStr","containerStr","slideStr","itemsBP","fixedWidthBP","speedBP","edgePaddingBP","gutterBP","insertRule","cssRules","updateSlideStatus","insertAdjacentHTML","getLiveRegionStr","txt","toggleAutoplay","startAutoplay","initIndex","navHtml","hiddenStr","updateNavVisibility","isButton","updateControlsStatus","disableUI","eve","onTransitionEnd","on","resizeTasks","emit","info","onResize","doAutoHeight","doLazyLoad","disableSlider","freezeSlider","additionalUpdates","destroy","ownerNode","clearInterval","htmlList","prevEl","previousElementSibling","parentEl","nextElementSibling","firstElementChild","getEvent","bpChanged","breakpointZoneTem","needContainerTransform","indChanged","itemsChanged","disableTem","freezeTem","arrowKeysTem","controlsTem","navTem","touchTem","mouseDragTem","autoplayTem","autoplayHoverPauseTem","autoplayResetOnVisibilityTem","indexTem","autoHeightTem","controlsTextTem","centerTem","autoplayTextTem","updateIndex","enableSlider","doContainerTransform","getContainerTransformValue","unfreezeSlider","stopAutoplay","height","innerHTML","html","len","updateLiveRegion","updateGallerySlidePositions","vp","leftEdge","rightEdge","enableUI","margin","classN","getVisibleSlideRange","start","end","rangestart","rangeend","parseFloat","point","cell","arg","stopPropagation","srcset","getTarget","imgFailed","imgCompleted","imgSelector","updateInnerWrapperHeight","cb","complete","splice","updateNavStatus","getMaxSlideHeight","slideStart","slideRange","heights","offsetHeight","maxHeight","attr","attr2","base","range","navPrev","navCurrent","getLowerCaseNodeName","isAriaDisabled","getAttribute","disEnableElement","setAttribute","toString","prevDisabled","nextDisabled","disablePrev","disableNext","resetDuration","getSliderWidth","getCenterGap","denominator","animateSlide","number","classOut","classIn","isOut","transformCore","render","sliderMoved","type","strTrans","event","target","propertyName","goTo","targetIndex","indexGap","isNaN","factor","passEventObject","targetIn","navIndex","Number","targetIndexBase","setAutoplayTimer","setInterval","stopAutoplayTimer","updateAutoplayButton","action","play","pause","hidden","keyIndex","keyCode","setFocus","focus","curElement","activeElement","isTouchEvent","changedTouches","srcElement","preventDefaultBehavior","preventDefault","returnValue","getMoveDirectionExpected","$","clientX","clientY","panUpdate","cancelable","err","dist","percentageX","preventClick","indexMoved","moved","rough","fn","version","getInfo","updateSliderHeight","refresh","rebuild"],"sources":["C:/Users/macie/OneDrive/Pulpit/Kurs JS/JS/POZ_FER_W_23_EndingProject/my-app/node_modules/tiny-slider/src/tiny-slider.js"],"sourcesContent":["// Object.keys\nif (!Object.keys) {\n  Object.keys = function(object) {\n    var keys = [];\n    for (var name in object) {\n      if (Object.prototype.hasOwnProperty.call(object, name)) {\n        keys.push(name);\n      }\n    }\n    return keys;\n  };\n}\n\n// ChildNode.remove\nif(!(\"remove\" in Element.prototype)){\n  Element.prototype.remove = function(){\n    if(this.parentNode) {\n      this.parentNode.removeChild(this);\n    }\n  };\n}\n\nimport { raf } from './helpers/raf.js';\nimport { caf } from './helpers/caf.js';\nimport { extend } from './helpers/extend.js';\nimport { checkStorageValue } from './helpers/checkStorageValue.js';\nimport { setLocalStorage } from './helpers/setLocalStorage.js';\nimport { getSlideId } from './helpers/getSlideId.js';\nimport { calc } from './helpers/calc.js';\nimport { percentageLayout } from './helpers/percentageLayout.js';\nimport { mediaquerySupport } from './helpers/mediaquerySupport.js';\nimport { createStyleSheet } from './helpers/createStyleSheet.js';\nimport { addCSSRule } from './helpers/addCSSRule.js';\nimport { removeCSSRule } from './helpers/removeCSSRule.js';\nimport { getCssRulesLength } from './helpers/getCssRulesLength.js';\nimport { toDegree } from './helpers/toDegree.js';\nimport { getTouchDirection } from './helpers/getTouchDirection.js';\nimport { forEach } from './helpers/forEach.js';\nimport { hasClass } from './helpers/hasClass.js';\nimport { addClass } from './helpers/addClass.js';\nimport { removeClass } from './helpers/removeClass.js';\nimport { hasAttr } from './helpers/hasAttr.js';\nimport { getAttr } from './helpers/getAttr.js';\nimport { setAttrs } from './helpers/setAttrs.js';\nimport { removeAttrs } from './helpers/removeAttrs.js';\nimport { arrayFromNodeList } from './helpers/arrayFromNodeList.js';\nimport { hideElement } from './helpers/hideElement.js';\nimport { showElement } from './helpers/showElement.js';\nimport { isVisible } from './helpers/isVisible.js';\nimport { whichProperty } from './helpers/whichProperty.js';\nimport { has3DTransforms } from './helpers/has3DTransforms.js';\nimport { getEndProperty } from './helpers/getEndProperty.js';\nimport { addEvents } from './helpers/addEvents.js';\nimport { removeEvents } from './helpers/removeEvents.js';\nimport { Events } from './helpers/events.js';\nimport { jsTransform } from './helpers/jsTransform.js';\n\nexport var tns = function(options) {\n  options = extend({\n    container: '.slider',\n    mode: 'carousel',\n    axis: 'horizontal',\n    items: 1,\n    gutter: 0,\n    edgePadding: 0,\n    fixedWidth: false,\n    autoWidth: false,\n    viewportMax: false,\n    slideBy: 1,\n    center: false,\n    controls: true,\n    controlsPosition: 'top',\n    controlsText: ['prev', 'next'],\n    controlsContainer: false,\n    prevButton: false,\n    nextButton: false,\n    nav: true,\n    navPosition: 'top',\n    navContainer: false,\n    navAsThumbnails: false,\n    arrowKeys: false,\n    speed: 300,\n    autoplay: false,\n    autoplayPosition: 'top',\n    autoplayTimeout: 5000,\n    autoplayDirection: 'forward',\n    autoplayText: ['start', 'stop'],\n    autoplayHoverPause: false,\n    autoplayButton: false,\n    autoplayButtonOutput: true,\n    autoplayResetOnVisibility: true,\n    animateIn: 'tns-fadeIn',\n    animateOut: 'tns-fadeOut',\n    animateNormal: 'tns-normal',\n    animateDelay: false,\n    loop: true,\n    rewind: false,\n    autoHeight: false,\n    responsive: false,\n    lazyload: false,\n    lazyloadSelector: '.tns-lazy-img',\n    touch: true,\n    mouseDrag: false,\n    swipeAngle: 15,\n    nested: false,\n    preventActionWhenRunning: false,\n    preventScrollOnTouch: false,\n    freezable: true,\n    onInit: false,\n    useLocalStorage: true,\n    nonce: false\n  }, options || {});\n\n  var doc = document,\n      win = window,\n      KEYS = {\n        ENTER: 13,\n        SPACE: 32,\n        LEFT: 37,\n        RIGHT: 39\n      },\n      tnsStorage = {},\n      localStorageAccess = options.useLocalStorage;\n\n  if (localStorageAccess) {\n    // check browser version and local storage access\n    var browserInfo = navigator.userAgent;\n    var uid = new Date;\n\n    try {\n      tnsStorage = win.localStorage;\n      if (tnsStorage) {\n        tnsStorage.setItem(uid, uid);\n        localStorageAccess = tnsStorage.getItem(uid) == uid;\n        tnsStorage.removeItem(uid);\n      } else {\n        localStorageAccess = false;\n      }\n      if (!localStorageAccess) { tnsStorage = {}; }\n    } catch(e) {\n      localStorageAccess = false;\n    }\n\n    if (localStorageAccess) {\n      // remove storage when browser version changes\n      if (tnsStorage['tnsApp'] && tnsStorage['tnsApp'] !== browserInfo) {\n        ['tC', 'tPL', 'tMQ', 'tTf', 't3D', 'tTDu', 'tTDe', 'tADu', 'tADe', 'tTE', 'tAE'].forEach(function(item) { tnsStorage.removeItem(item); });\n      }\n      // update browserInfo\n      localStorage['tnsApp'] = browserInfo;\n    }\n  }\n\n  var CALC = tnsStorage['tC'] ? checkStorageValue(tnsStorage['tC']) : setLocalStorage(tnsStorage, 'tC', calc(), localStorageAccess),\n      PERCENTAGELAYOUT = tnsStorage['tPL'] ? checkStorageValue(tnsStorage['tPL']) : setLocalStorage(tnsStorage, 'tPL', percentageLayout(), localStorageAccess),\n      CSSMQ = tnsStorage['tMQ'] ? checkStorageValue(tnsStorage['tMQ']) : setLocalStorage(tnsStorage, 'tMQ', mediaquerySupport(), localStorageAccess),\n      TRANSFORM = tnsStorage['tTf'] ? checkStorageValue(tnsStorage['tTf']) : setLocalStorage(tnsStorage, 'tTf', whichProperty('transform'), localStorageAccess),\n      HAS3DTRANSFORMS = tnsStorage['t3D'] ? checkStorageValue(tnsStorage['t3D']) : setLocalStorage(tnsStorage, 't3D', has3DTransforms(TRANSFORM), localStorageAccess),\n      TRANSITIONDURATION = tnsStorage['tTDu'] ? checkStorageValue(tnsStorage['tTDu']) : setLocalStorage(tnsStorage, 'tTDu', whichProperty('transitionDuration'), localStorageAccess),\n      TRANSITIONDELAY = tnsStorage['tTDe'] ? checkStorageValue(tnsStorage['tTDe']) : setLocalStorage(tnsStorage, 'tTDe', whichProperty('transitionDelay'), localStorageAccess),\n      ANIMATIONDURATION = tnsStorage['tADu'] ? checkStorageValue(tnsStorage['tADu']) : setLocalStorage(tnsStorage, 'tADu', whichProperty('animationDuration'), localStorageAccess),\n      ANIMATIONDELAY = tnsStorage['tADe'] ? checkStorageValue(tnsStorage['tADe']) : setLocalStorage(tnsStorage, 'tADe', whichProperty('animationDelay'), localStorageAccess),\n      TRANSITIONEND = tnsStorage['tTE'] ? checkStorageValue(tnsStorage['tTE']) : setLocalStorage(tnsStorage, 'tTE', getEndProperty(TRANSITIONDURATION, 'Transition'), localStorageAccess),\n      ANIMATIONEND = tnsStorage['tAE'] ? checkStorageValue(tnsStorage['tAE']) : setLocalStorage(tnsStorage, 'tAE', getEndProperty(ANIMATIONDURATION, 'Animation'), localStorageAccess);\n\n  // get element nodes from selectors\n  var supportConsoleWarn = win.console && typeof win.console.warn === \"function\",\n      tnsList = ['container', 'controlsContainer', 'prevButton', 'nextButton', 'navContainer', 'autoplayButton'],\n      optionsElements = {};\n\n  tnsList.forEach(function(item) {\n    if (typeof options[item] === 'string') {\n      var str = options[item],\n          el = doc.querySelector(str);\n      optionsElements[item] = str;\n\n      if (el && el.nodeName) {\n        options[item] = el;\n      } else {\n        if (supportConsoleWarn) { console.warn('Can\\'t find', options[item]); }\n        return;\n      }\n    }\n  });\n\n  // make sure at least 1 slide\n  if (options.container.children.length < 1) {\n    if (supportConsoleWarn) { console.warn('No slides found in', options.container); }\n    return;\n   }\n\n  // update options\n  var responsive = options.responsive,\n      nested = options.nested,\n      carousel = options.mode === 'carousel' ? true : false;\n\n  if (responsive) {\n    // apply responsive[0] to options and remove it\n    if (0 in responsive) {\n      options = extend(options, responsive[0]);\n      delete responsive[0];\n    }\n\n    var responsiveTem = {};\n    for (var key in responsive) {\n      var val = responsive[key];\n      // update responsive\n      // from: 300: 2\n      // to:\n      //   300: {\n      //     items: 2\n      //   }\n      val = typeof val === 'number' ? {items: val} : val;\n      responsiveTem[key] = val;\n    }\n    responsive = responsiveTem;\n    responsiveTem = null;\n  }\n\n  // update options\n  function updateOptions (obj) {\n    for (var key in obj) {\n      if (!carousel) {\n        if (key === 'slideBy') { obj[key] = 'page'; }\n        if (key === 'edgePadding') { obj[key] = false; }\n        if (key === 'autoHeight') { obj[key] = false; }\n      }\n\n      // update responsive options\n      if (key === 'responsive') { updateOptions(obj[key]); }\n    }\n  }\n  if (!carousel) { updateOptions(options); }\n\n\n  // === define and set variables ===\n  if (!carousel) {\n    options.axis = 'horizontal';\n    options.slideBy = 'page';\n    options.edgePadding = false;\n\n    var animateIn = options.animateIn,\n        animateOut = options.animateOut,\n        animateDelay = options.animateDelay,\n        animateNormal = options.animateNormal;\n  }\n\n  var horizontal = options.axis === 'horizontal' ? true : false,\n      outerWrapper = doc.createElement('div'),\n      innerWrapper = doc.createElement('div'),\n      middleWrapper,\n      container = options.container,\n      containerParent = container.parentNode,\n      containerHTML = container.outerHTML,\n      slideItems = container.children,\n      slideCount = slideItems.length,\n      breakpointZone,\n      windowWidth = getWindowWidth(),\n      isOn = false;\n  if (responsive) { setBreakpointZone(); }\n  if (carousel) { container.className += ' tns-vpfix'; }\n\n  // fixedWidth: viewport > rightBoundary > indexMax\n  var autoWidth = options.autoWidth,\n      fixedWidth = getOption('fixedWidth'),\n      edgePadding = getOption('edgePadding'),\n      gutter = getOption('gutter'),\n      viewport = getViewportWidth(),\n      center = getOption('center'),\n      items = !autoWidth ? Math.floor(getOption('items')) : 1,\n      slideBy = getOption('slideBy'),\n      viewportMax = options.viewportMax || options.fixedWidthViewportWidth,\n      arrowKeys = getOption('arrowKeys'),\n      speed = getOption('speed'),\n      rewind = options.rewind,\n      loop = rewind ? false : options.loop,\n      autoHeight = getOption('autoHeight'),\n      controls = getOption('controls'),\n      controlsText = getOption('controlsText'),\n      nav = getOption('nav'),\n      touch = getOption('touch'),\n      mouseDrag = getOption('mouseDrag'),\n      autoplay = getOption('autoplay'),\n      autoplayTimeout = getOption('autoplayTimeout'),\n      autoplayText = getOption('autoplayText'),\n      autoplayHoverPause = getOption('autoplayHoverPause'),\n      autoplayResetOnVisibility = getOption('autoplayResetOnVisibility'),\n      sheet = createStyleSheet(null, getOption('nonce')),\n      lazyload = options.lazyload,\n      lazyloadSelector = options.lazyloadSelector,\n      slidePositions, // collection of slide positions\n      slideItemsOut = [],\n      cloneCount = loop ? getCloneCountForLoop() : 0,\n      slideCountNew = !carousel ? slideCount + cloneCount : slideCount + cloneCount * 2,\n      hasRightDeadZone = (fixedWidth || autoWidth) && !loop ? true : false,\n      rightBoundary = fixedWidth ? getRightBoundary() : null,\n      updateIndexBeforeTransform = (!carousel || !loop) ? true : false,\n      // transform\n      transformAttr = horizontal ? 'left' : 'top',\n      transformPrefix = '',\n      transformPostfix = '',\n      // index\n      getIndexMax = (function () {\n        if (fixedWidth) {\n          return function() { return center && !loop ? slideCount - 1 : Math.ceil(- rightBoundary / (fixedWidth + gutter)); };\n        } else if (autoWidth) {\n          return function() {\n            for (var i = 0; i < slideCountNew; i++) {\n              if (slidePositions[i] >= - rightBoundary) { return i; }\n            }\n          };\n        } else {\n          return function() {\n            if (center && carousel && !loop) {\n              return slideCount - 1;\n            } else {\n              return loop || carousel ? Math.max(0, slideCountNew - Math.ceil(items)) : slideCountNew - 1;\n            }\n          };\n        }\n      })(),\n      index = getStartIndex(getOption('startIndex')),\n      indexCached = index,\n      displayIndex = getCurrentSlide(),\n      indexMin = 0,\n      indexMax = !autoWidth ? getIndexMax() : null,\n      // resize\n      resizeTimer,\n      preventActionWhenRunning = options.preventActionWhenRunning,\n      swipeAngle = options.swipeAngle,\n      moveDirectionExpected = swipeAngle ? '?' : true,\n      running = false,\n      onInit = options.onInit,\n      events = new Events(),\n      // id, class\n      newContainerClasses = ' tns-slider tns-' + options.mode,\n      slideId = container.id || getSlideId(),\n      disable = getOption('disable'),\n      disabled = false,\n      freezable = options.freezable,\n      freeze = freezable && !autoWidth ? getFreeze() : false,\n      frozen = false,\n      controlsEvents = {\n        'click': onControlsClick,\n        'keydown': onControlsKeydown\n      },\n      navEvents = {\n        'click': onNavClick,\n        'keydown': onNavKeydown\n      },\n      hoverEvents = {\n        'mouseover': mouseoverPause,\n        'mouseout': mouseoutRestart\n      },\n      visibilityEvent = {'visibilitychange': onVisibilityChange},\n      docmentKeydownEvent = {'keydown': onDocumentKeydown},\n      touchEvents = {\n        'touchstart': onPanStart,\n        'touchmove': onPanMove,\n        'touchend': onPanEnd,\n        'touchcancel': onPanEnd\n      }, dragEvents = {\n        'mousedown': onPanStart,\n        'mousemove': onPanMove,\n        'mouseup': onPanEnd,\n        'mouseleave': onPanEnd\n      },\n      hasControls = hasOption('controls'),\n      hasNav = hasOption('nav'),\n      navAsThumbnails = autoWidth ? true : options.navAsThumbnails,\n      hasAutoplay = hasOption('autoplay'),\n      hasTouch = hasOption('touch'),\n      hasMouseDrag = hasOption('mouseDrag'),\n      slideActiveClass = 'tns-slide-active',\n      slideClonedClass = 'tns-slide-cloned',\n      imgCompleteClass = 'tns-complete',\n      imgEvents = {\n        'load': onImgLoaded,\n        'error': onImgFailed\n      },\n      imgsComplete,\n      liveregionCurrent,\n      preventScroll = options.preventScrollOnTouch === 'force' ? true : false;\n\n  // controls\n  if (hasControls) {\n    var controlsContainer = options.controlsContainer,\n        controlsContainerHTML = options.controlsContainer ? options.controlsContainer.outerHTML : '',\n        prevButton = options.prevButton,\n        nextButton = options.nextButton,\n        prevButtonHTML = options.prevButton ? options.prevButton.outerHTML : '',\n        nextButtonHTML = options.nextButton ? options.nextButton.outerHTML : '',\n        prevIsButton,\n        nextIsButton;\n  }\n\n  // nav\n  if (hasNav) {\n    var navContainer = options.navContainer,\n        navContainerHTML = options.navContainer ? options.navContainer.outerHTML : '',\n        navItems,\n        pages = autoWidth ? slideCount : getPages(),\n        pagesCached = 0,\n        navClicked = -1,\n        navCurrentIndex = getCurrentNavIndex(),\n        navCurrentIndexCached = navCurrentIndex,\n        navActiveClass = 'tns-nav-active',\n        navStr = 'Carousel Page ',\n        navStrCurrent = ' (Current Slide)';\n  }\n\n  // autoplay\n  if (hasAutoplay) {\n    var autoplayDirection = options.autoplayDirection === 'forward' ? 1 : -1,\n        autoplayButton = options.autoplayButton,\n        autoplayButtonHTML = options.autoplayButton ? options.autoplayButton.outerHTML : '',\n        autoplayHtmlStrings = ['<span class=\\'tns-visually-hidden\\'>', ' animation</span>'],\n        autoplayTimer,\n        animating,\n        autoplayHoverPaused,\n        autoplayUserPaused,\n        autoplayVisibilityPaused;\n  }\n\n  if (hasTouch || hasMouseDrag) {\n    var initPosition = {},\n        lastPosition = {},\n        translateInit,\n        disX,\n        disY,\n        panStart = false,\n        rafIndex,\n        getDist = horizontal ?\n          function(a, b) { return a.x - b.x; } :\n          function(a, b) { return a.y - b.y; };\n  }\n\n  // disable slider when slidecount <= items\n  if (!autoWidth) { resetVariblesWhenDisable(disable || freeze); }\n\n  if (TRANSFORM) {\n    transformAttr = TRANSFORM;\n    transformPrefix = 'translate';\n\n    if (HAS3DTRANSFORMS) {\n      transformPrefix += horizontal ? '3d(' : '3d(0px, ';\n      transformPostfix = horizontal ? ', 0px, 0px)' : ', 0px)';\n    } else {\n      transformPrefix += horizontal ? 'X(' : 'Y(';\n      transformPostfix = ')';\n    }\n\n  }\n\n  if (carousel) { container.className = container.className.replace('tns-vpfix', ''); }\n  initStructure();\n  initSheet();\n  initSliderTransform();\n\n  // === COMMON FUNCTIONS === //\n  function resetVariblesWhenDisable (condition) {\n    if (condition) {\n      controls = nav = touch = mouseDrag = arrowKeys = autoplay = autoplayHoverPause = autoplayResetOnVisibility = false;\n    }\n  }\n\n  function getCurrentSlide () {\n    var tem = carousel ? index - cloneCount : index;\n    while (tem < 0) { tem += slideCount; }\n    return tem%slideCount + 1;\n  }\n\n  function getStartIndex (ind) {\n    ind = ind ? Math.max(0, Math.min(loop ? slideCount - 1 : slideCount - items, ind)) : 0;\n    return carousel ? ind + cloneCount : ind;\n  }\n\n  function getAbsIndex (i) {\n    if (i == null) { i = index; }\n\n    if (carousel) { i -= cloneCount; }\n    while (i < 0) { i += slideCount; }\n\n    return Math.floor(i%slideCount);\n  }\n\n  function getCurrentNavIndex () {\n    var absIndex = getAbsIndex(),\n        result;\n\n    result = navAsThumbnails ? absIndex :\n      fixedWidth || autoWidth ? Math.ceil((absIndex + 1) * pages / slideCount - 1) :\n          Math.floor(absIndex / items);\n\n    // set active nav to the last one when reaches the right edge\n    if (!loop && carousel && index === indexMax) { result = pages - 1; }\n\n    return result;\n  }\n\n  function getItemsMax () {\n    // fixedWidth or autoWidth while viewportMax is not available\n    if (autoWidth || (fixedWidth && !viewportMax)) {\n      return slideCount - 1;\n    // most cases\n    } else {\n      var str = fixedWidth ? 'fixedWidth' : 'items',\n          arr = [];\n\n      if (fixedWidth || options[str] < slideCount) { arr.push(options[str]); }\n\n      if (responsive) {\n        for (var bp in responsive) {\n          var tem = responsive[bp][str];\n          if (tem && (fixedWidth || tem < slideCount)) { arr.push(tem); }\n        }\n      }\n\n      if (!arr.length) { arr.push(0); }\n\n      return Math.ceil(fixedWidth ? viewportMax / Math.min.apply(null, arr) : Math.max.apply(null, arr));\n    }\n  }\n\n  function getCloneCountForLoop () {\n    var itemsMax = getItemsMax(),\n        result = carousel ? Math.ceil((itemsMax * 5 - slideCount)/2) : (itemsMax * 4 - slideCount);\n    result = Math.max(itemsMax, result);\n\n    return hasOption('edgePadding') ? result + 1 : result;\n  }\n\n  function getWindowWidth () {\n    return win.innerWidth || doc.documentElement.clientWidth || doc.body.clientWidth;\n  }\n\n  function getInsertPosition (pos) {\n    return pos === 'top' ? 'afterbegin' : 'beforeend';\n  }\n\n  function getClientWidth (el) {\n    if (el == null) { return; }\n    var div = doc.createElement('div'), rect, width;\n    el.appendChild(div);\n    rect = div.getBoundingClientRect();\n    width = rect.right - rect.left;\n    div.remove();\n    return width || getClientWidth(el.parentNode);\n  }\n\n  function getViewportWidth () {\n    var gap = edgePadding ? edgePadding * 2 - gutter : 0;\n    return getClientWidth(containerParent) - gap;\n  }\n\n  function hasOption (item) {\n    if (options[item]) {\n      return true;\n    } else {\n      if (responsive) {\n        for (var bp in responsive) {\n          if (responsive[bp][item]) { return true; }\n        }\n      }\n      return false;\n    }\n  }\n\n  // get option:\n  // fixed width: viewport, fixedWidth, gutter => items\n  // others: window width => all variables\n  // all: items => slideBy\n  function getOption (item, ww) {\n    if (ww == null) { ww = windowWidth; }\n\n    if (item === 'items' && fixedWidth) {\n      return Math.floor((viewport + gutter) / (fixedWidth + gutter)) || 1;\n\n    } else {\n      var result = options[item];\n\n      if (responsive) {\n        for (var bp in responsive) {\n          // bp: convert string to number\n          if (ww >= parseInt(bp)) {\n            if (item in responsive[bp]) { result = responsive[bp][item]; }\n          }\n        }\n      }\n\n      if (item === 'slideBy' && result === 'page') { result = getOption('items'); }\n      if (!carousel && (item === 'slideBy' || item === 'items')) { result = Math.floor(result); }\n\n      return result;\n    }\n  }\n\n  function getSlideMarginLeft (i) {\n    return CALC ?\n      CALC + '(' + i * 100 + '% / ' + slideCountNew + ')' :\n      i * 100 / slideCountNew + '%';\n  }\n\n  function getInnerWrapperStyles (edgePaddingTem, gutterTem, fixedWidthTem, speedTem, autoHeightBP) {\n    var str = '';\n\n    if (edgePaddingTem !== undefined) {\n      var gap = edgePaddingTem;\n      if (gutterTem) { gap -= gutterTem; }\n      str = horizontal ?\n        'margin: 0 ' + gap + 'px 0 ' + edgePaddingTem + 'px;' :\n        'margin: ' + edgePaddingTem + 'px 0 ' + gap + 'px 0;';\n    } else if (gutterTem && !fixedWidthTem) {\n      var gutterTemUnit = '-' + gutterTem + 'px',\n          dir = horizontal ? gutterTemUnit + ' 0 0' : '0 ' + gutterTemUnit + ' 0';\n      str = 'margin: 0 ' + dir + ';'\n    }\n\n    if (!carousel && autoHeightBP && TRANSITIONDURATION && speedTem) { str += getTransitionDurationStyle(speedTem); }\n    return str;\n  }\n\n  function getContainerWidth (fixedWidthTem, gutterTem, itemsTem) {\n    if (fixedWidthTem) {\n      return (fixedWidthTem + gutterTem) * slideCountNew + 'px';\n    } else {\n      return CALC ?\n        CALC + '(' + slideCountNew * 100 + '% / ' + itemsTem + ')' :\n        slideCountNew * 100 / itemsTem + '%';\n    }\n  }\n\n  function getSlideWidthStyle (fixedWidthTem, gutterTem, itemsTem) {\n    var width;\n\n    if (fixedWidthTem) {\n      width = (fixedWidthTem + gutterTem) + 'px';\n    } else {\n      if (!carousel) { itemsTem = Math.floor(itemsTem); }\n      var dividend = carousel ? slideCountNew : itemsTem;\n      width = CALC ?\n        CALC + '(100% / ' + dividend + ')' :\n        100 / dividend + '%';\n    }\n\n    width = 'width:' + width;\n\n    // inner slider: overwrite outer slider styles\n    return nested !== 'inner' ? width + ';' : width + ' !important;';\n  }\n\n  function getSlideGutterStyle (gutterTem) {\n    var str = '';\n\n    // gutter maybe interger || 0\n    // so can't use 'if (gutter)'\n    if (gutterTem !== false) {\n      var prop = horizontal ? 'padding-' : 'margin-',\n          dir = horizontal ? 'right' : 'bottom';\n      str = prop +  dir + ': ' + gutterTem + 'px;';\n    }\n\n    return str;\n  }\n\n  function getCSSPrefix (name, num) {\n    var prefix = name.substring(0, name.length - num).toLowerCase();\n    if (prefix) { prefix = '-' + prefix + '-'; }\n\n    return prefix;\n  }\n\n  function getTransitionDurationStyle (speed) {\n    return getCSSPrefix(TRANSITIONDURATION, 18) + 'transition-duration:' + speed / 1000 + 's;';\n  }\n\n  function getAnimationDurationStyle (speed) {\n    return getCSSPrefix(ANIMATIONDURATION, 17) + 'animation-duration:' + speed / 1000 + 's;';\n  }\n\n  function initStructure () {\n    var classOuter = 'tns-outer',\n        classInner = 'tns-inner',\n        hasGutter = hasOption('gutter');\n\n    outerWrapper.className = classOuter;\n    innerWrapper.className = classInner;\n    outerWrapper.id = slideId + '-ow';\n    innerWrapper.id = slideId + '-iw';\n\n    // set container properties\n    if (container.id === '') { container.id = slideId; }\n    newContainerClasses += PERCENTAGELAYOUT || autoWidth ? ' tns-subpixel' : ' tns-no-subpixel';\n    newContainerClasses += CALC ? ' tns-calc' : ' tns-no-calc';\n    if (autoWidth) { newContainerClasses += ' tns-autowidth'; }\n    newContainerClasses += ' tns-' + options.axis;\n    container.className += newContainerClasses;\n\n    // add constrain layer for carousel\n    if (carousel) {\n      middleWrapper = doc.createElement('div');\n      middleWrapper.id = slideId + '-mw';\n      middleWrapper.className = 'tns-ovh';\n\n      outerWrapper.appendChild(middleWrapper);\n      middleWrapper.appendChild(innerWrapper);\n    } else {\n      outerWrapper.appendChild(innerWrapper);\n    }\n\n    if (autoHeight) {\n      var wp = middleWrapper ? middleWrapper : innerWrapper;\n      wp.className += ' tns-ah';\n    }\n\n    containerParent.insertBefore(outerWrapper, container);\n    innerWrapper.appendChild(container);\n\n    // add id, class, aria attributes\n    // before clone slides\n    forEach(slideItems, function(item, i) {\n      addClass(item, 'tns-item');\n      if (!item.id) { item.id = slideId + '-item' + i; }\n      if (!carousel && animateNormal) { addClass(item, animateNormal); }\n      setAttrs(item, {\n        'aria-hidden': 'true',\n        'tabindex': '-1'\n      });\n    });\n\n    // ## clone slides\n    // carousel: n + slides + n\n    // gallery:      slides + n\n    if (cloneCount) {\n      var fragmentBefore = doc.createDocumentFragment(),\n          fragmentAfter = doc.createDocumentFragment();\n\n      for (var j = cloneCount; j--;) {\n        var num = j%slideCount,\n            cloneFirst = slideItems[num].cloneNode(true);\n        addClass(cloneFirst, slideClonedClass);\n        removeAttrs(cloneFirst, 'id');\n        fragmentAfter.insertBefore(cloneFirst, fragmentAfter.firstChild);\n\n        if (carousel) {\n          var cloneLast = slideItems[slideCount - 1 - num].cloneNode(true);\n          addClass(cloneLast, slideClonedClass);\n          removeAttrs(cloneLast, 'id');\n          fragmentBefore.appendChild(cloneLast);\n        }\n      }\n\n      container.insertBefore(fragmentBefore, container.firstChild);\n      container.appendChild(fragmentAfter);\n      slideItems = container.children;\n    }\n\n  }\n\n  function initSliderTransform () {\n    // ## images loaded/failed\n    if (hasOption('autoHeight') || autoWidth || !horizontal) {\n      var imgs = container.querySelectorAll('img');\n\n      // add img load event listener\n      forEach(imgs, function(img) {\n        var src = img.src;\n\n        if (!lazyload) {\n          // not data img\n          if (src && src.indexOf('data:image') < 0) {\n            img.src = '';\n            addEvents(img, imgEvents);\n            addClass(img, 'loading');\n\n            img.src = src;\n          // data img\n          } else {\n            imgLoaded(img);\n          }\n        }\n      });\n\n      // set imgsComplete\n      raf(function(){ imgsLoadedCheck(arrayFromNodeList(imgs), function() { imgsComplete = true; }); });\n\n      // reset imgs for auto height: check visible imgs only\n      if (hasOption('autoHeight')) { imgs = getImageArray(index, Math.min(index + items - 1, slideCountNew - 1)); }\n\n      lazyload ? initSliderTransformStyleCheck() : raf(function(){ imgsLoadedCheck(arrayFromNodeList(imgs), initSliderTransformStyleCheck); });\n\n    } else {\n      // set container transform property\n      if (carousel) { doContainerTransformSilent(); }\n\n      // update slider tools and events\n      initTools();\n      initEvents();\n    }\n  }\n\n  function initSliderTransformStyleCheck () {\n    if (autoWidth && slideCount > 1) {\n      // check styles application\n      var num = loop ? index : slideCount - 1;\n\n      (function stylesApplicationCheck() {\n        var left = slideItems[num].getBoundingClientRect().left;\n        var right = slideItems[num - 1].getBoundingClientRect().right;\n\n        (Math.abs(left - right) <= 1) ?\n          initSliderTransformCore() :\n          setTimeout(function(){ stylesApplicationCheck() }, 16);\n      })();\n\n    } else {\n      initSliderTransformCore();\n    }\n  }\n\n\n  function initSliderTransformCore () {\n    // run Fn()s which are rely on image loading\n    if (!horizontal || autoWidth) {\n      setSlidePositions();\n\n      if (autoWidth) {\n        rightBoundary = getRightBoundary();\n        if (freezable) { freeze = getFreeze(); }\n        indexMax = getIndexMax(); // <= slidePositions, rightBoundary <=\n        resetVariblesWhenDisable(disable || freeze);\n      } else {\n        updateContentWrapperHeight();\n      }\n    }\n\n    // set container transform property\n    if (carousel) { doContainerTransformSilent(); }\n\n    // update slider tools and events\n    initTools();\n    initEvents();\n  }\n\n  function initSheet () {\n    // gallery:\n    // set animation classes and left value for gallery slider\n    if (!carousel) {\n      for (var i = index, l = index + Math.min(slideCount, items); i < l; i++) {\n        var item = slideItems[i];\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, animateIn);\n        removeClass(item, animateNormal);\n      }\n    }\n\n    // #### LAYOUT\n\n    // ## INLINE-BLOCK VS FLOAT\n\n    // ## PercentageLayout:\n    // slides: inline-block\n    // remove blank space between slides by set font-size: 0\n\n    // ## Non PercentageLayout:\n    // slides: float\n    //         margin-right: -100%\n    //         margin-left: ~\n\n    // Resource: https://docs.google.com/spreadsheets/d/147up245wwTXeQYve3BRSAD4oVcvQmuGsFteJOeA5xNQ/edit?usp=sharing\n    if (horizontal) {\n      if (PERCENTAGELAYOUT || autoWidth) {\n        addCSSRule(sheet, '#' + slideId + ' > .tns-item', 'font-size:' + win.getComputedStyle(slideItems[0]).fontSize + ';', getCssRulesLength(sheet));\n        addCSSRule(sheet, '#' + slideId, 'font-size:0;', getCssRulesLength(sheet));\n      } else if (carousel) {\n        forEach(slideItems, function (slide, i) {\n          slide.style.marginLeft = getSlideMarginLeft(i);\n        });\n      }\n    }\n\n\n    // ## BASIC STYLES\n    if (CSSMQ) {\n      // middle wrapper style\n      if (TRANSITIONDURATION) {\n        var str = middleWrapper && options.autoHeight ? getTransitionDurationStyle(options.speed) : '';\n        addCSSRule(sheet, '#' + slideId + '-mw', str, getCssRulesLength(sheet));\n      }\n\n      // inner wrapper styles\n      str = getInnerWrapperStyles(options.edgePadding, options.gutter, options.fixedWidth, options.speed, options.autoHeight);\n      addCSSRule(sheet, '#' + slideId + '-iw', str, getCssRulesLength(sheet));\n\n      // container styles\n      if (carousel) {\n        str = horizontal && !autoWidth ? 'width:' + getContainerWidth(options.fixedWidth, options.gutter, options.items) + ';' : '';\n        if (TRANSITIONDURATION) { str += getTransitionDurationStyle(speed); }\n        addCSSRule(sheet, '#' + slideId, str, getCssRulesLength(sheet));\n      }\n\n      // slide styles\n      str = horizontal && !autoWidth ? getSlideWidthStyle(options.fixedWidth, options.gutter, options.items) : '';\n      if (options.gutter) { str += getSlideGutterStyle(options.gutter); }\n      // set gallery items transition-duration\n      if (!carousel) {\n        if (TRANSITIONDURATION) { str += getTransitionDurationStyle(speed); }\n        if (ANIMATIONDURATION) { str += getAnimationDurationStyle(speed); }\n      }\n      if (str) { addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet)); }\n\n    // non CSS mediaqueries: IE8\n    // ## update inner wrapper, container, slides if needed\n    // set inline styles for inner wrapper & container\n    // insert stylesheet (one line) for slides only (since slides are many)\n    } else {\n      // middle wrapper styles\n      update_carousel_transition_duration();\n\n      // inner wrapper styles\n      innerWrapper.style.cssText = getInnerWrapperStyles(edgePadding, gutter, fixedWidth, autoHeight);\n\n      // container styles\n      if (carousel && horizontal && !autoWidth) {\n        container.style.width = getContainerWidth(fixedWidth, gutter, items);\n      }\n\n      // slide styles\n      var str = horizontal && !autoWidth ? getSlideWidthStyle(fixedWidth, gutter, items) : '';\n      if (gutter) { str += getSlideGutterStyle(gutter); }\n\n      // append to the last line\n      if (str) { addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet)); }\n    }\n\n    // ## MEDIAQUERIES\n    if (responsive && CSSMQ) {\n      for (var bp in responsive) {\n        // bp: convert string to number\n        bp = parseInt(bp);\n\n        var opts = responsive[bp],\n            str = '',\n            middleWrapperStr = '',\n            innerWrapperStr = '',\n            containerStr = '',\n            slideStr = '',\n            itemsBP = !autoWidth ? getOption('items', bp) : null,\n            fixedWidthBP = getOption('fixedWidth', bp),\n            speedBP = getOption('speed', bp),\n            edgePaddingBP = getOption('edgePadding', bp),\n            autoHeightBP = getOption('autoHeight', bp),\n            gutterBP = getOption('gutter', bp);\n\n        // middle wrapper string\n        if (TRANSITIONDURATION && middleWrapper && getOption('autoHeight', bp) && 'speed' in opts) {\n          middleWrapperStr = '#' + slideId + '-mw{' + getTransitionDurationStyle(speedBP) + '}';\n        }\n\n        // inner wrapper string\n        if ('edgePadding' in opts || 'gutter' in opts) {\n          innerWrapperStr = '#' + slideId + '-iw{' + getInnerWrapperStyles(edgePaddingBP, gutterBP, fixedWidthBP, speedBP, autoHeightBP) + '}';\n        }\n\n        // container string\n        if (carousel && horizontal && !autoWidth && ('fixedWidth' in opts || 'items' in opts || (fixedWidth && 'gutter' in opts))) {\n          containerStr = 'width:' + getContainerWidth(fixedWidthBP, gutterBP, itemsBP) + ';';\n        }\n        if (TRANSITIONDURATION && 'speed' in opts) {\n          containerStr += getTransitionDurationStyle(speedBP);\n        }\n        if (containerStr) {\n          containerStr = '#' + slideId + '{' + containerStr + '}';\n        }\n\n        // slide string\n        if ('fixedWidth' in opts || (fixedWidth && 'gutter' in opts) || !carousel && 'items' in opts) {\n          slideStr += getSlideWidthStyle(fixedWidthBP, gutterBP, itemsBP);\n        }\n        if ('gutter' in opts) {\n          slideStr += getSlideGutterStyle(gutterBP);\n        }\n        // set gallery items transition-duration\n        if (!carousel && 'speed' in opts) {\n          if (TRANSITIONDURATION) { slideStr += getTransitionDurationStyle(speedBP); }\n          if (ANIMATIONDURATION) { slideStr += getAnimationDurationStyle(speedBP); }\n        }\n        if (slideStr) { slideStr = '#' + slideId + ' > .tns-item{' + slideStr + '}'; }\n\n        // add up\n        str = middleWrapperStr + innerWrapperStr + containerStr + slideStr;\n\n        if (str) {\n          sheet.insertRule('@media (min-width: ' + bp / 16 + 'em) {' + str + '}', sheet.cssRules.length);\n        }\n      }\n    }\n  }\n\n  function initTools () {\n    // == slides ==\n    updateSlideStatus();\n\n    // == live region ==\n    outerWrapper.insertAdjacentHTML('afterbegin', '<div class=\"tns-liveregion tns-visually-hidden\" aria-live=\"polite\" aria-atomic=\"true\">slide <span class=\"current\">' + getLiveRegionStr() + '</span>  of ' + slideCount + '</div>');\n    liveregionCurrent = outerWrapper.querySelector('.tns-liveregion .current');\n\n    // == autoplayInit ==\n    if (hasAutoplay) {\n      var txt = autoplay ? 'stop' : 'start';\n      if (autoplayButton) {\n        setAttrs(autoplayButton, {'data-action': txt});\n      } else if (options.autoplayButtonOutput) {\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.autoplayPosition), '<button type=\"button\" data-action=\"' + txt + '\">' + autoplayHtmlStrings[0] + txt + autoplayHtmlStrings[1] + autoplayText[0] + '</button>');\n        autoplayButton = outerWrapper.querySelector('[data-action]');\n      }\n\n      // add event\n      if (autoplayButton) {\n        addEvents(autoplayButton, {'click': toggleAutoplay});\n      }\n\n      if (autoplay) {\n        startAutoplay();\n        if (autoplayHoverPause) { addEvents(container, hoverEvents); }\n        if (autoplayResetOnVisibility) { addEvents(container, visibilityEvent); }\n      }\n    }\n\n    // == navInit ==\n    if (hasNav) {\n      var initIndex = !carousel ? 0 : cloneCount;\n      // customized nav\n      // will not hide the navs in case they're thumbnails\n      if (navContainer) {\n        setAttrs(navContainer, {'aria-label': 'Carousel Pagination'});\n        navItems = navContainer.children;\n        forEach(navItems, function(item, i) {\n          setAttrs(item, {\n            'data-nav': i,\n            'tabindex': '-1',\n            'aria-label': navStr + (i + 1),\n            'aria-controls': slideId,\n          });\n        });\n\n      // generated nav\n      } else {\n        var navHtml = '',\n            hiddenStr = navAsThumbnails ? '' : 'style=\"display:none\"';\n        for (var i = 0; i < slideCount; i++) {\n          // hide nav items by default\n          navHtml += '<button type=\"button\" data-nav=\"' + i +'\" tabindex=\"-1\" aria-controls=\"' + slideId + '\" ' + hiddenStr + ' aria-label=\"' + navStr + (i + 1) +'\"></button>';\n        }\n        navHtml = '<div class=\"tns-nav\" aria-label=\"Carousel Pagination\">' + navHtml + '</div>';\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.navPosition), navHtml);\n\n        navContainer = outerWrapper.querySelector('.tns-nav');\n        navItems = navContainer.children;\n      }\n\n      updateNavVisibility();\n\n      // add transition\n      if (TRANSITIONDURATION) {\n        var prefix = TRANSITIONDURATION.substring(0, TRANSITIONDURATION.length - 18).toLowerCase(),\n            str = 'transition: all ' + speed / 1000 + 's';\n\n        if (prefix) {\n          str = '-' + prefix + '-' + str;\n        }\n\n        addCSSRule(sheet, '[aria-controls^=' + slideId + '-item]', str, getCssRulesLength(sheet));\n      }\n\n      setAttrs(navItems[navCurrentIndex], {'aria-label': navStr + (navCurrentIndex + 1) + navStrCurrent});\n      removeAttrs(navItems[navCurrentIndex], 'tabindex');\n      addClass(navItems[navCurrentIndex], navActiveClass);\n\n      // add events\n      addEvents(navContainer, navEvents);\n    }\n\n\n\n    // == controlsInit ==\n    if (hasControls) {\n      if (!controlsContainer && (!prevButton || !nextButton)) {\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.controlsPosition), '<div class=\"tns-controls\" aria-label=\"Carousel Navigation\" tabindex=\"0\"><button type=\"button\" data-controls=\"prev\" tabindex=\"-1\" aria-controls=\"' + slideId +'\">' + controlsText[0] + '</button><button type=\"button\" data-controls=\"next\" tabindex=\"-1\" aria-controls=\"' + slideId +'\">' + controlsText[1] + '</button></div>');\n\n        controlsContainer = outerWrapper.querySelector('.tns-controls');\n      }\n\n      if (!prevButton || !nextButton) {\n        prevButton = controlsContainer.children[0];\n        nextButton = controlsContainer.children[1];\n      }\n\n      if (options.controlsContainer) {\n        setAttrs(controlsContainer, {\n          'aria-label': 'Carousel Navigation',\n          'tabindex': '0'\n        });\n      }\n\n      if (options.controlsContainer || (options.prevButton && options.nextButton)) {\n        setAttrs([prevButton, nextButton], {\n          'aria-controls': slideId,\n          'tabindex': '-1',\n        });\n      }\n\n      if (options.controlsContainer || (options.prevButton && options.nextButton)) {\n        setAttrs(prevButton, {'data-controls' : 'prev'});\n        setAttrs(nextButton, {'data-controls' : 'next'});\n      }\n\n      prevIsButton = isButton(prevButton);\n      nextIsButton = isButton(nextButton);\n\n      updateControlsStatus();\n\n      // add events\n      if (controlsContainer) {\n        addEvents(controlsContainer, controlsEvents);\n      } else {\n        addEvents(prevButton, controlsEvents);\n        addEvents(nextButton, controlsEvents);\n      }\n    }\n\n    // hide tools if needed\n    disableUI();\n  }\n\n  function initEvents () {\n    // add events\n    if (carousel && TRANSITIONEND) {\n      var eve = {};\n      eve[TRANSITIONEND] = onTransitionEnd;\n      addEvents(container, eve);\n    }\n\n    if (touch) { addEvents(container, touchEvents, options.preventScrollOnTouch); }\n    if (mouseDrag) { addEvents(container, dragEvents); }\n    if (arrowKeys) { addEvents(doc, docmentKeydownEvent); }\n\n    if (nested === 'inner') {\n      events.on('outerResized', function () {\n        resizeTasks();\n        events.emit('innerLoaded', info());\n      });\n    } else if (responsive || fixedWidth || autoWidth || autoHeight || !horizontal) {\n      addEvents(win, {'resize': onResize});\n    }\n\n    if (autoHeight) {\n      if (nested === 'outer') {\n        events.on('innerLoaded', doAutoHeight);\n      } else if (!disable) { doAutoHeight(); }\n    }\n\n    doLazyLoad();\n    if (disable) { disableSlider(); } else if (freeze) { freezeSlider(); }\n\n    events.on('indexChanged', additionalUpdates);\n    if (nested === 'inner') { events.emit('innerLoaded', info()); }\n    if (typeof onInit === 'function') { onInit(info()); }\n    isOn = true;\n  }\n\n  function destroy () {\n    // sheet\n    sheet.disabled = true;\n    if (sheet.ownerNode) { sheet.ownerNode.remove(); }\n\n    // remove win event listeners\n    removeEvents(win, {'resize': onResize});\n\n    // arrowKeys, controls, nav\n    if (arrowKeys) { removeEvents(doc, docmentKeydownEvent); }\n    if (controlsContainer) { removeEvents(controlsContainer, controlsEvents); }\n    if (navContainer) { removeEvents(navContainer, navEvents); }\n\n    // autoplay\n    removeEvents(container, hoverEvents);\n    removeEvents(container, visibilityEvent);\n    if (autoplayButton) { removeEvents(autoplayButton, {'click': toggleAutoplay}); }\n    if (autoplay) { clearInterval(autoplayTimer); }\n\n    // container\n    if (carousel && TRANSITIONEND) {\n      var eve = {};\n      eve[TRANSITIONEND] = onTransitionEnd;\n      removeEvents(container, eve);\n    }\n    if (touch) { removeEvents(container, touchEvents); }\n    if (mouseDrag) { removeEvents(container, dragEvents); }\n\n    // cache Object values in options && reset HTML\n    var htmlList = [containerHTML, controlsContainerHTML, prevButtonHTML, nextButtonHTML, navContainerHTML, autoplayButtonHTML];\n\n    tnsList.forEach(function(item, i) {\n      var el = item === 'container' ? outerWrapper : options[item];\n\n      if (typeof el === 'object' && el) {\n        var prevEl = el.previousElementSibling ? el.previousElementSibling : false,\n            parentEl = el.parentNode;\n        el.outerHTML = htmlList[i];\n        options[item] = prevEl ? prevEl.nextElementSibling : parentEl.firstElementChild;\n      }\n    });\n\n\n    // reset variables\n    tnsList = animateIn = animateOut = animateDelay = animateNormal = horizontal = outerWrapper = innerWrapper = container = containerParent = containerHTML = slideItems = slideCount = breakpointZone = windowWidth = autoWidth = fixedWidth = edgePadding = gutter = viewport = items = slideBy = viewportMax = arrowKeys = speed = rewind = loop = autoHeight = sheet = lazyload = slidePositions = slideItemsOut = cloneCount = slideCountNew = hasRightDeadZone = rightBoundary = updateIndexBeforeTransform = transformAttr = transformPrefix = transformPostfix = getIndexMax = index = indexCached = indexMin = indexMax = resizeTimer = swipeAngle = moveDirectionExpected = running = onInit = events = newContainerClasses = slideId = disable = disabled = freezable = freeze = frozen = controlsEvents = navEvents = hoverEvents = visibilityEvent = docmentKeydownEvent = touchEvents = dragEvents = hasControls = hasNav = navAsThumbnails = hasAutoplay = hasTouch = hasMouseDrag = slideActiveClass = imgCompleteClass = imgEvents = imgsComplete = controls = controlsText = controlsContainer = controlsContainerHTML = prevButton = nextButton = prevIsButton = nextIsButton = nav = navContainer = navContainerHTML = navItems = pages = pagesCached = navClicked = navCurrentIndex = navCurrentIndexCached = navActiveClass = navStr = navStrCurrent = autoplay = autoplayTimeout = autoplayDirection = autoplayText = autoplayHoverPause = autoplayButton = autoplayButtonHTML = autoplayResetOnVisibility = autoplayHtmlStrings = autoplayTimer = animating = autoplayHoverPaused = autoplayUserPaused = autoplayVisibilityPaused = initPosition = lastPosition = translateInit = disX = disY = panStart = rafIndex = getDist = touch = mouseDrag = null;\n    // check variables\n    // [animateIn, animateOut, animateDelay, animateNormal, horizontal, outerWrapper, innerWrapper, container, containerParent, containerHTML, slideItems, slideCount, breakpointZone, windowWidth, autoWidth, fixedWidth, edgePadding, gutter, viewport, items, slideBy, viewportMax, arrowKeys, speed, rewind, loop, autoHeight, sheet, lazyload, slidePositions, slideItemsOut, cloneCount, slideCountNew, hasRightDeadZone, rightBoundary, updateIndexBeforeTransform, transformAttr, transformPrefix, transformPostfix, getIndexMax, index, indexCached, indexMin, indexMax, resizeTimer, swipeAngle, moveDirectionExpected, running, onInit, events, newContainerClasses, slideId, disable, disabled, freezable, freeze, frozen, controlsEvents, navEvents, hoverEvents, visibilityEvent, docmentKeydownEvent, touchEvents, dragEvents, hasControls, hasNav, navAsThumbnails, hasAutoplay, hasTouch, hasMouseDrag, slideActiveClass, imgCompleteClass, imgEvents, imgsComplete, controls, controlsText, controlsContainer, controlsContainerHTML, prevButton, nextButton, prevIsButton, nextIsButton, nav, navContainer, navContainerHTML, navItems, pages, pagesCached, navClicked, navCurrentIndex, navCurrentIndexCached, navActiveClass, navStr, navStrCurrent, autoplay, autoplayTimeout, autoplayDirection, autoplayText, autoplayHoverPause, autoplayButton, autoplayButtonHTML, autoplayResetOnVisibility, autoplayHtmlStrings, autoplayTimer, animating, autoplayHoverPaused, autoplayUserPaused, autoplayVisibilityPaused, initPosition, lastPosition, translateInit, disX, disY, panStart, rafIndex, getDist, touch, mouseDrag ].forEach(function(item) { if (item !== null) { console.log(item); } });\n\n    for (var a in this) {\n      if (a !== 'rebuild') { this[a] = null; }\n    }\n    isOn = false;\n  }\n\n// === ON RESIZE ===\n  // responsive || fixedWidth || autoWidth || !horizontal\n  function onResize (e) {\n    raf(function(){ resizeTasks(getEvent(e)); });\n  }\n\n  function resizeTasks (e) {\n    if (!isOn) { return; }\n    if (nested === 'outer') { events.emit('outerResized', info(e)); }\n    windowWidth = getWindowWidth();\n    var bpChanged,\n        breakpointZoneTem = breakpointZone,\n        needContainerTransform = false;\n\n    if (responsive) {\n      setBreakpointZone();\n      bpChanged = breakpointZoneTem !== breakpointZone;\n      // if (hasRightDeadZone) { needContainerTransform = true; } // *?\n      if (bpChanged) { events.emit('newBreakpointStart', info(e)); }\n    }\n\n    var indChanged,\n        itemsChanged,\n        itemsTem = items,\n        disableTem = disable,\n        freezeTem = freeze,\n        arrowKeysTem = arrowKeys,\n        controlsTem = controls,\n        navTem = nav,\n        touchTem = touch,\n        mouseDragTem = mouseDrag,\n        autoplayTem = autoplay,\n        autoplayHoverPauseTem = autoplayHoverPause,\n        autoplayResetOnVisibilityTem = autoplayResetOnVisibility,\n        indexTem = index;\n\n    if (bpChanged) {\n      var fixedWidthTem = fixedWidth,\n          autoHeightTem = autoHeight,\n          controlsTextTem = controlsText,\n          centerTem = center,\n          autoplayTextTem = autoplayText;\n\n      if (!CSSMQ) {\n        var gutterTem = gutter,\n            edgePaddingTem = edgePadding;\n      }\n    }\n\n    // get option:\n    // fixed width: viewport, fixedWidth, gutter => items\n    // others: window width => all variables\n    // all: items => slideBy\n    arrowKeys = getOption('arrowKeys');\n    controls = getOption('controls');\n    nav = getOption('nav');\n    touch = getOption('touch');\n    center = getOption('center');\n    mouseDrag = getOption('mouseDrag');\n    autoplay = getOption('autoplay');\n    autoplayHoverPause = getOption('autoplayHoverPause');\n    autoplayResetOnVisibility = getOption('autoplayResetOnVisibility');\n\n    if (bpChanged) {\n      disable = getOption('disable');\n      fixedWidth = getOption('fixedWidth');\n      speed = getOption('speed');\n      autoHeight = getOption('autoHeight');\n      controlsText = getOption('controlsText');\n      autoplayText = getOption('autoplayText');\n      autoplayTimeout = getOption('autoplayTimeout');\n\n      if (!CSSMQ) {\n        edgePadding = getOption('edgePadding');\n        gutter = getOption('gutter');\n      }\n    }\n    // update options\n    resetVariblesWhenDisable(disable);\n\n    viewport = getViewportWidth(); // <= edgePadding, gutter\n    if ((!horizontal || autoWidth) && !disable) {\n      setSlidePositions();\n      if (!horizontal) {\n        updateContentWrapperHeight(); // <= setSlidePositions\n        needContainerTransform = true;\n      }\n    }\n    if (fixedWidth || autoWidth) {\n      rightBoundary = getRightBoundary(); // autoWidth: <= viewport, slidePositions, gutter\n                                          // fixedWidth: <= viewport, fixedWidth, gutter\n      indexMax = getIndexMax(); // autoWidth: <= rightBoundary, slidePositions\n                                // fixedWidth: <= rightBoundary, fixedWidth, gutter\n    }\n\n    if (bpChanged || fixedWidth) {\n      items = getOption('items');\n      slideBy = getOption('slideBy');\n      itemsChanged = items !== itemsTem;\n\n      if (itemsChanged) {\n        if (!fixedWidth && !autoWidth) { indexMax = getIndexMax(); } // <= items\n        // check index before transform in case\n        // slider reach the right edge then items become bigger\n        updateIndex();\n      }\n    }\n\n    if (bpChanged) {\n      if (disable !== disableTem) {\n        if (disable) {\n          disableSlider();\n        } else {\n          enableSlider(); // <= slidePositions, rightBoundary, indexMax\n        }\n      }\n    }\n\n    if (freezable && (bpChanged || fixedWidth || autoWidth)) {\n      freeze = getFreeze(); // <= autoWidth: slidePositions, gutter, viewport, rightBoundary\n                            // <= fixedWidth: fixedWidth, gutter, rightBoundary\n                            // <= others: items\n\n      if (freeze !== freezeTem) {\n        if (freeze) {\n          doContainerTransform(getContainerTransformValue(getStartIndex(0)));\n          freezeSlider();\n        } else {\n          unfreezeSlider();\n          needContainerTransform = true;\n        }\n      }\n    }\n\n    resetVariblesWhenDisable(disable || freeze); // controls, nav, touch, mouseDrag, arrowKeys, autoplay, autoplayHoverPause, autoplayResetOnVisibility\n    if (!autoplay) { autoplayHoverPause = autoplayResetOnVisibility = false; }\n\n    if (arrowKeys !== arrowKeysTem) {\n      arrowKeys ?\n        addEvents(doc, docmentKeydownEvent) :\n        removeEvents(doc, docmentKeydownEvent);\n    }\n    if (controls !== controlsTem) {\n      if (controls) {\n        if (controlsContainer) {\n          showElement(controlsContainer);\n        } else {\n          if (prevButton) { showElement(prevButton); }\n          if (nextButton) { showElement(nextButton); }\n        }\n      } else {\n        if (controlsContainer) {\n          hideElement(controlsContainer);\n        } else {\n          if (prevButton) { hideElement(prevButton); }\n          if (nextButton) { hideElement(nextButton); }\n        }\n      }\n    }\n    if (nav !== navTem) {\n      if (nav) {\n        showElement(navContainer);\n        updateNavVisibility();\n      } else {\n        hideElement(navContainer)\n      }\n    }\n    if (touch !== touchTem) {\n      touch ?\n        addEvents(container, touchEvents, options.preventScrollOnTouch) :\n        removeEvents(container, touchEvents);\n    }\n    if (mouseDrag !== mouseDragTem) {\n      mouseDrag ?\n        addEvents(container, dragEvents) :\n        removeEvents(container, dragEvents);\n    }\n    if (autoplay !== autoplayTem) {\n      if (autoplay) {\n        if (autoplayButton) { showElement(autoplayButton); }\n        if (!animating && !autoplayUserPaused) { startAutoplay(); }\n      } else {\n        if (autoplayButton) { hideElement(autoplayButton); }\n        if (animating) { stopAutoplay(); }\n      }\n    }\n    if (autoplayHoverPause !== autoplayHoverPauseTem) {\n      autoplayHoverPause ?\n        addEvents(container, hoverEvents) :\n        removeEvents(container, hoverEvents);\n    }\n    if (autoplayResetOnVisibility !== autoplayResetOnVisibilityTem) {\n      autoplayResetOnVisibility ?\n        addEvents(doc, visibilityEvent) :\n        removeEvents(doc, visibilityEvent);\n    }\n\n    if (bpChanged) {\n      if (fixedWidth !== fixedWidthTem || center !== centerTem) { needContainerTransform = true; }\n\n      if (autoHeight !== autoHeightTem) {\n        if (!autoHeight) { innerWrapper.style.height = ''; }\n      }\n\n      if (controls && controlsText !== controlsTextTem) {\n        prevButton.innerHTML = controlsText[0];\n        nextButton.innerHTML = controlsText[1];\n      }\n\n      if (autoplayButton && autoplayText !== autoplayTextTem) {\n        var i = autoplay ? 1 : 0,\n            html = autoplayButton.innerHTML,\n            len = html.length - autoplayTextTem[i].length;\n        if (html.substring(len) === autoplayTextTem[i]) {\n          autoplayButton.innerHTML = html.substring(0, len) + autoplayText[i];\n        }\n      }\n    } else {\n      if (center && (fixedWidth || autoWidth)) { needContainerTransform = true; }\n    }\n\n    if (itemsChanged || fixedWidth && !autoWidth) {\n      pages = getPages();\n      updateNavVisibility();\n    }\n\n    indChanged = index !== indexTem;\n    if (indChanged) {\n      events.emit('indexChanged', info());\n      needContainerTransform = true;\n    } else if (itemsChanged) {\n      if (!indChanged) { additionalUpdates(); }\n    } else if (fixedWidth || autoWidth) {\n      doLazyLoad();\n      updateSlideStatus();\n      updateLiveRegion();\n    }\n\n    if (itemsChanged && !carousel) { updateGallerySlidePositions(); }\n\n    if (!disable && !freeze) {\n      // non-mediaqueries: IE8\n      if (bpChanged && !CSSMQ) {\n        // middle wrapper styles\n\n        // inner wrapper styles\n        if (edgePadding !== edgePaddingTem || gutter !== gutterTem) {\n          innerWrapper.style.cssText = getInnerWrapperStyles(edgePadding, gutter, fixedWidth, speed, autoHeight);\n        }\n\n        if (horizontal) {\n          // container styles\n          if (carousel) {\n            container.style.width = getContainerWidth(fixedWidth, gutter, items);\n          }\n\n          // slide styles\n          var str = getSlideWidthStyle(fixedWidth, gutter, items) +\n                    getSlideGutterStyle(gutter);\n\n          // remove the last line and\n          // add new styles\n          removeCSSRule(sheet, getCssRulesLength(sheet) - 1);\n          addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet));\n        }\n      }\n\n      // auto height\n      if (autoHeight) { doAutoHeight(); }\n\n      if (needContainerTransform) {\n        doContainerTransformSilent();\n        indexCached = index;\n      }\n    }\n\n    if (bpChanged) { events.emit('newBreakpointEnd', info(e)); }\n  }\n\n\n\n\n\n  // === INITIALIZATION FUNCTIONS === //\n  function getFreeze () {\n    if (!fixedWidth && !autoWidth) {\n      var a = center ? items - (items - 1) / 2 : items;\n      return  slideCount <= a;\n    }\n\n    var width = fixedWidth ? (fixedWidth + gutter) * slideCount : slidePositions[slideCount],\n        vp = edgePadding ? viewport + edgePadding * 2 : viewport + gutter;\n\n    if (center) {\n      vp -= fixedWidth ? (viewport - fixedWidth) / 2 : (viewport - (slidePositions[index + 1] - slidePositions[index] - gutter)) / 2;\n    }\n\n    return width <= vp;\n  }\n\n  function setBreakpointZone () {\n    breakpointZone = 0;\n    for (var bp in responsive) {\n      bp = parseInt(bp); // convert string to number\n      if (windowWidth >= bp) { breakpointZone = bp; }\n    }\n  }\n\n  // (slideBy, indexMin, indexMax) => index\n  var updateIndex = (function () {\n    return loop ?\n      carousel ?\n        // loop + carousel\n        function () {\n          var leftEdge = indexMin,\n              rightEdge = indexMax;\n\n          leftEdge += slideBy;\n          rightEdge -= slideBy;\n\n          // adjust edges when has edge paddings\n          // or fixed-width slider with extra space on the right side\n          if (edgePadding) {\n            leftEdge += 1;\n            rightEdge -= 1;\n          } else if (fixedWidth) {\n            if ((viewport + gutter)%(fixedWidth + gutter)) { rightEdge -= 1; }\n          }\n\n          if (cloneCount) {\n            if (index > rightEdge) {\n              index -= slideCount;\n            } else if (index < leftEdge) {\n              index += slideCount;\n            }\n          }\n        } :\n        // loop + gallery\n        function() {\n          if (index > indexMax) {\n            while (index >= indexMin + slideCount) { index -= slideCount; }\n          } else if (index < indexMin) {\n            while (index <= indexMax - slideCount) { index += slideCount; }\n          }\n        } :\n      // non-loop\n      function() {\n        index = Math.max(indexMin, Math.min(indexMax, index));\n      };\n  })();\n\n  function disableUI () {\n    if (!autoplay && autoplayButton) { hideElement(autoplayButton); }\n    if (!nav && navContainer) { hideElement(navContainer); }\n    if (!controls) {\n      if (controlsContainer) {\n        hideElement(controlsContainer);\n      } else {\n        if (prevButton) { hideElement(prevButton); }\n        if (nextButton) { hideElement(nextButton); }\n      }\n    }\n  }\n\n  function enableUI () {\n    if (autoplay && autoplayButton) { showElement(autoplayButton); }\n    if (nav && navContainer) { showElement(navContainer); }\n    if (controls) {\n      if (controlsContainer) {\n        showElement(controlsContainer);\n      } else {\n        if (prevButton) { showElement(prevButton); }\n        if (nextButton) { showElement(nextButton); }\n      }\n    }\n  }\n\n  function freezeSlider () {\n    if (frozen) { return; }\n\n    // remove edge padding from inner wrapper\n    if (edgePadding) { innerWrapper.style.margin = '0px'; }\n\n    // add class tns-transparent to cloned slides\n    if (cloneCount) {\n      var str = 'tns-transparent';\n      for (var i = cloneCount; i--;) {\n        if (carousel) { addClass(slideItems[i], str); }\n        addClass(slideItems[slideCountNew - i - 1], str);\n      }\n    }\n\n    // update tools\n    disableUI();\n\n    frozen = true;\n  }\n\n  function unfreezeSlider () {\n    if (!frozen) { return; }\n\n    // restore edge padding for inner wrapper\n    // for mordern browsers\n    if (edgePadding && CSSMQ) { innerWrapper.style.margin = ''; }\n\n    // remove class tns-transparent to cloned slides\n    if (cloneCount) {\n      var str = 'tns-transparent';\n      for (var i = cloneCount; i--;) {\n        if (carousel) { removeClass(slideItems[i], str); }\n        removeClass(slideItems[slideCountNew - i - 1], str);\n      }\n    }\n\n    // update tools\n    enableUI();\n\n    frozen = false;\n  }\n\n  function disableSlider () {\n    if (disabled) { return; }\n\n    sheet.disabled = true;\n    container.className = container.className.replace(newContainerClasses.substring(1), '');\n    removeAttrs(container, ['style']);\n    if (loop) {\n      for (var j = cloneCount; j--;) {\n        if (carousel) { hideElement(slideItems[j]); }\n        hideElement(slideItems[slideCountNew - j - 1]);\n      }\n    }\n\n    // vertical slider\n    if (!horizontal || !carousel) { removeAttrs(innerWrapper, ['style']); }\n\n    // gallery\n    if (!carousel) {\n      for (var i = index, l = index + slideCount; i < l; i++) {\n        var item = slideItems[i];\n        removeAttrs(item, ['style']);\n        removeClass(item, animateIn);\n        removeClass(item, animateNormal);\n      }\n    }\n\n    // update tools\n    disableUI();\n\n    disabled = true;\n  }\n\n  function enableSlider () {\n    if (!disabled) { return; }\n\n    sheet.disabled = false;\n    container.className += newContainerClasses;\n    doContainerTransformSilent();\n\n    if (loop) {\n      for (var j = cloneCount; j--;) {\n        if (carousel) { showElement(slideItems[j]); }\n        showElement(slideItems[slideCountNew - j - 1]);\n      }\n    }\n\n    // gallery\n    if (!carousel) {\n      for (var i = index, l = index + slideCount; i < l; i++) {\n        var item = slideItems[i],\n            classN = i < index + items ? animateIn : animateNormal;\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, classN);\n      }\n    }\n\n    // update tools\n    enableUI();\n\n    disabled = false;\n  }\n\n  function updateLiveRegion () {\n    var str = getLiveRegionStr();\n    if (liveregionCurrent.innerHTML !== str) { liveregionCurrent.innerHTML = str; }\n  }\n\n  function getLiveRegionStr () {\n    var arr = getVisibleSlideRange(),\n        start = arr[0] + 1,\n        end = arr[1] + 1;\n    return start === end ? start + '' : start + ' to ' + end;\n  }\n\n  function getVisibleSlideRange (val) {\n    if (val == null) { val = getContainerTransformValue(); }\n    var start = index, end, rangestart, rangeend;\n\n    // get range start, range end for autoWidth and fixedWidth\n    if (center || edgePadding) {\n      if (autoWidth || fixedWidth) {\n        rangestart = - (parseFloat(val) + edgePadding);\n        rangeend = rangestart + viewport + edgePadding * 2;\n      }\n    } else {\n      if (autoWidth) {\n        rangestart = slidePositions[index];\n        rangeend = rangestart + viewport;\n      }\n    }\n\n    // get start, end\n    // - check auto width\n    if (autoWidth) {\n      slidePositions.forEach(function(point, i) {\n        if (i < slideCountNew) {\n          if ((center || edgePadding) && point <= rangestart + 0.5) { start = i; }\n          if (rangeend - point >= 0.5) { end = i; }\n        }\n      });\n\n    // - check percentage width, fixed width\n    } else {\n\n      if (fixedWidth) {\n        var cell = fixedWidth + gutter;\n        if (center || edgePadding) {\n          start = Math.floor(rangestart/cell);\n          end = Math.ceil(rangeend/cell - 1);\n        } else {\n          end = start + Math.ceil(viewport/cell) - 1;\n        }\n\n      } else {\n        if (center || edgePadding) {\n          var a = items - 1;\n          if (center) {\n            start -= a / 2;\n            end = index + a / 2;\n          } else {\n            end = index + a;\n          }\n\n          if (edgePadding) {\n            var b = edgePadding * items / viewport;\n            start -= b;\n            end += b;\n          }\n\n          start = Math.floor(start);\n          end = Math.ceil(end);\n        } else {\n          end = start + items - 1;\n        }\n      }\n\n      start = Math.max(start, 0);\n      end = Math.min(end, slideCountNew - 1);\n    }\n\n    return [start, end];\n  }\n\n  function doLazyLoad () {\n    if (lazyload && !disable) {\n      var arg = getVisibleSlideRange();\n      arg.push(lazyloadSelector);\n\n      getImageArray.apply(null, arg).forEach(function (img) {\n        if (!hasClass(img, imgCompleteClass)) {\n          // stop propagation transitionend event to container\n          var eve = {};\n          eve[TRANSITIONEND] = function (e) { e.stopPropagation(); };\n          addEvents(img, eve);\n\n          addEvents(img, imgEvents);\n\n          // update src\n          img.src = getAttr(img, 'data-src');\n\n          // update srcset\n          var srcset = getAttr(img, 'data-srcset');\n          if (srcset) { img.srcset = srcset; }\n\n          addClass(img, 'loading');\n        }\n      });\n    }\n  }\n\n  function onImgLoaded (e) {\n    imgLoaded(getTarget(e));\n  }\n\n  function onImgFailed (e) {\n    imgFailed(getTarget(e));\n  }\n\n  function imgLoaded (img) {\n    addClass(img, 'loaded');\n    imgCompleted(img);\n  }\n\n  function imgFailed (img) {\n    addClass(img, 'failed');\n    imgCompleted(img);\n  }\n\n  function imgCompleted (img) {\n    addClass(img, imgCompleteClass);\n    removeClass(img, 'loading');\n    removeEvents(img, imgEvents);\n  }\n\n  function getImageArray (start, end, imgSelector) {\n    var imgs = [];\n    if (!imgSelector) { imgSelector = 'img'; }\n\n    while (start <= end) {\n      forEach(slideItems[start].querySelectorAll(imgSelector), function (img) { imgs.push(img); });\n      start++;\n    }\n\n    return imgs;\n  }\n\n  // check if all visible images are loaded\n  // and update container height if it's done\n  function doAutoHeight () {\n    var imgs = getImageArray.apply(null, getVisibleSlideRange());\n    raf(function(){ imgsLoadedCheck(imgs, updateInnerWrapperHeight); });\n  }\n\n  function imgsLoadedCheck (imgs, cb) {\n    // execute callback function if all images are complete\n    if (imgsComplete) { return cb(); }\n\n    // check image classes\n    imgs.forEach(function (img, index) {\n      if (!lazyload && img.complete) { imgCompleted(img); } // Check image.complete\n      if (hasClass(img, imgCompleteClass)) { imgs.splice(index, 1); }\n    });\n\n    // execute callback function if selected images are all complete\n    if (!imgs.length) { return cb(); }\n\n    // otherwise execute this functiona again\n    raf(function(){ imgsLoadedCheck(imgs, cb); });\n  }\n\n  function additionalUpdates () {\n    doLazyLoad();\n    updateSlideStatus();\n    updateLiveRegion();\n    updateControlsStatus();\n    updateNavStatus();\n  }\n\n\n  function update_carousel_transition_duration () {\n    if (carousel && autoHeight) {\n      middleWrapper.style[TRANSITIONDURATION] = speed / 1000 + 's';\n    }\n  }\n\n  function getMaxSlideHeight (slideStart, slideRange) {\n    var heights = [];\n    for (var i = slideStart, l = Math.min(slideStart + slideRange, slideCountNew); i < l; i++) {\n      heights.push(slideItems[i].offsetHeight);\n    }\n\n    return Math.max.apply(null, heights);\n  }\n\n  // update inner wrapper height\n  // 1. get the max-height of the visible slides\n  // 2. set transitionDuration to speed\n  // 3. update inner wrapper height to max-height\n  // 4. set transitionDuration to 0s after transition done\n  function updateInnerWrapperHeight () {\n    var maxHeight = autoHeight ? getMaxSlideHeight(index, items) : getMaxSlideHeight(cloneCount, slideCount),\n        wp = middleWrapper ? middleWrapper : innerWrapper;\n\n    if (wp.style.height !== maxHeight) { wp.style.height = maxHeight + 'px'; }\n  }\n\n  // get the distance from the top edge of the first slide to each slide\n  // (init) => slidePositions\n  function setSlidePositions () {\n    slidePositions = [0];\n    var attr = horizontal ? 'left' : 'top',\n        attr2 = horizontal ? 'right' : 'bottom',\n        base = slideItems[0].getBoundingClientRect()[attr];\n\n    forEach(slideItems, function(item, i) {\n      // skip the first slide\n      if (i) { slidePositions.push(item.getBoundingClientRect()[attr] - base); }\n      // add the end edge\n      if (i === slideCountNew - 1) { slidePositions.push(item.getBoundingClientRect()[attr2] - base); }\n    });\n  }\n\n  // update slide\n  function updateSlideStatus () {\n    var range = getVisibleSlideRange(),\n        start = range[0],\n        end = range[1];\n\n    forEach(slideItems, function(item, i) {\n      // show slides\n      if (i >= start && i <= end) {\n        if (hasAttr(item, 'aria-hidden')) {\n          removeAttrs(item, ['aria-hidden', 'tabindex']);\n          addClass(item, slideActiveClass);\n        }\n      // hide slides\n      } else {\n        if (!hasAttr(item, 'aria-hidden')) {\n          setAttrs(item, {\n            'aria-hidden': 'true',\n            'tabindex': '-1'\n          });\n          removeClass(item, slideActiveClass);\n        }\n      }\n    });\n  }\n\n  // gallery: update slide position\n  function updateGallerySlidePositions () {\n    var l = index + Math.min(slideCount, items);\n    for (var i = slideCountNew; i--;) {\n      var item = slideItems[i];\n\n      if (i >= index && i < l) {\n        // add transitions to visible slides when adjusting their positions\n        addClass(item, 'tns-moving');\n\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, animateIn);\n        removeClass(item, animateNormal);\n      } else if (item.style.left) {\n        item.style.left = '';\n        addClass(item, animateNormal);\n        removeClass(item, animateIn);\n      }\n\n      // remove outlet animation\n      removeClass(item, animateOut);\n    }\n\n    // removing '.tns-moving'\n    setTimeout(function() {\n      forEach(slideItems, function(el) {\n        removeClass(el, 'tns-moving');\n      });\n    }, 300);\n  }\n\n  // set tabindex on Nav\n  function updateNavStatus () {\n    // get current nav\n    if (nav) {\n      navCurrentIndex = navClicked >= 0 ? navClicked : getCurrentNavIndex();\n      navClicked = -1;\n\n      if (navCurrentIndex !== navCurrentIndexCached) {\n        var navPrev = navItems[navCurrentIndexCached],\n            navCurrent = navItems[navCurrentIndex];\n\n        setAttrs(navPrev, {\n          'tabindex': '-1',\n          'aria-label': navStr + (navCurrentIndexCached + 1)\n        });\n        removeClass(navPrev, navActiveClass);\n\n        setAttrs(navCurrent, {'aria-label': navStr + (navCurrentIndex + 1) + navStrCurrent});\n        removeAttrs(navCurrent, 'tabindex');\n        addClass(navCurrent, navActiveClass);\n\n        navCurrentIndexCached = navCurrentIndex;\n      }\n    }\n  }\n\n  function getLowerCaseNodeName (el) {\n    return el.nodeName.toLowerCase();\n  }\n\n  function isButton (el) {\n    return getLowerCaseNodeName(el) === 'button';\n  }\n\n  function isAriaDisabled (el) {\n    return el.getAttribute('aria-disabled') === 'true';\n  }\n\n  function disEnableElement (isButton, el, val) {\n    if (isButton) {\n      el.disabled = val;\n    } else {\n      el.setAttribute('aria-disabled', val.toString());\n    }\n  }\n\n  // set 'disabled' to true on controls when reach the edges\n  function updateControlsStatus () {\n    if (!controls || rewind || loop) { return; }\n\n    var prevDisabled = (prevIsButton) ? prevButton.disabled : isAriaDisabled(prevButton),\n        nextDisabled = (nextIsButton) ? nextButton.disabled : isAriaDisabled(nextButton),\n        disablePrev = (index <= indexMin) ? true : false,\n        disableNext = (!rewind && index >= indexMax) ? true : false;\n\n    if (disablePrev && !prevDisabled) {\n      disEnableElement(prevIsButton, prevButton, true);\n    }\n    if (!disablePrev && prevDisabled) {\n      disEnableElement(prevIsButton, prevButton, false);\n    }\n    if (disableNext && !nextDisabled) {\n      disEnableElement(nextIsButton, nextButton, true);\n    }\n    if (!disableNext && nextDisabled) {\n      disEnableElement(nextIsButton, nextButton, false);\n    }\n  }\n\n  // set duration\n  function resetDuration (el, str) {\n    if (TRANSITIONDURATION) { el.style[TRANSITIONDURATION] = str; }\n  }\n\n  function getSliderWidth () {\n    return fixedWidth ? (fixedWidth + gutter) * slideCountNew : slidePositions[slideCountNew];\n  }\n\n  function getCenterGap (num) {\n    if (num == null) { num = index; }\n\n    var gap = edgePadding ? gutter : 0;\n    return autoWidth ? ((viewport - gap) - (slidePositions[num + 1] - slidePositions[num] - gutter))/2 :\n      fixedWidth ? (viewport - fixedWidth) / 2 :\n        (items - 1) / 2;\n  }\n\n  function getRightBoundary () {\n    var gap = edgePadding ? gutter : 0,\n        result = (viewport + gap) - getSliderWidth();\n\n    if (center && !loop) {\n      result = fixedWidth ? - (fixedWidth + gutter) * (slideCountNew - 1) - getCenterGap() :\n        getCenterGap(slideCountNew - 1) - slidePositions[slideCountNew - 1];\n    }\n    if (result > 0) { result = 0; }\n\n    return result;\n  }\n\n  function getContainerTransformValue (num) {\n    if (num == null) { num = index; }\n\n    var val;\n    if (horizontal && !autoWidth) {\n      if (fixedWidth) {\n        val = - (fixedWidth + gutter) * num;\n        if (center) { val += getCenterGap(); }\n      } else {\n        var denominator = TRANSFORM ? slideCountNew : items;\n        if (center) { num -= getCenterGap(); }\n        val = - num * 100 / denominator;\n      }\n    } else {\n      val = - slidePositions[num];\n      if (center && autoWidth) {\n        val += getCenterGap();\n      }\n    }\n\n    if (hasRightDeadZone) { val = Math.max(val, rightBoundary); }\n\n    val += (horizontal && !autoWidth && !fixedWidth) ? '%' : 'px';\n\n    return val;\n  }\n\n  function doContainerTransformSilent (val) {\n    resetDuration(container, '0s');\n    doContainerTransform(val);\n  }\n\n  function doContainerTransform (val) {\n    if (val == null) { val = getContainerTransformValue(); }\n    container.style[transformAttr] = transformPrefix + val + transformPostfix;\n  }\n\n  function animateSlide (number, classOut, classIn, isOut) {\n    var l = number + items;\n    if (!loop) { l = Math.min(l, slideCountNew); }\n\n    for (var i = number; i < l; i++) {\n        var item = slideItems[i];\n\n      // set item positions\n      if (!isOut) { item.style.left = (i - index) * 100 / items + '%'; }\n\n      if (animateDelay && TRANSITIONDELAY) {\n        item.style[TRANSITIONDELAY] = item.style[ANIMATIONDELAY] = animateDelay * (i - number) / 1000 + 's';\n      }\n      removeClass(item, classOut);\n      addClass(item, classIn);\n\n      if (isOut) { slideItemsOut.push(item); }\n    }\n  }\n\n  // make transfer after click/drag:\n  // 1. change 'transform' property for mordern browsers\n  // 2. change 'left' property for legacy browsers\n  var transformCore = (function () {\n    return carousel ?\n      function () {\n        resetDuration(container, '');\n        if (TRANSITIONDURATION || !speed) {\n          // for morden browsers with non-zero duration or\n          // zero duration for all browsers\n          doContainerTransform();\n          // run fallback function manually\n          // when duration is 0 / container is hidden\n          if (!speed || !isVisible(container)) { onTransitionEnd(); }\n\n        } else {\n          // for old browser with non-zero duration\n          jsTransform(container, transformAttr, transformPrefix, transformPostfix, getContainerTransformValue(), speed, onTransitionEnd);\n        }\n\n        if (!horizontal) { updateContentWrapperHeight(); }\n      } :\n      function () {\n        slideItemsOut = [];\n\n        var eve = {};\n        eve[TRANSITIONEND] = eve[ANIMATIONEND] = onTransitionEnd;\n        removeEvents(slideItems[indexCached], eve);\n        addEvents(slideItems[index], eve);\n\n        animateSlide(indexCached, animateIn, animateOut, true);\n        animateSlide(index, animateNormal, animateIn);\n\n        // run fallback function manually\n        // when transition or animation not supported / duration is 0\n        if (!TRANSITIONEND || !ANIMATIONEND || !speed || !isVisible(container)) { onTransitionEnd(); }\n      };\n  })();\n\n  function render (e, sliderMoved) {\n    if (updateIndexBeforeTransform) { updateIndex(); }\n\n    // render when slider was moved (touch or drag) even though index may not change\n    if (index !== indexCached || sliderMoved) {\n      // events\n      events.emit('indexChanged', info());\n      events.emit('transitionStart', info());\n      if (autoHeight) { doAutoHeight(); }\n\n      // pause autoplay when click or keydown from user\n      if (animating && e && ['click', 'keydown'].indexOf(e.type) >= 0) { stopAutoplay(); }\n\n      running = true;\n      transformCore();\n    }\n  }\n\n  /*\n   * Transfer prefixed properties to the same format\n   * CSS: -Webkit-Transform => webkittransform\n   * JS: WebkitTransform => webkittransform\n   * @param {string} str - property\n   *\n   */\n  function strTrans (str) {\n    return str.toLowerCase().replace(/-/g, '');\n  }\n\n  // AFTER TRANSFORM\n  // Things need to be done after a transfer:\n  // 1. check index\n  // 2. add classes to visible slide\n  // 3. disable controls buttons when reach the first/last slide in non-loop slider\n  // 4. update nav status\n  // 5. lazyload images\n  // 6. update container height\n  function onTransitionEnd (event) {\n    // check running on gallery mode\n    // make sure trantionend/animationend events run only once\n    if (carousel || running) {\n      events.emit('transitionEnd', info(event));\n\n      if (!carousel && slideItemsOut.length > 0) {\n        for (var i = 0; i < slideItemsOut.length; i++) {\n          var item = slideItemsOut[i];\n          // set item positions\n          item.style.left = '';\n\n          if (ANIMATIONDELAY && TRANSITIONDELAY) {\n            item.style[ANIMATIONDELAY] = '';\n            item.style[TRANSITIONDELAY] = '';\n          }\n          removeClass(item, animateOut);\n          addClass(item, animateNormal);\n        }\n      }\n\n      /* update slides, nav, controls after checking ...\n       * => legacy browsers who don't support 'event'\n       *    have to check event first, otherwise event.target will cause an error\n       * => or 'gallery' mode:\n       *   + event target is slide item\n       * => or 'carousel' mode:\n       *   + event target is container,\n       *   + event.property is the same with transform attribute\n       */\n      if (!event ||\n          !carousel && event.target.parentNode === container ||\n          event.target === container && strTrans(event.propertyName) === strTrans(transformAttr)) {\n\n        if (!updateIndexBeforeTransform) {\n          var indexTem = index;\n          updateIndex();\n          if (index !== indexTem) {\n            events.emit('indexChanged', info());\n\n            doContainerTransformSilent();\n          }\n        }\n\n        if (nested === 'inner') { events.emit('innerLoaded', info()); }\n        running = false;\n        indexCached = index;\n      }\n    }\n\n  }\n\n  // # ACTIONS\n  function goTo (targetIndex, e) {\n    if (freeze) { return; }\n\n    // prev slideBy\n    if (targetIndex === 'prev') {\n      onControlsClick(e, -1);\n\n    // next slideBy\n    } else if (targetIndex === 'next') {\n      onControlsClick(e, 1);\n\n    // go to exact slide\n    } else {\n      if (running) {\n        if (preventActionWhenRunning) { return; } else { onTransitionEnd(); }\n      }\n\n      var absIndex = getAbsIndex(),\n          indexGap = 0;\n\n      if (targetIndex === 'first') {\n        indexGap = - absIndex;\n      } else if (targetIndex === 'last') {\n        indexGap = carousel ? slideCount - items - absIndex : slideCount - 1 - absIndex;\n      } else {\n        if (typeof targetIndex !== 'number') { targetIndex = parseInt(targetIndex); }\n\n        if (!isNaN(targetIndex)) {\n          // from directly called goTo function\n          if (!e) { targetIndex = Math.max(0, Math.min(slideCount - 1, targetIndex)); }\n\n          indexGap = targetIndex - absIndex;\n        }\n      }\n\n      // gallery: make sure new page won't overlap with current page\n      if (!carousel && indexGap && Math.abs(indexGap) < items) {\n        var factor = indexGap > 0 ? 1 : -1;\n        indexGap += (index + indexGap - slideCount) >= indexMin ? slideCount * factor : slideCount * 2 * factor * -1;\n      }\n\n      index += indexGap;\n\n      // make sure index is in range\n      if (carousel && loop) {\n        if (index < indexMin) { index += slideCount; }\n        if (index > indexMax) { index -= slideCount; }\n      }\n\n      // if index is changed, start rendering\n      if (getAbsIndex(index) !== getAbsIndex(indexCached)) {\n        render(e);\n      }\n\n    }\n  }\n\n  // on controls click\n  function onControlsClick (e, dir) {\n    if (running) {\n      if (preventActionWhenRunning) { return; } else { onTransitionEnd(); }\n    }\n    var passEventObject;\n\n    if (!dir) {\n      e = getEvent(e);\n      var target = getTarget(e);\n\n      while (target !== controlsContainer && [prevButton, nextButton].indexOf(target) < 0) { target = target.parentNode; }\n\n      var targetIn = [prevButton, nextButton].indexOf(target);\n      if (targetIn >= 0) {\n        passEventObject = true;\n        dir = targetIn === 0 ? -1 : 1;\n      }\n    }\n\n    if (rewind) {\n      if (index === indexMin && dir === -1) {\n        goTo('last', e);\n        return;\n      } else if (index === indexMax && dir === 1) {\n        goTo('first', e);\n        return;\n      }\n    }\n\n    if (dir) {\n      index += slideBy * dir;\n      if (autoWidth) { index = Math.floor(index); }\n      // pass e when click control buttons or keydown\n      render((passEventObject || (e && e.type === 'keydown')) ? e : null);\n    }\n  }\n\n  // on nav click\n  function onNavClick (e) {\n    if (running) {\n      if (preventActionWhenRunning) { return; } else { onTransitionEnd(); }\n    }\n\n    e = getEvent(e);\n    var target = getTarget(e), navIndex;\n\n    // find the clicked nav item\n    while (target !== navContainer && !hasAttr(target, 'data-nav')) { target = target.parentNode; }\n    if (hasAttr(target, 'data-nav')) {\n      var navIndex = navClicked = Number(getAttr(target, 'data-nav')),\n          targetIndexBase = fixedWidth || autoWidth ? navIndex * slideCount / pages : navIndex * items,\n          targetIndex = navAsThumbnails ? navIndex : Math.min(Math.ceil(targetIndexBase), slideCount - 1);\n      goTo(targetIndex, e);\n\n      if (navCurrentIndex === navIndex) {\n        if (animating) { stopAutoplay(); }\n        navClicked = -1; // reset navClicked\n      }\n    }\n  }\n\n  // autoplay functions\n  function setAutoplayTimer () {\n    autoplayTimer = setInterval(function () {\n      onControlsClick(null, autoplayDirection);\n    }, autoplayTimeout);\n\n    animating = true;\n  }\n\n  function stopAutoplayTimer () {\n    clearInterval(autoplayTimer);\n    animating = false;\n  }\n\n  function updateAutoplayButton (action, txt) {\n    setAttrs(autoplayButton, {'data-action': action});\n    autoplayButton.innerHTML = autoplayHtmlStrings[0] + action + autoplayHtmlStrings[1] + txt;\n  }\n\n  function startAutoplay () {\n    setAutoplayTimer();\n    if (autoplayButton) { updateAutoplayButton('stop', autoplayText[1]); }\n  }\n\n  function stopAutoplay () {\n    stopAutoplayTimer();\n    if (autoplayButton) { updateAutoplayButton('start', autoplayText[0]); }\n  }\n\n  // programaitcally play/pause the slider\n  function play () {\n    if (autoplay && !animating) {\n      startAutoplay();\n      autoplayUserPaused = false;\n    }\n  }\n  function pause () {\n    if (animating) {\n      stopAutoplay();\n      autoplayUserPaused = true;\n    }\n  }\n\n  function toggleAutoplay () {\n    if (animating) {\n      stopAutoplay();\n      autoplayUserPaused = true;\n    } else {\n      startAutoplay();\n      autoplayUserPaused = false;\n    }\n  }\n\n  function onVisibilityChange () {\n    if (doc.hidden) {\n      if (animating) {\n        stopAutoplayTimer();\n        autoplayVisibilityPaused = true;\n      }\n    } else if (autoplayVisibilityPaused) {\n      setAutoplayTimer();\n      autoplayVisibilityPaused = false;\n    }\n  }\n\n  function mouseoverPause () {\n    if (animating) {\n      stopAutoplayTimer();\n      autoplayHoverPaused = true;\n    }\n  }\n\n  function mouseoutRestart () {\n    if (autoplayHoverPaused) {\n      setAutoplayTimer();\n      autoplayHoverPaused = false;\n    }\n  }\n\n  // keydown events on document\n  function onDocumentKeydown (e) {\n    e = getEvent(e);\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT].indexOf(e.keyCode);\n\n    if (keyIndex >= 0) {\n      onControlsClick(e, keyIndex === 0 ? -1 : 1);\n    }\n  }\n\n  // on key control\n  function onControlsKeydown (e) {\n    e = getEvent(e);\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT].indexOf(e.keyCode);\n\n    if (keyIndex >= 0) {\n      if (keyIndex === 0) {\n        if (!prevButton.disabled) { onControlsClick(e, -1); }\n      } else if (!nextButton.disabled) {\n        onControlsClick(e, 1);\n      }\n    }\n  }\n\n  // set focus\n  function setFocus (el) {\n    el.focus();\n  }\n\n  // on key nav\n  function onNavKeydown (e) {\n    e = getEvent(e);\n    var curElement = doc.activeElement;\n    if (!hasAttr(curElement, 'data-nav')) { return; }\n\n    // var code = e.keyCode,\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT, KEYS.ENTER, KEYS.SPACE].indexOf(e.keyCode),\n        navIndex = Number(getAttr(curElement, 'data-nav'));\n\n    if (keyIndex >= 0) {\n      if (keyIndex === 0) {\n        if (navIndex > 0) { setFocus(navItems[navIndex - 1]); }\n      } else if (keyIndex === 1) {\n        if (navIndex < pages - 1) { setFocus(navItems[navIndex + 1]); }\n      } else {\n        navClicked = navIndex;\n        goTo(navIndex, e);\n      }\n    }\n  }\n\n  function getEvent (e) {\n    e = e || win.event;\n    return isTouchEvent(e) ? e.changedTouches[0] : e;\n  }\n  function getTarget (e) {\n    return e.target || win.event.srcElement;\n  }\n\n  function isTouchEvent (e) {\n    return e.type.indexOf('touch') >= 0;\n  }\n\n  function preventDefaultBehavior (e) {\n    e.preventDefault ? e.preventDefault() : e.returnValue = false;\n  }\n\n  function getMoveDirectionExpected () {\n    return getTouchDirection(toDegree(lastPosition.y - initPosition.y, lastPosition.x - initPosition.x), swipeAngle) === options.axis;\n  }\n\n  function onPanStart (e) {\n    if (running) {\n      if (preventActionWhenRunning) { return; } else { onTransitionEnd(); }\n    }\n\n    if (autoplay && animating) { stopAutoplayTimer(); }\n\n    panStart = true;\n    if (rafIndex) {\n      caf(rafIndex);\n      rafIndex = null;\n    }\n\n    var $ = getEvent(e);\n    events.emit(isTouchEvent(e) ? 'touchStart' : 'dragStart', info(e));\n\n    if (!isTouchEvent(e) && ['img', 'a'].indexOf(getLowerCaseNodeName(getTarget(e))) >= 0) {\n      preventDefaultBehavior(e);\n    }\n\n    lastPosition.x = initPosition.x = $.clientX;\n    lastPosition.y = initPosition.y = $.clientY;\n    if (carousel) {\n      translateInit = parseFloat(container.style[transformAttr].replace(transformPrefix, ''));\n      resetDuration(container, '0s');\n    }\n  }\n\n  function onPanMove (e) {\n    if (panStart) {\n      var $ = getEvent(e);\n      lastPosition.x = $.clientX;\n      lastPosition.y = $.clientY;\n\n      if (carousel) {\n        if (!rafIndex) { rafIndex = raf(function(){ panUpdate(e); }); }\n      } else {\n        if (moveDirectionExpected === '?') { moveDirectionExpected = getMoveDirectionExpected(); }\n        if (moveDirectionExpected) { preventScroll = true; }\n      }\n\n      if ((typeof e.cancelable !== 'boolean' || e.cancelable) && preventScroll) {\n        e.preventDefault();\n      }\n    }\n  }\n\n  function panUpdate (e) {\n    if (!moveDirectionExpected) {\n      panStart = false;\n      return;\n    }\n    caf(rafIndex);\n    if (panStart) { rafIndex = raf(function(){ panUpdate(e); }); }\n\n    if (moveDirectionExpected === '?') { moveDirectionExpected = getMoveDirectionExpected(); }\n    if (moveDirectionExpected) {\n      if (!preventScroll && isTouchEvent(e)) { preventScroll = true; }\n\n      try {\n        if (e.type) { events.emit(isTouchEvent(e) ? 'touchMove' : 'dragMove', info(e)); }\n      } catch(err) {}\n\n      var x = translateInit,\n          dist = getDist(lastPosition, initPosition);\n      if (!horizontal || fixedWidth || autoWidth) {\n        x += dist;\n        x += 'px';\n      } else {\n        var percentageX = TRANSFORM ? dist * items * 100 / ((viewport + gutter) * slideCountNew): dist * 100 / (viewport + gutter);\n        x += percentageX;\n        x += '%';\n      }\n\n      container.style[transformAttr] = transformPrefix + x + transformPostfix;\n    }\n  }\n\n  function onPanEnd (e) {\n    if (panStart) {\n      if (rafIndex) {\n        caf(rafIndex);\n        rafIndex = null;\n      }\n      if (carousel) { resetDuration(container, ''); }\n      panStart = false;\n\n      var $ = getEvent(e);\n      lastPosition.x = $.clientX;\n      lastPosition.y = $.clientY;\n      var dist = getDist(lastPosition, initPosition);\n\n      if (Math.abs(dist)) {\n        // drag vs click\n        if (!isTouchEvent(e)) {\n          // prevent \"click\"\n          var target = getTarget(e);\n          addEvents(target, {'click': function preventClick (e) {\n            preventDefaultBehavior(e);\n            removeEvents(target, {'click': preventClick});\n          }});\n        }\n\n        if (carousel) {\n          rafIndex = raf(function() {\n            if (horizontal && !autoWidth) {\n              var indexMoved = - dist * items / (viewport + gutter);\n              indexMoved = dist > 0 ? Math.floor(indexMoved) : Math.ceil(indexMoved);\n              index += indexMoved;\n            } else {\n              var moved = - (translateInit + dist);\n              if (moved <= 0) {\n                index = indexMin;\n              } else if (moved >= slidePositions[slideCountNew - 1]) {\n                index = indexMax;\n              } else {\n                var i = 0;\n                while (i < slideCountNew && moved >= slidePositions[i]) {\n                  index = i;\n                  if (moved > slidePositions[i] && dist < 0) { index += 1; }\n                  i++;\n                }\n              }\n            }\n\n            render(e, dist);\n            events.emit(isTouchEvent(e) ? 'touchEnd' : 'dragEnd', info(e));\n          });\n        } else {\n          if (moveDirectionExpected) {\n            onControlsClick(e, dist > 0 ? -1 : 1);\n          }\n        }\n      }\n    }\n\n    // reset\n    if (options.preventScrollOnTouch === 'auto') { preventScroll = false; }\n    if (swipeAngle) { moveDirectionExpected = '?'; }\n    if (autoplay && !animating) { setAutoplayTimer(); }\n  }\n\n  // === RESIZE FUNCTIONS === //\n  // (slidePositions, index, items) => vertical_conentWrapper.height\n  function updateContentWrapperHeight () {\n    var wp = middleWrapper ? middleWrapper : innerWrapper;\n    wp.style.height = slidePositions[index + items] - slidePositions[index] + 'px';\n  }\n\n  function getPages () {\n    var rough = fixedWidth ? (fixedWidth + gutter) * slideCount / viewport : slideCount / items;\n    return Math.min(Math.ceil(rough), slideCount);\n  }\n\n  /*\n   * 1. update visible nav items list\n   * 2. add \"hidden\" attributes to previous visible nav items\n   * 3. remove \"hidden\" attrubutes to new visible nav items\n   */\n  function updateNavVisibility () {\n    if (!nav || navAsThumbnails) { return; }\n\n    if (pages !== pagesCached) {\n      var min = pagesCached,\n          max = pages,\n          fn = showElement;\n\n      if (pagesCached > pages) {\n        min = pages;\n        max = pagesCached;\n        fn = hideElement;\n      }\n\n      while (min < max) {\n        fn(navItems[min]);\n        min++;\n      }\n\n      // cache pages\n      pagesCached = pages;\n    }\n  }\n\n  function info (e) {\n    return {\n      container: container,\n      slideItems: slideItems,\n      navContainer: navContainer,\n      navItems: navItems,\n      controlsContainer: controlsContainer,\n      hasControls: hasControls,\n      prevButton: prevButton,\n      nextButton: nextButton,\n      items: items,\n      slideBy: slideBy,\n      cloneCount: cloneCount,\n      slideCount: slideCount,\n      slideCountNew: slideCountNew,\n      index: index,\n      indexCached: indexCached,\n      displayIndex: getCurrentSlide(),\n      navCurrentIndex: navCurrentIndex,\n      navCurrentIndexCached: navCurrentIndexCached,\n      pages: pages,\n      pagesCached: pagesCached,\n      sheet: sheet,\n      isOn: isOn,\n      event: e || {},\n    };\n  }\n\n  return {\n    version: '2.9.4',\n    getInfo: info,\n    events: events,\n    goTo: goTo,\n    play: play,\n    pause: pause,\n    isOn: isOn,\n    updateSliderHeight: updateInnerWrapperHeight,\n    refresh: initSliderTransform,\n    destroy: destroy,\n    rebuild: function() {\n      return tns(extend(options, optionsElements));\n    }\n  };\n};\n"],"mappings":"AAAA;AACA,IAAI,CAACA,MAAM,CAACC,IAAZ,EAAkB;EAChBD,MAAM,CAACC,IAAP,GAAc,UAASC,MAAT,EAAiB;IAC7B,IAAID,IAAI,GAAG,EAAX;;IACA,KAAK,IAAIE,IAAT,IAAiBD,MAAjB,EAAyB;MACvB,IAAIF,MAAM,CAACI,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,MAArC,EAA6CC,IAA7C,CAAJ,EAAwD;QACtDF,IAAI,CAACM,IAAL,CAAUJ,IAAV;MACD;IACF;;IACD,OAAOF,IAAP;EACD,CARD;AASD,C,CAED;;;AACA,IAAG,EAAE,YAAYO,OAAO,CAACJ,SAAtB,CAAH,EAAoC;EAClCI,OAAO,CAACJ,SAAR,CAAkBK,MAAlB,GAA2B,YAAU;IACnC,IAAG,KAAKC,UAAR,EAAoB;MAClB,KAAKA,UAAL,CAAgBC,WAAhB,CAA4B,IAA5B;IACD;EACF,CAJD;AAKD;;AAED,SAASC,GAAT,QAAoB,kBAApB;AACA,SAASC,GAAT,QAAoB,kBAApB;AACA,SAASC,MAAT,QAAuB,qBAAvB;AACA,SAASC,iBAAT,QAAkC,gCAAlC;AACA,SAASC,eAAT,QAAgC,8BAAhC;AACA,SAASC,UAAT,QAA2B,yBAA3B;AACA,SAASC,IAAT,QAAqB,mBAArB;AACA,SAASC,gBAAT,QAAiC,+BAAjC;AACA,SAASC,iBAAT,QAAkC,gCAAlC;AACA,SAASC,gBAAT,QAAiC,+BAAjC;AACA,SAASC,UAAT,QAA2B,yBAA3B;AACA,SAASC,aAAT,QAA8B,4BAA9B;AACA,SAASC,iBAAT,QAAkC,gCAAlC;AACA,SAASC,QAAT,QAAyB,uBAAzB;AACA,SAASC,iBAAT,QAAkC,gCAAlC;AACA,SAASC,OAAT,QAAwB,sBAAxB;AACA,SAASC,QAAT,QAAyB,uBAAzB;AACA,SAASC,QAAT,QAAyB,uBAAzB;AACA,SAASC,WAAT,QAA4B,0BAA5B;AACA,SAASC,OAAT,QAAwB,sBAAxB;AACA,SAASC,OAAT,QAAwB,sBAAxB;AACA,SAASC,QAAT,QAAyB,uBAAzB;AACA,SAASC,WAAT,QAA4B,0BAA5B;AACA,SAASC,iBAAT,QAAkC,gCAAlC;AACA,SAASC,WAAT,QAA4B,0BAA5B;AACA,SAASC,WAAT,QAA4B,0BAA5B;AACA,SAASC,SAAT,QAA0B,wBAA1B;AACA,SAASC,aAAT,QAA8B,4BAA9B;AACA,SAASC,eAAT,QAAgC,8BAAhC;AACA,SAASC,cAAT,QAA+B,6BAA/B;AACA,SAASC,SAAT,QAA0B,wBAA1B;AACA,SAASC,YAAT,QAA6B,2BAA7B;AACA,SAASC,MAAT,QAAuB,qBAAvB;AACA,SAASC,WAAT,QAA4B,0BAA5B;AAEA,OAAO,IAAIC,GAAG,GAAG,UAASC,OAAT,EAAkB;EACjCA,OAAO,GAAGjC,MAAM,CAAC;IACfkC,SAAS,EAAE,SADI;IAEfC,IAAI,EAAE,UAFS;IAGfC,IAAI,EAAE,YAHS;IAIfC,KAAK,EAAE,CAJQ;IAKfC,MAAM,EAAE,CALO;IAMfC,WAAW,EAAE,CANE;IAOfC,UAAU,EAAE,KAPG;IAQfC,SAAS,EAAE,KARI;IASfC,WAAW,EAAE,KATE;IAUfC,OAAO,EAAE,CAVM;IAWfC,MAAM,EAAE,KAXO;IAYfC,QAAQ,EAAE,IAZK;IAafC,gBAAgB,EAAE,KAbH;IAcfC,YAAY,EAAE,CAAC,MAAD,EAAS,MAAT,CAdC;IAefC,iBAAiB,EAAE,KAfJ;IAgBfC,UAAU,EAAE,KAhBG;IAiBfC,UAAU,EAAE,KAjBG;IAkBfC,GAAG,EAAE,IAlBU;IAmBfC,WAAW,EAAE,KAnBE;IAoBfC,YAAY,EAAE,KApBC;IAqBfC,eAAe,EAAE,KArBF;IAsBfC,SAAS,EAAE,KAtBI;IAuBfC,KAAK,EAAE,GAvBQ;IAwBfC,QAAQ,EAAE,KAxBK;IAyBfC,gBAAgB,EAAE,KAzBH;IA0BfC,eAAe,EAAE,IA1BF;IA2BfC,iBAAiB,EAAE,SA3BJ;IA4BfC,YAAY,EAAE,CAAC,OAAD,EAAU,MAAV,CA5BC;IA6BfC,kBAAkB,EAAE,KA7BL;IA8BfC,cAAc,EAAE,KA9BD;IA+BfC,oBAAoB,EAAE,IA/BP;IAgCfC,yBAAyB,EAAE,IAhCZ;IAiCfC,SAAS,EAAE,YAjCI;IAkCfC,UAAU,EAAE,aAlCG;IAmCfC,aAAa,EAAE,YAnCA;IAoCfC,YAAY,EAAE,KApCC;IAqCfC,IAAI,EAAE,IArCS;IAsCfC,MAAM,EAAE,KAtCO;IAuCfC,UAAU,EAAE,KAvCG;IAwCfC,UAAU,EAAE,KAxCG;IAyCfC,QAAQ,EAAE,KAzCK;IA0CfC,gBAAgB,EAAE,eA1CH;IA2CfC,KAAK,EAAE,IA3CQ;IA4CfC,SAAS,EAAE,KA5CI;IA6CfC,UAAU,EAAE,EA7CG;IA8CfC,MAAM,EAAE,KA9CO;IA+CfC,wBAAwB,EAAE,KA/CX;IAgDfC,oBAAoB,EAAE,KAhDP;IAiDfC,SAAS,EAAE,IAjDI;IAkDfC,MAAM,EAAE,KAlDO;IAmDfC,eAAe,EAAE,IAnDF;IAoDfC,KAAK,EAAE;EApDQ,CAAD,EAqDbpD,OAAO,IAAI,EArDE,CAAhB;EAuDA,IAAIqD,GAAG,GAAGC,QAAV;EAAA,IACIC,GAAG,GAAGC,MADV;EAAA,IAEIC,IAAI,GAAG;IACLC,KAAK,EAAE,EADF;IAELC,KAAK,EAAE,EAFF;IAGLC,IAAI,EAAE,EAHD;IAILC,KAAK,EAAE;EAJF,CAFX;EAAA,IAQIC,UAAU,GAAG,EARjB;EAAA,IASIC,kBAAkB,GAAG/D,OAAO,CAACmD,eATjC;;EAWA,IAAIY,kBAAJ,EAAwB;IACtB;IACA,IAAIC,WAAW,GAAGC,SAAS,CAACC,SAA5B;IACA,IAAIC,GAAG,GAAG,IAAIC,IAAJ,EAAV;;IAEA,IAAI;MACFN,UAAU,GAAGP,GAAG,CAACc,YAAjB;;MACA,IAAIP,UAAJ,EAAgB;QACdA,UAAU,CAACQ,OAAX,CAAmBH,GAAnB,EAAwBA,GAAxB;QACAJ,kBAAkB,GAAGD,UAAU,CAACS,OAAX,CAAmBJ,GAAnB,KAA2BA,GAAhD;QACAL,UAAU,CAACU,UAAX,CAAsBL,GAAtB;MACD,CAJD,MAIO;QACLJ,kBAAkB,GAAG,KAArB;MACD;;MACD,IAAI,CAACA,kBAAL,EAAyB;QAAED,UAAU,GAAG,EAAb;MAAkB;IAC9C,CAVD,CAUE,OAAMW,CAAN,EAAS;MACTV,kBAAkB,GAAG,KAArB;IACD;;IAED,IAAIA,kBAAJ,EAAwB;MACtB;MACA,IAAID,UAAU,CAAC,QAAD,CAAV,IAAwBA,UAAU,CAAC,QAAD,CAAV,KAAyBE,WAArD,EAAkE;QAChE,CAAC,IAAD,EAAO,KAAP,EAAc,KAAd,EAAqB,KAArB,EAA4B,KAA5B,EAAmC,MAAnC,EAA2C,MAA3C,EAAmD,MAAnD,EAA2D,MAA3D,EAAmE,KAAnE,EAA0E,KAA1E,EAAiFpF,OAAjF,CAAyF,UAAS8F,IAAT,EAAe;UAAEZ,UAAU,CAACU,UAAX,CAAsBE,IAAtB;QAA8B,CAAxI;MACD,CAJqB,CAKtB;;;MACAL,YAAY,CAAC,QAAD,CAAZ,GAAyBL,WAAzB;IACD;EACF;;EAED,IAAIW,IAAI,GAAGb,UAAU,CAAC,IAAD,CAAV,GAAmB9F,iBAAiB,CAAC8F,UAAU,CAAC,IAAD,CAAX,CAApC,GAAyD7F,eAAe,CAAC6F,UAAD,EAAa,IAAb,EAAmB3F,IAAI,EAAvB,EAA2B4F,kBAA3B,CAAnF;EAAA,IACIa,gBAAgB,GAAGd,UAAU,CAAC,KAAD,CAAV,GAAoB9F,iBAAiB,CAAC8F,UAAU,CAAC,KAAD,CAAX,CAArC,GAA2D7F,eAAe,CAAC6F,UAAD,EAAa,KAAb,EAAoB1F,gBAAgB,EAApC,EAAwC2F,kBAAxC,CADjG;EAAA,IAEIc,KAAK,GAAGf,UAAU,CAAC,KAAD,CAAV,GAAoB9F,iBAAiB,CAAC8F,UAAU,CAAC,KAAD,CAAX,CAArC,GAA2D7F,eAAe,CAAC6F,UAAD,EAAa,KAAb,EAAoBzF,iBAAiB,EAArC,EAAyC0F,kBAAzC,CAFtF;EAAA,IAGIe,SAAS,GAAGhB,UAAU,CAAC,KAAD,CAAV,GAAoB9F,iBAAiB,CAAC8F,UAAU,CAAC,KAAD,CAAX,CAArC,GAA2D7F,eAAe,CAAC6F,UAAD,EAAa,KAAb,EAAoBtE,aAAa,CAAC,WAAD,CAAjC,EAAgDuE,kBAAhD,CAH1F;EAAA,IAIIgB,eAAe,GAAGjB,UAAU,CAAC,KAAD,CAAV,GAAoB9F,iBAAiB,CAAC8F,UAAU,CAAC,KAAD,CAAX,CAArC,GAA2D7F,eAAe,CAAC6F,UAAD,EAAa,KAAb,EAAoBrE,eAAe,CAACqF,SAAD,CAAnC,EAAgDf,kBAAhD,CAJhG;EAAA,IAKIiB,kBAAkB,GAAGlB,UAAU,CAAC,MAAD,CAAV,GAAqB9F,iBAAiB,CAAC8F,UAAU,CAAC,MAAD,CAAX,CAAtC,GAA6D7F,eAAe,CAAC6F,UAAD,EAAa,MAAb,EAAqBtE,aAAa,CAAC,oBAAD,CAAlC,EAA0DuE,kBAA1D,CALrG;EAAA,IAMIkB,eAAe,GAAGnB,UAAU,CAAC,MAAD,CAAV,GAAqB9F,iBAAiB,CAAC8F,UAAU,CAAC,MAAD,CAAX,CAAtC,GAA6D7F,eAAe,CAAC6F,UAAD,EAAa,MAAb,EAAqBtE,aAAa,CAAC,iBAAD,CAAlC,EAAuDuE,kBAAvD,CANlG;EAAA,IAOImB,iBAAiB,GAAGpB,UAAU,CAAC,MAAD,CAAV,GAAqB9F,iBAAiB,CAAC8F,UAAU,CAAC,MAAD,CAAX,CAAtC,GAA6D7F,eAAe,CAAC6F,UAAD,EAAa,MAAb,EAAqBtE,aAAa,CAAC,mBAAD,CAAlC,EAAyDuE,kBAAzD,CAPpG;EAAA,IAQIoB,cAAc,GAAGrB,UAAU,CAAC,MAAD,CAAV,GAAqB9F,iBAAiB,CAAC8F,UAAU,CAAC,MAAD,CAAX,CAAtC,GAA6D7F,eAAe,CAAC6F,UAAD,EAAa,MAAb,EAAqBtE,aAAa,CAAC,gBAAD,CAAlC,EAAsDuE,kBAAtD,CARjG;EAAA,IASIqB,aAAa,GAAGtB,UAAU,CAAC,KAAD,CAAV,GAAoB9F,iBAAiB,CAAC8F,UAAU,CAAC,KAAD,CAAX,CAArC,GAA2D7F,eAAe,CAAC6F,UAAD,EAAa,KAAb,EAAoBpE,cAAc,CAACsF,kBAAD,EAAqB,YAArB,CAAlC,EAAsEjB,kBAAtE,CAT9F;EAAA,IAUIsB,YAAY,GAAGvB,UAAU,CAAC,KAAD,CAAV,GAAoB9F,iBAAiB,CAAC8F,UAAU,CAAC,KAAD,CAAX,CAArC,GAA2D7F,eAAe,CAAC6F,UAAD,EAAa,KAAb,EAAoBpE,cAAc,CAACwF,iBAAD,EAAoB,WAApB,CAAlC,EAAoEnB,kBAApE,CAV7F,CAhGiC,CA4GjC;;EACA,IAAIuB,kBAAkB,GAAG/B,GAAG,CAACgC,OAAJ,IAAe,OAAOhC,GAAG,CAACgC,OAAJ,CAAYC,IAAnB,KAA4B,UAApE;EAAA,IACIC,OAAO,GAAG,CAAC,WAAD,EAAc,mBAAd,EAAmC,YAAnC,EAAiD,YAAjD,EAA+D,cAA/D,EAA+E,gBAA/E,CADd;EAAA,IAEIC,eAAe,GAAG,EAFtB;EAIAD,OAAO,CAAC7G,OAAR,CAAgB,UAAS8F,IAAT,EAAe;IAC7B,IAAI,OAAO1E,OAAO,CAAC0E,IAAD,CAAd,KAAyB,QAA7B,EAAuC;MACrC,IAAIiB,GAAG,GAAG3F,OAAO,CAAC0E,IAAD,CAAjB;MAAA,IACIkB,EAAE,GAAGvC,GAAG,CAACwC,aAAJ,CAAkBF,GAAlB,CADT;MAEAD,eAAe,CAAChB,IAAD,CAAf,GAAwBiB,GAAxB;;MAEA,IAAIC,EAAE,IAAIA,EAAE,CAACE,QAAb,EAAuB;QACrB9F,OAAO,CAAC0E,IAAD,CAAP,GAAgBkB,EAAhB;MACD,CAFD,MAEO;QACL,IAAIN,kBAAJ,EAAwB;UAAEC,OAAO,CAACC,IAAR,CAAa,aAAb,EAA4BxF,OAAO,CAAC0E,IAAD,CAAnC;QAA6C;;QACvE;MACD;IACF;EACF,CAbD,EAjHiC,CAgIjC;;EACA,IAAI1E,OAAO,CAACC,SAAR,CAAkB8F,QAAlB,CAA2BC,MAA3B,GAAoC,CAAxC,EAA2C;IACzC,IAAIV,kBAAJ,EAAwB;MAAEC,OAAO,CAACC,IAAR,CAAa,oBAAb,EAAmCxF,OAAO,CAACC,SAA3C;IAAwD;;IAClF;EACA,CApI+B,CAsIjC;;;EACA,IAAIuC,UAAU,GAAGxC,OAAO,CAACwC,UAAzB;EAAA,IACIM,MAAM,GAAG9C,OAAO,CAAC8C,MADrB;EAAA,IAEImD,QAAQ,GAAGjG,OAAO,CAACE,IAAR,KAAiB,UAAjB,GAA8B,IAA9B,GAAqC,KAFpD;;EAIA,IAAIsC,UAAJ,EAAgB;IACd;IACA,IAAI,KAAKA,UAAT,EAAqB;MACnBxC,OAAO,GAAGjC,MAAM,CAACiC,OAAD,EAAUwC,UAAU,CAAC,CAAD,CAApB,CAAhB;MACA,OAAOA,UAAU,CAAC,CAAD,CAAjB;IACD;;IAED,IAAI0D,aAAa,GAAG,EAApB;;IACA,KAAK,IAAIC,GAAT,IAAgB3D,UAAhB,EAA4B;MAC1B,IAAI4D,GAAG,GAAG5D,UAAU,CAAC2D,GAAD,CAApB,CAD0B,CAE1B;MACA;MACA;MACA;MACA;MACA;;MACAC,GAAG,GAAG,OAAOA,GAAP,KAAe,QAAf,GAA0B;QAAChG,KAAK,EAAEgG;MAAR,CAA1B,GAAyCA,GAA/C;MACAF,aAAa,CAACC,GAAD,CAAb,GAAqBC,GAArB;IACD;;IACD5D,UAAU,GAAG0D,aAAb;IACAA,aAAa,GAAG,IAAhB;EACD,CAhKgC,CAkKjC;;;EACA,SAASG,aAAT,CAAwBC,GAAxB,EAA6B;IAC3B,KAAK,IAAIH,GAAT,IAAgBG,GAAhB,EAAqB;MACnB,IAAI,CAACL,QAAL,EAAe;QACb,IAAIE,GAAG,KAAK,SAAZ,EAAuB;UAAEG,GAAG,CAACH,GAAD,CAAH,GAAW,MAAX;QAAoB;;QAC7C,IAAIA,GAAG,KAAK,aAAZ,EAA2B;UAAEG,GAAG,CAACH,GAAD,CAAH,GAAW,KAAX;QAAmB;;QAChD,IAAIA,GAAG,KAAK,YAAZ,EAA0B;UAAEG,GAAG,CAACH,GAAD,CAAH,GAAW,KAAX;QAAmB;MAChD,CALkB,CAOnB;;;MACA,IAAIA,GAAG,KAAK,YAAZ,EAA0B;QAAEE,aAAa,CAACC,GAAG,CAACH,GAAD,CAAJ,CAAb;MAA0B;IACvD;EACF;;EACD,IAAI,CAACF,QAAL,EAAe;IAAEI,aAAa,CAACrG,OAAD,CAAb;EAAyB,CA/KT,CAkLjC;;;EACA,IAAI,CAACiG,QAAL,EAAe;IACbjG,OAAO,CAACG,IAAR,GAAe,YAAf;IACAH,OAAO,CAACU,OAAR,GAAkB,MAAlB;IACAV,OAAO,CAACM,WAAR,GAAsB,KAAtB;IAEA,IAAI2B,SAAS,GAAGjC,OAAO,CAACiC,SAAxB;IAAA,IACIC,UAAU,GAAGlC,OAAO,CAACkC,UADzB;IAAA,IAEIE,YAAY,GAAGpC,OAAO,CAACoC,YAF3B;IAAA,IAGID,aAAa,GAAGnC,OAAO,CAACmC,aAH5B;EAID;;EAED,IAAIoE,UAAU,GAAGvG,OAAO,CAACG,IAAR,KAAiB,YAAjB,GAAgC,IAAhC,GAAuC,KAAxD;EAAA,IACIqG,YAAY,GAAGnD,GAAG,CAACoD,aAAJ,CAAkB,KAAlB,CADnB;EAAA,IAEIC,YAAY,GAAGrD,GAAG,CAACoD,aAAJ,CAAkB,KAAlB,CAFnB;EAAA,IAGIE,aAHJ;EAAA,IAII1G,SAAS,GAAGD,OAAO,CAACC,SAJxB;EAAA,IAKI2G,eAAe,GAAG3G,SAAS,CAACtC,UALhC;EAAA,IAMIkJ,aAAa,GAAG5G,SAAS,CAAC6G,SAN9B;EAAA,IAOIC,UAAU,GAAG9G,SAAS,CAAC8F,QAP3B;EAAA,IAQIiB,UAAU,GAAGD,UAAU,CAACf,MAR5B;EAAA,IASIiB,cATJ;EAAA,IAUIC,WAAW,GAAGC,cAAc,EAVhC;EAAA,IAWIC,IAAI,GAAG,KAXX;;EAYA,IAAI5E,UAAJ,EAAgB;IAAE6E,iBAAiB;EAAK;;EACxC,IAAIpB,QAAJ,EAAc;IAAEhG,SAAS,CAACqH,SAAV,IAAuB,YAAvB;EAAsC,CA3MrB,CA6MjC;;;EACA,IAAI9G,SAAS,GAAGR,OAAO,CAACQ,SAAxB;EAAA,IACID,UAAU,GAAGgH,SAAS,CAAC,YAAD,CAD1B;EAAA,IAEIjH,WAAW,GAAGiH,SAAS,CAAC,aAAD,CAF3B;EAAA,IAGIlH,MAAM,GAAGkH,SAAS,CAAC,QAAD,CAHtB;EAAA,IAIIC,QAAQ,GAAGC,gBAAgB,EAJ/B;EAAA,IAKI9G,MAAM,GAAG4G,SAAS,CAAC,QAAD,CALtB;EAAA,IAMInH,KAAK,GAAG,CAACI,SAAD,GAAakH,IAAI,CAACC,KAAL,CAAWJ,SAAS,CAAC,OAAD,CAApB,CAAb,GAA8C,CAN1D;EAAA,IAOI7G,OAAO,GAAG6G,SAAS,CAAC,SAAD,CAPvB;EAAA,IAQI9G,WAAW,GAAGT,OAAO,CAACS,WAAR,IAAuBT,OAAO,CAAC4H,uBARjD;EAAA,IASItG,SAAS,GAAGiG,SAAS,CAAC,WAAD,CATzB;EAAA,IAUIhG,KAAK,GAAGgG,SAAS,CAAC,OAAD,CAVrB;EAAA,IAWIjF,MAAM,GAAGtC,OAAO,CAACsC,MAXrB;EAAA,IAYID,IAAI,GAAGC,MAAM,GAAG,KAAH,GAAWtC,OAAO,CAACqC,IAZpC;EAAA,IAaIE,UAAU,GAAGgF,SAAS,CAAC,YAAD,CAb1B;EAAA,IAcI3G,QAAQ,GAAG2G,SAAS,CAAC,UAAD,CAdxB;EAAA,IAeIzG,YAAY,GAAGyG,SAAS,CAAC,cAAD,CAf5B;EAAA,IAgBIrG,GAAG,GAAGqG,SAAS,CAAC,KAAD,CAhBnB;EAAA,IAiBI5E,KAAK,GAAG4E,SAAS,CAAC,OAAD,CAjBrB;EAAA,IAkBI3E,SAAS,GAAG2E,SAAS,CAAC,WAAD,CAlBzB;EAAA,IAmBI/F,QAAQ,GAAG+F,SAAS,CAAC,UAAD,CAnBxB;EAAA,IAoBI7F,eAAe,GAAG6F,SAAS,CAAC,iBAAD,CApB/B;EAAA,IAqBI3F,YAAY,GAAG2F,SAAS,CAAC,cAAD,CArB5B;EAAA,IAsBI1F,kBAAkB,GAAG0F,SAAS,CAAC,oBAAD,CAtBlC;EAAA,IAuBIvF,yBAAyB,GAAGuF,SAAS,CAAC,2BAAD,CAvBzC;EAAA,IAwBIM,KAAK,GAAGvJ,gBAAgB,CAAC,IAAD,EAAOiJ,SAAS,CAAC,OAAD,CAAhB,CAxB5B;EAAA,IAyBI9E,QAAQ,GAAGzC,OAAO,CAACyC,QAzBvB;EAAA,IA0BIC,gBAAgB,GAAG1C,OAAO,CAAC0C,gBA1B/B;EAAA,IA2BIoF,cA3BJ;EAAA,IA2BoB;EAChBC,aAAa,GAAG,EA5BpB;EAAA,IA6BIC,UAAU,GAAG3F,IAAI,GAAG4F,oBAAoB,EAAvB,GAA4B,CA7BjD;EAAA,IA8BIC,aAAa,GAAG,CAACjC,QAAD,GAAYe,UAAU,GAAGgB,UAAzB,GAAsChB,UAAU,GAAGgB,UAAU,GAAG,CA9BpF;EAAA,IA+BIG,gBAAgB,GAAG,CAAC5H,UAAU,IAAIC,SAAf,KAA6B,CAAC6B,IAA9B,GAAqC,IAArC,GAA4C,KA/BnE;EAAA,IAgCI+F,aAAa,GAAG7H,UAAU,GAAG8H,gBAAgB,EAAnB,GAAwB,IAhCtD;EAAA,IAiCIC,0BAA0B,GAAI,CAACrC,QAAD,IAAa,CAAC5D,IAAf,GAAuB,IAAvB,GAA8B,KAjC/D;EAAA,IAkCI;EACAkG,aAAa,GAAGhC,UAAU,GAAG,MAAH,GAAY,KAnC1C;EAAA,IAoCIiC,eAAe,GAAG,EApCtB;EAAA,IAqCIC,gBAAgB,GAAG,EArCvB;EAAA,IAsCI;EACAC,WAAW,GAAI,YAAY;IACzB,IAAInI,UAAJ,EAAgB;MACd,OAAO,YAAW;QAAE,OAAOI,MAAM,IAAI,CAAC0B,IAAX,GAAkB2E,UAAU,GAAG,CAA/B,GAAmCU,IAAI,CAACiB,IAAL,CAAU,CAAEP,aAAF,IAAmB7H,UAAU,GAAGF,MAAhC,CAAV,CAA1C;MAA+F,CAAnH;IACD,CAFD,MAEO,IAAIG,SAAJ,EAAe;MACpB,OAAO,YAAW;QAChB,KAAK,IAAIoI,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGV,aAApB,EAAmCU,CAAC,EAApC,EAAwC;UACtC,IAAId,cAAc,CAACc,CAAD,CAAd,IAAqB,CAAER,aAA3B,EAA0C;YAAE,OAAOQ,CAAP;UAAW;QACxD;MACF,CAJD;IAKD,CANM,MAMA;MACL,OAAO,YAAW;QAChB,IAAIjI,MAAM,IAAIsF,QAAV,IAAsB,CAAC5D,IAA3B,EAAiC;UAC/B,OAAO2E,UAAU,GAAG,CAApB;QACD,CAFD,MAEO;UACL,OAAO3E,IAAI,IAAI4D,QAAR,GAAmByB,IAAI,CAACmB,GAAL,CAAS,CAAT,EAAYX,aAAa,GAAGR,IAAI,CAACiB,IAAL,CAAUvI,KAAV,CAA5B,CAAnB,GAAmE8H,aAAa,GAAG,CAA1F;QACD;MACF,CAND;IAOD;EACF,CAlBa,EAvClB;EAAA,IA0DIY,KAAK,GAAGC,aAAa,CAACxB,SAAS,CAAC,YAAD,CAAV,CA1DzB;EAAA,IA2DIyB,WAAW,GAAGF,KA3DlB;EAAA,IA4DIG,YAAY,GAAGC,eAAe,EA5DlC;EAAA,IA6DIC,QAAQ,GAAG,CA7Df;EAAA,IA8DIC,QAAQ,GAAG,CAAC5I,SAAD,GAAakI,WAAW,EAAxB,GAA6B,IA9D5C;EAAA,IA+DI;EACAW,WAhEJ;EAAA,IAiEItG,wBAAwB,GAAG/C,OAAO,CAAC+C,wBAjEvC;EAAA,IAkEIF,UAAU,GAAG7C,OAAO,CAAC6C,UAlEzB;EAAA,IAmEIyG,qBAAqB,GAAGzG,UAAU,GAAG,GAAH,GAAS,IAnE/C;EAAA,IAoEI0G,OAAO,GAAG,KApEd;EAAA,IAqEIrG,MAAM,GAAGlD,OAAO,CAACkD,MArErB;EAAA,IAsEIsG,MAAM,GAAG,IAAI3J,MAAJ,EAtEb;EAAA,IAuEI;EACA4J,mBAAmB,GAAG,qBAAqBzJ,OAAO,CAACE,IAxEvD;EAAA,IAyEIwJ,OAAO,GAAGzJ,SAAS,CAAC0J,EAAV,IAAgBzL,UAAU,EAzExC;EAAA,IA0EI0L,OAAO,GAAGrC,SAAS,CAAC,SAAD,CA1EvB;EAAA,IA2EIsC,QAAQ,GAAG,KA3Ef;EAAA,IA4EI5G,SAAS,GAAGjD,OAAO,CAACiD,SA5ExB;EAAA,IA6EI6G,MAAM,GAAG7G,SAAS,IAAI,CAACzC,SAAd,GAA0BuJ,SAAS,EAAnC,GAAwC,KA7ErD;EAAA,IA8EIC,MAAM,GAAG,KA9Eb;EAAA,IA+EIC,cAAc,GAAG;IACf,SAASC,eADM;IAEf,WAAWC;EAFI,CA/ErB;EAAA,IAmFIC,SAAS,GAAG;IACV,SAASC,UADC;IAEV,WAAWC;EAFD,CAnFhB;EAAA,IAuFIC,WAAW,GAAG;IACZ,aAAaC,cADD;IAEZ,YAAYC;EAFA,CAvFlB;EAAA,IA2FIC,eAAe,GAAG;IAAC,oBAAoBC;EAArB,CA3FtB;EAAA,IA4FIC,mBAAmB,GAAG;IAAC,WAAWC;EAAZ,CA5F1B;EAAA,IA6FIC,WAAW,GAAG;IACZ,cAAcC,UADF;IAEZ,aAAaC,SAFD;IAGZ,YAAYC,QAHA;IAIZ,eAAeA;EAJH,CA7FlB;EAAA,IAkGOC,UAAU,GAAG;IACd,aAAaH,UADC;IAEd,aAAaC,SAFC;IAGd,WAAWC,QAHG;IAId,cAAcA;EAJA,CAlGpB;EAAA,IAwGIE,WAAW,GAAGC,SAAS,CAAC,UAAD,CAxG3B;EAAA,IAyGIC,MAAM,GAAGD,SAAS,CAAC,KAAD,CAzGtB;EAAA,IA0GI/J,eAAe,GAAGb,SAAS,GAAG,IAAH,GAAUR,OAAO,CAACqB,eA1GjD;EAAA,IA2GIiK,WAAW,GAAGF,SAAS,CAAC,UAAD,CA3G3B;EAAA,IA4GIG,QAAQ,GAAGH,SAAS,CAAC,OAAD,CA5GxB;EAAA,IA6GII,YAAY,GAAGJ,SAAS,CAAC,WAAD,CA7G5B;EAAA,IA8GIK,gBAAgB,GAAG,kBA9GvB;EAAA,IA+GIC,gBAAgB,GAAG,kBA/GvB;EAAA,IAgHIC,gBAAgB,GAAG,cAhHvB;EAAA,IAiHIC,SAAS,GAAG;IACV,QAAQC,WADE;IAEV,SAASC;EAFC,CAjHhB;EAAA,IAqHIC,YArHJ;EAAA,IAsHIC,iBAtHJ;EAAA,IAuHIC,aAAa,GAAGjM,OAAO,CAACgD,oBAAR,KAAiC,OAAjC,GAA2C,IAA3C,GAAkD,KAvHtE,CA9MiC,CAuUjC;;;EACA,IAAImI,WAAJ,EAAiB;IACf,IAAIpK,iBAAiB,GAAGf,OAAO,CAACe,iBAAhC;IAAA,IACImL,qBAAqB,GAAGlM,OAAO,CAACe,iBAAR,GAA4Bf,OAAO,CAACe,iBAAR,CAA0B+F,SAAtD,GAAkE,EAD9F;IAAA,IAEI9F,UAAU,GAAGhB,OAAO,CAACgB,UAFzB;IAAA,IAGIC,UAAU,GAAGjB,OAAO,CAACiB,UAHzB;IAAA,IAIIkL,cAAc,GAAGnM,OAAO,CAACgB,UAAR,GAAqBhB,OAAO,CAACgB,UAAR,CAAmB8F,SAAxC,GAAoD,EAJzE;IAAA,IAKIsF,cAAc,GAAGpM,OAAO,CAACiB,UAAR,GAAqBjB,OAAO,CAACiB,UAAR,CAAmB6F,SAAxC,GAAoD,EALzE;IAAA,IAMIuF,YANJ;IAAA,IAOIC,YAPJ;EAQD,CAjVgC,CAmVjC;;;EACA,IAAIjB,MAAJ,EAAY;IACV,IAAIjK,YAAY,GAAGpB,OAAO,CAACoB,YAA3B;IAAA,IACImL,gBAAgB,GAAGvM,OAAO,CAACoB,YAAR,GAAuBpB,OAAO,CAACoB,YAAR,CAAqB0F,SAA5C,GAAwD,EAD/E;IAAA,IAEI0F,QAFJ;IAAA,IAGIC,KAAK,GAAGjM,SAAS,GAAGwG,UAAH,GAAgB0F,QAAQ,EAH7C;IAAA,IAIIC,WAAW,GAAG,CAJlB;IAAA,IAKIC,UAAU,GAAG,CAAC,CALlB;IAAA,IAMIC,eAAe,GAAGC,kBAAkB,EANxC;IAAA,IAOIC,qBAAqB,GAAGF,eAP5B;IAAA,IAQIG,cAAc,GAAG,gBARrB;IAAA,IASIC,MAAM,GAAG,gBATb;IAAA,IAUIC,aAAa,GAAG,kBAVpB;EAWD,CAhWgC,CAkWjC;;;EACA,IAAI5B,WAAJ,EAAiB;IACf,IAAI3J,iBAAiB,GAAG3B,OAAO,CAAC2B,iBAAR,KAA8B,SAA9B,GAA0C,CAA1C,GAA8C,CAAC,CAAvE;IAAA,IACIG,cAAc,GAAG9B,OAAO,CAAC8B,cAD7B;IAAA,IAEIqL,kBAAkB,GAAGnN,OAAO,CAAC8B,cAAR,GAAyB9B,OAAO,CAAC8B,cAAR,CAAuBgF,SAAhD,GAA4D,EAFrF;IAAA,IAGIsG,mBAAmB,GAAG,CAAC,sCAAD,EAAyC,mBAAzC,CAH1B;IAAA,IAIIC,aAJJ;IAAA,IAKIC,SALJ;IAAA,IAMIC,mBANJ;IAAA,IAOIC,kBAPJ;IAAA,IAQIC,wBARJ;EASD;;EAED,IAAIlC,QAAQ,IAAIC,YAAhB,EAA8B;IAC5B,IAAIkC,YAAY,GAAG,EAAnB;IAAA,IACIC,YAAY,GAAG,EADnB;IAAA,IAEIC,aAFJ;IAAA,IAGIC,IAHJ;IAAA,IAIIC,IAJJ;IAAA,IAKIC,QAAQ,GAAG,KALf;IAAA,IAMIC,QANJ;IAAA,IAOIC,OAAO,GAAG1H,UAAU,GAClB,UAAS2H,CAAT,EAAYC,CAAZ,EAAe;MAAE,OAAOD,CAAC,CAACE,CAAF,GAAMD,CAAC,CAACC,CAAf;IAAmB,CADlB,GAElB,UAASF,CAAT,EAAYC,CAAZ,EAAe;MAAE,OAAOD,CAAC,CAACG,CAAF,GAAMF,CAAC,CAACE,CAAf;IAAmB,CAT1C;EAUD,CA1XgC,CA4XjC;;;EACA,IAAI,CAAC7N,SAAL,EAAgB;IAAE8N,wBAAwB,CAAC1E,OAAO,IAAIE,MAAZ,CAAxB;EAA8C;;EAEhE,IAAIhF,SAAJ,EAAe;IACbyD,aAAa,GAAGzD,SAAhB;IACA0D,eAAe,GAAG,WAAlB;;IAEA,IAAIzD,eAAJ,EAAqB;MACnByD,eAAe,IAAIjC,UAAU,GAAG,KAAH,GAAW,UAAxC;MACAkC,gBAAgB,GAAGlC,UAAU,GAAG,aAAH,GAAmB,QAAhD;IACD,CAHD,MAGO;MACLiC,eAAe,IAAIjC,UAAU,GAAG,IAAH,GAAU,IAAvC;MACAkC,gBAAgB,GAAG,GAAnB;IACD;EAEF;;EAED,IAAIxC,QAAJ,EAAc;IAAEhG,SAAS,CAACqH,SAAV,GAAsBrH,SAAS,CAACqH,SAAV,CAAoBiH,OAApB,CAA4B,WAA5B,EAAyC,EAAzC,CAAtB;EAAqE;;EACrFC,aAAa;EACbC,SAAS;EACTC,mBAAmB,GAhZc,CAkZjC;;EACA,SAASJ,wBAAT,CAAmCK,SAAnC,EAA8C;IAC5C,IAAIA,SAAJ,EAAe;MACb/N,QAAQ,GAAGM,GAAG,GAAGyB,KAAK,GAAGC,SAAS,GAAGtB,SAAS,GAAGE,QAAQ,GAAGK,kBAAkB,GAAGG,yBAAyB,GAAG,KAA7G;IACD;EACF;;EAED,SAASkH,eAAT,GAA4B;IAC1B,IAAI0F,GAAG,GAAG3I,QAAQ,GAAG6C,KAAK,GAAGd,UAAX,GAAwBc,KAA1C;;IACA,OAAO8F,GAAG,GAAG,CAAb,EAAgB;MAAEA,GAAG,IAAI5H,UAAP;IAAoB;;IACtC,OAAO4H,GAAG,GAAC5H,UAAJ,GAAiB,CAAxB;EACD;;EAED,SAAS+B,aAAT,CAAwB8F,GAAxB,EAA6B;IAC3BA,GAAG,GAAGA,GAAG,GAAGnH,IAAI,CAACmB,GAAL,CAAS,CAAT,EAAYnB,IAAI,CAACoH,GAAL,CAASzM,IAAI,GAAG2E,UAAU,GAAG,CAAhB,GAAoBA,UAAU,GAAG5G,KAA9C,EAAqDyO,GAArD,CAAZ,CAAH,GAA4E,CAArF;IACA,OAAO5I,QAAQ,GAAG4I,GAAG,GAAG7G,UAAT,GAAsB6G,GAArC;EACD;;EAED,SAASE,WAAT,CAAsBnG,CAAtB,EAAyB;IACvB,IAAIA,CAAC,IAAI,IAAT,EAAe;MAAEA,CAAC,GAAGE,KAAJ;IAAY;;IAE7B,IAAI7C,QAAJ,EAAc;MAAE2C,CAAC,IAAIZ,UAAL;IAAkB;;IAClC,OAAOY,CAAC,GAAG,CAAX,EAAc;MAAEA,CAAC,IAAI5B,UAAL;IAAkB;;IAElC,OAAOU,IAAI,CAACC,KAAL,CAAWiB,CAAC,GAAC5B,UAAb,CAAP;EACD;;EAED,SAAS8F,kBAAT,GAA+B;IAC7B,IAAIkC,QAAQ,GAAGD,WAAW,EAA1B;IAAA,IACIE,MADJ;IAGAA,MAAM,GAAG5N,eAAe,GAAG2N,QAAH,GACtBzO,UAAU,IAAIC,SAAd,GAA0BkH,IAAI,CAACiB,IAAL,CAAU,CAACqG,QAAQ,GAAG,CAAZ,IAAiBvC,KAAjB,GAAyBzF,UAAzB,GAAsC,CAAhD,CAA1B,GACIU,IAAI,CAACC,KAAL,CAAWqH,QAAQ,GAAG5O,KAAtB,CAFN,CAJ6B,CAQ7B;;IACA,IAAI,CAACiC,IAAD,IAAS4D,QAAT,IAAqB6C,KAAK,KAAKM,QAAnC,EAA6C;MAAE6F,MAAM,GAAGxC,KAAK,GAAG,CAAjB;IAAqB;;IAEpE,OAAOwC,MAAP;EACD;;EAED,SAASC,WAAT,GAAwB;IACtB;IACA,IAAI1O,SAAS,IAAKD,UAAU,IAAI,CAACE,WAAjC,EAA+C;MAC7C,OAAOuG,UAAU,GAAG,CAApB,CAD6C,CAE/C;IACC,CAHD,MAGO;MACL,IAAIrB,GAAG,GAAGpF,UAAU,GAAG,YAAH,GAAkB,OAAtC;MAAA,IACI4O,GAAG,GAAG,EADV;;MAGA,IAAI5O,UAAU,IAAIP,OAAO,CAAC2F,GAAD,CAAP,GAAeqB,UAAjC,EAA6C;QAAEmI,GAAG,CAAC3R,IAAJ,CAASwC,OAAO,CAAC2F,GAAD,CAAhB;MAAyB;;MAExE,IAAInD,UAAJ,EAAgB;QACd,KAAK,IAAI4M,EAAT,IAAe5M,UAAf,EAA2B;UACzB,IAAIoM,GAAG,GAAGpM,UAAU,CAAC4M,EAAD,CAAV,CAAezJ,GAAf,CAAV;;UACA,IAAIiJ,GAAG,KAAKrO,UAAU,IAAIqO,GAAG,GAAG5H,UAAzB,CAAP,EAA6C;YAAEmI,GAAG,CAAC3R,IAAJ,CAASoR,GAAT;UAAgB;QAChE;MACF;;MAED,IAAI,CAACO,GAAG,CAACnJ,MAAT,EAAiB;QAAEmJ,GAAG,CAAC3R,IAAJ,CAAS,CAAT;MAAc;;MAEjC,OAAOkK,IAAI,CAACiB,IAAL,CAAUpI,UAAU,GAAGE,WAAW,GAAGiH,IAAI,CAACoH,GAAL,CAASO,KAAT,CAAe,IAAf,EAAqBF,GAArB,CAAjB,GAA6CzH,IAAI,CAACmB,GAAL,CAASwG,KAAT,CAAe,IAAf,EAAqBF,GAArB,CAAjE,CAAP;IACD;EACF;;EAED,SAASlH,oBAAT,GAAiC;IAC/B,IAAIqH,QAAQ,GAAGJ,WAAW,EAA1B;IAAA,IACID,MAAM,GAAGhJ,QAAQ,GAAGyB,IAAI,CAACiB,IAAL,CAAU,CAAC2G,QAAQ,GAAG,CAAX,GAAetI,UAAhB,IAA4B,CAAtC,CAAH,GAA+CsI,QAAQ,GAAG,CAAX,GAAetI,UADnF;IAEAiI,MAAM,GAAGvH,IAAI,CAACmB,GAAL,CAASyG,QAAT,EAAmBL,MAAnB,CAAT;IAEA,OAAO7D,SAAS,CAAC,aAAD,CAAT,GAA2B6D,MAAM,GAAG,CAApC,GAAwCA,MAA/C;EACD;;EAED,SAAS9H,cAAT,GAA2B;IACzB,OAAO5D,GAAG,CAACgM,UAAJ,IAAkBlM,GAAG,CAACmM,eAAJ,CAAoBC,WAAtC,IAAqDpM,GAAG,CAACqM,IAAJ,CAASD,WAArE;EACD;;EAED,SAASE,iBAAT,CAA4BC,GAA5B,EAAiC;IAC/B,OAAOA,GAAG,KAAK,KAAR,GAAgB,YAAhB,GAA+B,WAAtC;EACD;;EAED,SAASC,cAAT,CAAyBjK,EAAzB,EAA6B;IAC3B,IAAIA,EAAE,IAAI,IAAV,EAAgB;MAAE;IAAS;;IAC3B,IAAIkK,GAAG,GAAGzM,GAAG,CAACoD,aAAJ,CAAkB,KAAlB,CAAV;IAAA,IAAoCsJ,IAApC;IAAA,IAA0CC,KAA1C;IACApK,EAAE,CAACqK,WAAH,CAAeH,GAAf;IACAC,IAAI,GAAGD,GAAG,CAACI,qBAAJ,EAAP;IACAF,KAAK,GAAGD,IAAI,CAACI,KAAL,GAAaJ,IAAI,CAACK,IAA1B;IACAN,GAAG,CAACpS,MAAJ;IACA,OAAOsS,KAAK,IAAIH,cAAc,CAACjK,EAAE,CAACjI,UAAJ,CAA9B;EACD;;EAED,SAAS8J,gBAAT,GAA6B;IAC3B,IAAI4I,GAAG,GAAG/P,WAAW,GAAGA,WAAW,GAAG,CAAd,GAAkBD,MAArB,GAA8B,CAAnD;IACA,OAAOwP,cAAc,CAACjJ,eAAD,CAAd,GAAkCyJ,GAAzC;EACD;;EAED,SAASjF,SAAT,CAAoB1G,IAApB,EAA0B;IACxB,IAAI1E,OAAO,CAAC0E,IAAD,CAAX,EAAmB;MACjB,OAAO,IAAP;IACD,CAFD,MAEO;MACL,IAAIlC,UAAJ,EAAgB;QACd,KAAK,IAAI4M,EAAT,IAAe5M,UAAf,EAA2B;UACzB,IAAIA,UAAU,CAAC4M,EAAD,CAAV,CAAe1K,IAAf,CAAJ,EAA0B;YAAE,OAAO,IAAP;UAAc;QAC3C;MACF;;MACD,OAAO,KAAP;IACD;EACF,CA7fgC,CA+fjC;EACA;EACA;EACA;;;EACA,SAAS6C,SAAT,CAAoB7C,IAApB,EAA0B4L,EAA1B,EAA8B;IAC5B,IAAIA,EAAE,IAAI,IAAV,EAAgB;MAAEA,EAAE,GAAGpJ,WAAL;IAAmB;;IAErC,IAAIxC,IAAI,KAAK,OAAT,IAAoBnE,UAAxB,EAAoC;MAClC,OAAOmH,IAAI,CAACC,KAAL,CAAW,CAACH,QAAQ,GAAGnH,MAAZ,KAAuBE,UAAU,GAAGF,MAApC,CAAX,KAA2D,CAAlE;IAED,CAHD,MAGO;MACL,IAAI4O,MAAM,GAAGjP,OAAO,CAAC0E,IAAD,CAApB;;MAEA,IAAIlC,UAAJ,EAAgB;QACd,KAAK,IAAI4M,EAAT,IAAe5M,UAAf,EAA2B;UACzB;UACA,IAAI8N,EAAE,IAAIC,QAAQ,CAACnB,EAAD,CAAlB,EAAwB;YACtB,IAAI1K,IAAI,IAAIlC,UAAU,CAAC4M,EAAD,CAAtB,EAA4B;cAAEH,MAAM,GAAGzM,UAAU,CAAC4M,EAAD,CAAV,CAAe1K,IAAf,CAAT;YAAgC;UAC/D;QACF;MACF;;MAED,IAAIA,IAAI,KAAK,SAAT,IAAsBuK,MAAM,KAAK,MAArC,EAA6C;QAAEA,MAAM,GAAG1H,SAAS,CAAC,OAAD,CAAlB;MAA8B;;MAC7E,IAAI,CAACtB,QAAD,KAAcvB,IAAI,KAAK,SAAT,IAAsBA,IAAI,KAAK,OAA7C,CAAJ,EAA2D;QAAEuK,MAAM,GAAGvH,IAAI,CAACC,KAAL,CAAWsH,MAAX,CAAT;MAA8B;;MAE3F,OAAOA,MAAP;IACD;EACF;;EAED,SAASuB,kBAAT,CAA6B5H,CAA7B,EAAgC;IAC9B,OAAOjE,IAAI,GACTA,IAAI,GAAG,GAAP,GAAaiE,CAAC,GAAG,GAAjB,GAAuB,MAAvB,GAAgCV,aAAhC,GAAgD,GADvC,GAETU,CAAC,GAAG,GAAJ,GAAUV,aAAV,GAA0B,GAF5B;EAGD;;EAED,SAASuI,qBAAT,CAAgCC,cAAhC,EAAgDC,SAAhD,EAA2DC,aAA3D,EAA0EC,QAA1E,EAAoFC,YAApF,EAAkG;IAChG,IAAInL,GAAG,GAAG,EAAV;;IAEA,IAAI+K,cAAc,KAAKK,SAAvB,EAAkC;MAChC,IAAIV,GAAG,GAAGK,cAAV;;MACA,IAAIC,SAAJ,EAAe;QAAEN,GAAG,IAAIM,SAAP;MAAmB;;MACpChL,GAAG,GAAGY,UAAU,GACd,eAAe8J,GAAf,GAAqB,OAArB,GAA+BK,cAA/B,GAAgD,KADlC,GAEd,aAAaA,cAAb,GAA8B,OAA9B,GAAwCL,GAAxC,GAA8C,OAFhD;IAGD,CAND,MAMO,IAAIM,SAAS,IAAI,CAACC,aAAlB,EAAiC;MACtC,IAAII,aAAa,GAAG,MAAML,SAAN,GAAkB,IAAtC;MAAA,IACIM,GAAG,GAAG1K,UAAU,GAAGyK,aAAa,GAAG,MAAnB,GAA4B,OAAOA,aAAP,GAAuB,IADvE;MAEArL,GAAG,GAAG,eAAesL,GAAf,GAAqB,GAA3B;IACD;;IAED,IAAI,CAAChL,QAAD,IAAa6K,YAAb,IAA6B9L,kBAA7B,IAAmD6L,QAAvD,EAAiE;MAAElL,GAAG,IAAIuL,0BAA0B,CAACL,QAAD,CAAjC;IAA8C;;IACjH,OAAOlL,GAAP;EACD;;EAED,SAASwL,iBAAT,CAA4BP,aAA5B,EAA2CD,SAA3C,EAAsDS,QAAtD,EAAgE;IAC9D,IAAIR,aAAJ,EAAmB;MACjB,OAAO,CAACA,aAAa,GAAGD,SAAjB,IAA8BzI,aAA9B,GAA8C,IAArD;IACD,CAFD,MAEO;MACL,OAAOvD,IAAI,GACTA,IAAI,GAAG,GAAP,GAAauD,aAAa,GAAG,GAA7B,GAAmC,MAAnC,GAA4CkJ,QAA5C,GAAuD,GAD9C,GAETlJ,aAAa,GAAG,GAAhB,GAAsBkJ,QAAtB,GAAiC,GAFnC;IAGD;EACF;;EAED,SAASC,kBAAT,CAA6BT,aAA7B,EAA4CD,SAA5C,EAAuDS,QAAvD,EAAiE;IAC/D,IAAIpB,KAAJ;;IAEA,IAAIY,aAAJ,EAAmB;MACjBZ,KAAK,GAAIY,aAAa,GAAGD,SAAjB,GAA8B,IAAtC;IACD,CAFD,MAEO;MACL,IAAI,CAAC1K,QAAL,EAAe;QAAEmL,QAAQ,GAAG1J,IAAI,CAACC,KAAL,CAAWyJ,QAAX,CAAX;MAAkC;;MACnD,IAAIE,QAAQ,GAAGrL,QAAQ,GAAGiC,aAAH,GAAmBkJ,QAA1C;MACApB,KAAK,GAAGrL,IAAI,GACVA,IAAI,GAAG,UAAP,GAAoB2M,QAApB,GAA+B,GADrB,GAEV,MAAMA,QAAN,GAAiB,GAFnB;IAGD;;IAEDtB,KAAK,GAAG,WAAWA,KAAnB,CAb+D,CAe/D;;IACA,OAAOlN,MAAM,KAAK,OAAX,GAAqBkN,KAAK,GAAG,GAA7B,GAAmCA,KAAK,GAAG,cAAlD;EACD;;EAED,SAASuB,mBAAT,CAA8BZ,SAA9B,EAAyC;IACvC,IAAIhL,GAAG,GAAG,EAAV,CADuC,CAGvC;IACA;;IACA,IAAIgL,SAAS,KAAK,KAAlB,EAAyB;MACvB,IAAIa,IAAI,GAAGjL,UAAU,GAAG,UAAH,GAAgB,SAArC;MAAA,IACI0K,GAAG,GAAG1K,UAAU,GAAG,OAAH,GAAa,QADjC;MAEAZ,GAAG,GAAG6L,IAAI,GAAIP,GAAR,GAAc,IAAd,GAAqBN,SAArB,GAAiC,KAAvC;IACD;;IAED,OAAOhL,GAAP;EACD;;EAED,SAAS8L,YAAT,CAAuBrU,IAAvB,EAA6BsU,GAA7B,EAAkC;IAChC,IAAIC,MAAM,GAAGvU,IAAI,CAACwU,SAAL,CAAe,CAAf,EAAkBxU,IAAI,CAAC4I,MAAL,GAAc0L,GAAhC,EAAqCG,WAArC,EAAb;;IACA,IAAIF,MAAJ,EAAY;MAAEA,MAAM,GAAG,MAAMA,MAAN,GAAe,GAAxB;IAA8B;;IAE5C,OAAOA,MAAP;EACD;;EAED,SAAST,0BAAT,CAAqC3P,KAArC,EAA4C;IAC1C,OAAOkQ,YAAY,CAACzM,kBAAD,EAAqB,EAArB,CAAZ,GAAuC,sBAAvC,GAAgEzD,KAAK,GAAG,IAAxE,GAA+E,IAAtF;EACD;;EAED,SAASuQ,yBAAT,CAAoCvQ,KAApC,EAA2C;IACzC,OAAOkQ,YAAY,CAACvM,iBAAD,EAAoB,EAApB,CAAZ,GAAsC,qBAAtC,GAA8D3D,KAAK,GAAG,IAAtE,GAA6E,IAApF;EACD;;EAED,SAASiN,aAAT,GAA0B;IACxB,IAAIuD,UAAU,GAAG,WAAjB;IAAA,IACIC,UAAU,GAAG,WADjB;IAAA,IAEIC,SAAS,GAAG7G,SAAS,CAAC,QAAD,CAFzB;IAIA5E,YAAY,CAACc,SAAb,GAAyByK,UAAzB;IACArL,YAAY,CAACY,SAAb,GAAyB0K,UAAzB;IACAxL,YAAY,CAACmD,EAAb,GAAkBD,OAAO,GAAG,KAA5B;IACAhD,YAAY,CAACiD,EAAb,GAAkBD,OAAO,GAAG,KAA5B,CARwB,CAUxB;;IACA,IAAIzJ,SAAS,CAAC0J,EAAV,KAAiB,EAArB,EAAyB;MAAE1J,SAAS,CAAC0J,EAAV,GAAeD,OAAf;IAAyB;;IACpDD,mBAAmB,IAAI7E,gBAAgB,IAAIpE,SAApB,GAAgC,eAAhC,GAAkD,kBAAzE;IACAiJ,mBAAmB,IAAI9E,IAAI,GAAG,WAAH,GAAiB,cAA5C;;IACA,IAAInE,SAAJ,EAAe;MAAEiJ,mBAAmB,IAAI,gBAAvB;IAA0C;;IAC3DA,mBAAmB,IAAI,UAAUzJ,OAAO,CAACG,IAAzC;IACAF,SAAS,CAACqH,SAAV,IAAuBmC,mBAAvB,CAhBwB,CAkBxB;;IACA,IAAIxD,QAAJ,EAAc;MACZU,aAAa,GAAGtD,GAAG,CAACoD,aAAJ,CAAkB,KAAlB,CAAhB;MACAE,aAAa,CAACgD,EAAd,GAAmBD,OAAO,GAAG,KAA7B;MACA/C,aAAa,CAACW,SAAd,GAA0B,SAA1B;MAEAd,YAAY,CAACyJ,WAAb,CAAyBtJ,aAAzB;MACAA,aAAa,CAACsJ,WAAd,CAA0BvJ,YAA1B;IACD,CAPD,MAOO;MACLF,YAAY,CAACyJ,WAAb,CAAyBvJ,YAAzB;IACD;;IAED,IAAInE,UAAJ,EAAgB;MACd,IAAI2P,EAAE,GAAGvL,aAAa,GAAGA,aAAH,GAAmBD,YAAzC;MACAwL,EAAE,CAAC5K,SAAH,IAAgB,SAAhB;IACD;;IAEDV,eAAe,CAACuL,YAAhB,CAA6B3L,YAA7B,EAA2CvG,SAA3C;IACAyG,YAAY,CAACuJ,WAAb,CAAyBhQ,SAAzB,EApCwB,CAsCxB;IACA;;IACArB,OAAO,CAACmI,UAAD,EAAa,UAASrC,IAAT,EAAekE,CAAf,EAAkB;MACpC9J,QAAQ,CAAC4F,IAAD,EAAO,UAAP,CAAR;;MACA,IAAI,CAACA,IAAI,CAACiF,EAAV,EAAc;QAAEjF,IAAI,CAACiF,EAAL,GAAUD,OAAO,GAAG,OAAV,GAAoBd,CAA9B;MAAkC;;MAClD,IAAI,CAAC3C,QAAD,IAAa9D,aAAjB,EAAgC;QAAErD,QAAQ,CAAC4F,IAAD,EAAOvC,aAAP,CAAR;MAAgC;;MAClEjD,QAAQ,CAACwF,IAAD,EAAO;QACb,eAAe,MADF;QAEb,YAAY;MAFC,CAAP,CAAR;IAID,CARM,CAAP,CAxCwB,CAkDxB;IACA;IACA;;IACA,IAAIsD,UAAJ,EAAgB;MACd,IAAIoK,cAAc,GAAG/O,GAAG,CAACgP,sBAAJ,EAArB;MAAA,IACIC,aAAa,GAAGjP,GAAG,CAACgP,sBAAJ,EADpB;;MAGA,KAAK,IAAIE,CAAC,GAAGvK,UAAb,EAAyBuK,CAAC,EAA1B,GAA+B;QAC7B,IAAIb,GAAG,GAAGa,CAAC,GAACvL,UAAZ;QAAA,IACIwL,UAAU,GAAGzL,UAAU,CAAC2K,GAAD,CAAV,CAAgBe,SAAhB,CAA0B,IAA1B,CADjB;QAEA3T,QAAQ,CAAC0T,UAAD,EAAa9G,gBAAb,CAAR;QACAvM,WAAW,CAACqT,UAAD,EAAa,IAAb,CAAX;QACAF,aAAa,CAACH,YAAd,CAA2BK,UAA3B,EAAuCF,aAAa,CAACI,UAArD;;QAEA,IAAIzM,QAAJ,EAAc;UACZ,IAAI0M,SAAS,GAAG5L,UAAU,CAACC,UAAU,GAAG,CAAb,GAAiB0K,GAAlB,CAAV,CAAiCe,SAAjC,CAA2C,IAA3C,CAAhB;UACA3T,QAAQ,CAAC6T,SAAD,EAAYjH,gBAAZ,CAAR;UACAvM,WAAW,CAACwT,SAAD,EAAY,IAAZ,CAAX;UACAP,cAAc,CAACnC,WAAf,CAA2B0C,SAA3B;QACD;MACF;;MAED1S,SAAS,CAACkS,YAAV,CAAuBC,cAAvB,EAAuCnS,SAAS,CAACyS,UAAjD;MACAzS,SAAS,CAACgQ,WAAV,CAAsBqC,aAAtB;MACAvL,UAAU,GAAG9G,SAAS,CAAC8F,QAAvB;IACD;EAEF;;EAED,SAAS2I,mBAAT,GAAgC;IAC9B;IACA,IAAItD,SAAS,CAAC,YAAD,CAAT,IAA2B5K,SAA3B,IAAwC,CAAC+F,UAA7C,EAAyD;MACvD,IAAIqM,IAAI,GAAG3S,SAAS,CAAC4S,gBAAV,CAA2B,KAA3B,CAAX,CADuD,CAGvD;;MACAjU,OAAO,CAACgU,IAAD,EAAO,UAASE,GAAT,EAAc;QAC1B,IAAIC,GAAG,GAAGD,GAAG,CAACC,GAAd;;QAEA,IAAI,CAACtQ,QAAL,EAAe;UACb;UACA,IAAIsQ,GAAG,IAAIA,GAAG,CAACC,OAAJ,CAAY,YAAZ,IAA4B,CAAvC,EAA0C;YACxCF,GAAG,CAACC,GAAJ,GAAU,EAAV;YACApT,SAAS,CAACmT,GAAD,EAAMlH,SAAN,CAAT;YACA9M,QAAQ,CAACgU,GAAD,EAAM,SAAN,CAAR;YAEAA,GAAG,CAACC,GAAJ,GAAUA,GAAV,CALwC,CAM1C;UACC,CAPD,MAOO;YACLE,SAAS,CAACH,GAAD,CAAT;UACD;QACF;MACF,CAhBM,CAAP,CAJuD,CAsBvD;;MACAjV,GAAG,CAAC,YAAU;QAAEqV,eAAe,CAAC9T,iBAAiB,CAACwT,IAAD,CAAlB,EAA0B,YAAW;UAAE7G,YAAY,GAAG,IAAf;QAAsB,CAA7D,CAAf;MAAgF,CAA7F,CAAH,CAvBuD,CAyBvD;;MACA,IAAIX,SAAS,CAAC,YAAD,CAAb,EAA6B;QAAEwH,IAAI,GAAGO,aAAa,CAACrK,KAAD,EAAQpB,IAAI,CAACoH,GAAL,CAAShG,KAAK,GAAG1I,KAAR,GAAgB,CAAzB,EAA4B8H,aAAa,GAAG,CAA5C,CAAR,CAApB;MAA8E;;MAE7GzF,QAAQ,GAAG2Q,6BAA6B,EAAhC,GAAqCvV,GAAG,CAAC,YAAU;QAAEqV,eAAe,CAAC9T,iBAAiB,CAACwT,IAAD,CAAlB,EAA0BQ,6BAA1B,CAAf;MAA0E,CAAvF,CAAhD;IAED,CA9BD,MA8BO;MACL;MACA,IAAInN,QAAJ,EAAc;QAAEoN,0BAA0B;MAAK,CAF1C,CAIL;;;MACAC,SAAS;MACTC,UAAU;IACX;EACF;;EAED,SAASH,6BAAT,GAA0C;IACxC,IAAI5S,SAAS,IAAIwG,UAAU,GAAG,CAA9B,EAAiC;MAC/B;MACA,IAAI0K,GAAG,GAAGrP,IAAI,GAAGyG,KAAH,GAAW9B,UAAU,GAAG,CAAtC;;MAEA,CAAC,SAASwM,sBAAT,GAAkC;QACjC,IAAIpD,IAAI,GAAGrJ,UAAU,CAAC2K,GAAD,CAAV,CAAgBxB,qBAAhB,GAAwCE,IAAnD;QACA,IAAID,KAAK,GAAGpJ,UAAU,CAAC2K,GAAG,GAAG,CAAP,CAAV,CAAoBxB,qBAApB,GAA4CC,KAAxD;QAECzI,IAAI,CAAC+L,GAAL,CAASrD,IAAI,GAAGD,KAAhB,KAA0B,CAA3B,GACEuD,uBAAuB,EADzB,GAEEC,UAAU,CAAC,YAAU;UAAEH,sBAAsB;QAAI,CAAvC,EAAyC,EAAzC,CAFZ;MAGD,CAPD;IASD,CAbD,MAaO;MACLE,uBAAuB;IACxB;EACF;;EAGD,SAASA,uBAAT,GAAoC;IAClC;IACA,IAAI,CAACnN,UAAD,IAAe/F,SAAnB,EAA8B;MAC5BoT,iBAAiB;;MAEjB,IAAIpT,SAAJ,EAAe;QACb4H,aAAa,GAAGC,gBAAgB,EAAhC;;QACA,IAAIpF,SAAJ,EAAe;UAAE6G,MAAM,GAAGC,SAAS,EAAlB;QAAuB;;QACxCX,QAAQ,GAAGV,WAAW,EAAtB,CAHa,CAGa;;QAC1B4F,wBAAwB,CAAC1E,OAAO,IAAIE,MAAZ,CAAxB;MACD,CALD,MAKO;QACL+J,0BAA0B;MAC3B;IACF,CAbiC,CAelC;;;IACA,IAAI5N,QAAJ,EAAc;MAAEoN,0BAA0B;IAAK,CAhBb,CAkBlC;;;IACAC,SAAS;IACTC,UAAU;EACX;;EAED,SAAS9E,SAAT,GAAsB;IACpB;IACA;IACA,IAAI,CAACxI,QAAL,EAAe;MACb,KAAK,IAAI2C,CAAC,GAAGE,KAAR,EAAegL,CAAC,GAAGhL,KAAK,GAAGpB,IAAI,CAACoH,GAAL,CAAS9H,UAAT,EAAqB5G,KAArB,CAAhC,EAA6DwI,CAAC,GAAGkL,CAAjE,EAAoElL,CAAC,EAArE,EAAyE;QACvE,IAAIlE,IAAI,GAAGqC,UAAU,CAAC6B,CAAD,CAArB;QACAlE,IAAI,CAACqP,KAAL,CAAW3D,IAAX,GAAkB,CAACxH,CAAC,GAAGE,KAAL,IAAc,GAAd,GAAoB1I,KAApB,GAA4B,GAA9C;QACAtB,QAAQ,CAAC4F,IAAD,EAAOzC,SAAP,CAAR;QACAlD,WAAW,CAAC2F,IAAD,EAAOvC,aAAP,CAAX;MACD;IACF,CAVmB,CAYpB;IAEA;IAEA;IACA;IACA;IAEA;IACA;IACA;IACA;IAEA;;;IACA,IAAIoE,UAAJ,EAAgB;MACd,IAAI3B,gBAAgB,IAAIpE,SAAxB,EAAmC;QACjCjC,UAAU,CAACsJ,KAAD,EAAQ,MAAM6B,OAAN,GAAgB,cAAxB,EAAwC,eAAenG,GAAG,CAACyQ,gBAAJ,CAAqBjN,UAAU,CAAC,CAAD,CAA/B,EAAoCkN,QAAnD,GAA8D,GAAtG,EAA2GxV,iBAAiB,CAACoJ,KAAD,CAA5H,CAAV;QACAtJ,UAAU,CAACsJ,KAAD,EAAQ,MAAM6B,OAAd,EAAuB,cAAvB,EAAuCjL,iBAAiB,CAACoJ,KAAD,CAAxD,CAAV;MACD,CAHD,MAGO,IAAI5B,QAAJ,EAAc;QACnBrH,OAAO,CAACmI,UAAD,EAAa,UAAUmN,KAAV,EAAiBtL,CAAjB,EAAoB;UACtCsL,KAAK,CAACH,KAAN,CAAYI,UAAZ,GAAyB3D,kBAAkB,CAAC5H,CAAD,CAA3C;QACD,CAFM,CAAP;MAGD;IACF,CAnCmB,CAsCpB;;;IACA,IAAI/D,KAAJ,EAAW;MACT;MACA,IAAIG,kBAAJ,EAAwB;QACtB,IAAIW,GAAG,GAAGgB,aAAa,IAAI3G,OAAO,CAACuC,UAAzB,GAAsC2O,0BAA0B,CAAClR,OAAO,CAACuB,KAAT,CAAhE,GAAkF,EAA5F;QACAhD,UAAU,CAACsJ,KAAD,EAAQ,MAAM6B,OAAN,GAAgB,KAAxB,EAA+B/D,GAA/B,EAAoClH,iBAAiB,CAACoJ,KAAD,CAArD,CAAV;MACD,CALQ,CAOT;;;MACAlC,GAAG,GAAG8K,qBAAqB,CAACzQ,OAAO,CAACM,WAAT,EAAsBN,OAAO,CAACK,MAA9B,EAAsCL,OAAO,CAACO,UAA9C,EAA0DP,OAAO,CAACuB,KAAlE,EAAyEvB,OAAO,CAACuC,UAAjF,CAA3B;MACAhE,UAAU,CAACsJ,KAAD,EAAQ,MAAM6B,OAAN,GAAgB,KAAxB,EAA+B/D,GAA/B,EAAoClH,iBAAiB,CAACoJ,KAAD,CAArD,CAAV,CATS,CAWT;;MACA,IAAI5B,QAAJ,EAAc;QACZN,GAAG,GAAGY,UAAU,IAAI,CAAC/F,SAAf,GAA2B,WAAW2Q,iBAAiB,CAACnR,OAAO,CAACO,UAAT,EAAqBP,OAAO,CAACK,MAA7B,EAAqCL,OAAO,CAACI,KAA7C,CAA5B,GAAkF,GAA7G,GAAmH,EAAzH;;QACA,IAAI4E,kBAAJ,EAAwB;UAAEW,GAAG,IAAIuL,0BAA0B,CAAC3P,KAAD,CAAjC;QAA2C;;QACrEhD,UAAU,CAACsJ,KAAD,EAAQ,MAAM6B,OAAd,EAAuB/D,GAAvB,EAA4BlH,iBAAiB,CAACoJ,KAAD,CAA7C,CAAV;MACD,CAhBQ,CAkBT;;;MACAlC,GAAG,GAAGY,UAAU,IAAI,CAAC/F,SAAf,GAA2B6Q,kBAAkB,CAACrR,OAAO,CAACO,UAAT,EAAqBP,OAAO,CAACK,MAA7B,EAAqCL,OAAO,CAACI,KAA7C,CAA7C,GAAmG,EAAzG;;MACA,IAAIJ,OAAO,CAACK,MAAZ,EAAoB;QAAEsF,GAAG,IAAI4L,mBAAmB,CAACvR,OAAO,CAACK,MAAT,CAA1B;MAA6C,CApB1D,CAqBT;;;MACA,IAAI,CAAC4F,QAAL,EAAe;QACb,IAAIjB,kBAAJ,EAAwB;UAAEW,GAAG,IAAIuL,0BAA0B,CAAC3P,KAAD,CAAjC;QAA2C;;QACrE,IAAI2D,iBAAJ,EAAuB;UAAES,GAAG,IAAImM,yBAAyB,CAACvQ,KAAD,CAAhC;QAA0C;MACpE;;MACD,IAAIoE,GAAJ,EAAS;QAAEpH,UAAU,CAACsJ,KAAD,EAAQ,MAAM6B,OAAN,GAAgB,cAAxB,EAAwC/D,GAAxC,EAA6ClH,iBAAiB,CAACoJ,KAAD,CAA9D,CAAV;MAAmF,CA1BrF,CA4BX;MACA;MACA;MACA;;IACC,CAhCD,MAgCO;MACL;MACAuM,mCAAmC,GAF9B,CAIL;;MACA1N,YAAY,CAACqN,KAAb,CAAmBM,OAAnB,GAA6B5D,qBAAqB,CAACnQ,WAAD,EAAcD,MAAd,EAAsBE,UAAtB,EAAkCgC,UAAlC,CAAlD,CALK,CAOL;;MACA,IAAI0D,QAAQ,IAAIM,UAAZ,IAA0B,CAAC/F,SAA/B,EAA0C;QACxCP,SAAS,CAAC8T,KAAV,CAAgB/D,KAAhB,GAAwBmB,iBAAiB,CAAC5Q,UAAD,EAAaF,MAAb,EAAqBD,KAArB,CAAzC;MACD,CAVI,CAYL;;;MACA,IAAIuF,GAAG,GAAGY,UAAU,IAAI,CAAC/F,SAAf,GAA2B6Q,kBAAkB,CAAC9Q,UAAD,EAAaF,MAAb,EAAqBD,KAArB,CAA7C,GAA2E,EAArF;;MACA,IAAIC,MAAJ,EAAY;QAAEsF,GAAG,IAAI4L,mBAAmB,CAAClR,MAAD,CAA1B;MAAqC,CAd9C,CAgBL;;;MACA,IAAIsF,GAAJ,EAAS;QAAEpH,UAAU,CAACsJ,KAAD,EAAQ,MAAM6B,OAAN,GAAgB,cAAxB,EAAwC/D,GAAxC,EAA6ClH,iBAAiB,CAACoJ,KAAD,CAA9D,CAAV;MAAmF;IAC/F,CAzFmB,CA2FpB;;;IACA,IAAIrF,UAAU,IAAIqC,KAAlB,EAAyB;MACvB,KAAK,IAAIuK,EAAT,IAAe5M,UAAf,EAA2B;QACzB;QACA4M,EAAE,GAAGmB,QAAQ,CAACnB,EAAD,CAAb;QAEA,IAAIkF,IAAI,GAAG9R,UAAU,CAAC4M,EAAD,CAArB;QAAA,IACIzJ,GAAG,GAAG,EADV;QAAA,IAEI4O,gBAAgB,GAAG,EAFvB;QAAA,IAGIC,eAAe,GAAG,EAHtB;QAAA,IAIIC,YAAY,GAAG,EAJnB;QAAA,IAKIC,QAAQ,GAAG,EALf;QAAA,IAMIC,OAAO,GAAG,CAACnU,SAAD,GAAa+G,SAAS,CAAC,OAAD,EAAU6H,EAAV,CAAtB,GAAsC,IANpD;QAAA,IAOIwF,YAAY,GAAGrN,SAAS,CAAC,YAAD,EAAe6H,EAAf,CAP5B;QAAA,IAQIyF,OAAO,GAAGtN,SAAS,CAAC,OAAD,EAAU6H,EAAV,CARvB;QAAA,IASI0F,aAAa,GAAGvN,SAAS,CAAC,aAAD,EAAgB6H,EAAhB,CAT7B;QAAA,IAUI0B,YAAY,GAAGvJ,SAAS,CAAC,YAAD,EAAe6H,EAAf,CAV5B;QAAA,IAWI2F,QAAQ,GAAGxN,SAAS,CAAC,QAAD,EAAW6H,EAAX,CAXxB,CAJyB,CAiBzB;;QACA,IAAIpK,kBAAkB,IAAI2B,aAAtB,IAAuCY,SAAS,CAAC,YAAD,EAAe6H,EAAf,CAAhD,IAAsE,WAAWkF,IAArF,EAA2F;UACzFC,gBAAgB,GAAG,MAAM7K,OAAN,GAAgB,MAAhB,GAAyBwH,0BAA0B,CAAC2D,OAAD,CAAnD,GAA+D,GAAlF;QACD,CApBwB,CAsBzB;;;QACA,IAAI,iBAAiBP,IAAjB,IAAyB,YAAYA,IAAzC,EAA+C;UAC7CE,eAAe,GAAG,MAAM9K,OAAN,GAAgB,MAAhB,GAAyB+G,qBAAqB,CAACqE,aAAD,EAAgBC,QAAhB,EAA0BH,YAA1B,EAAwCC,OAAxC,EAAiD/D,YAAjD,CAA9C,GAA+G,GAAjI;QACD,CAzBwB,CA2BzB;;;QACA,IAAI7K,QAAQ,IAAIM,UAAZ,IAA0B,CAAC/F,SAA3B,KAAyC,gBAAgB8T,IAAhB,IAAwB,WAAWA,IAAnC,IAA4C/T,UAAU,IAAI,YAAY+T,IAA/G,CAAJ,EAA2H;UACzHG,YAAY,GAAG,WAAWtD,iBAAiB,CAACyD,YAAD,EAAeG,QAAf,EAAyBJ,OAAzB,CAA5B,GAAgE,GAA/E;QACD;;QACD,IAAI3P,kBAAkB,IAAI,WAAWsP,IAArC,EAA2C;UACzCG,YAAY,IAAIvD,0BAA0B,CAAC2D,OAAD,CAA1C;QACD;;QACD,IAAIJ,YAAJ,EAAkB;UAChBA,YAAY,GAAG,MAAM/K,OAAN,GAAgB,GAAhB,GAAsB+K,YAAtB,GAAqC,GAApD;QACD,CApCwB,CAsCzB;;;QACA,IAAI,gBAAgBH,IAAhB,IAAyB/T,UAAU,IAAI,YAAY+T,IAAnD,IAA4D,CAACrO,QAAD,IAAa,WAAWqO,IAAxF,EAA8F;UAC5FI,QAAQ,IAAIrD,kBAAkB,CAACuD,YAAD,EAAeG,QAAf,EAAyBJ,OAAzB,CAA9B;QACD;;QACD,IAAI,YAAYL,IAAhB,EAAsB;UACpBI,QAAQ,IAAInD,mBAAmB,CAACwD,QAAD,CAA/B;QACD,CA5CwB,CA6CzB;;;QACA,IAAI,CAAC9O,QAAD,IAAa,WAAWqO,IAA5B,EAAkC;UAChC,IAAItP,kBAAJ,EAAwB;YAAE0P,QAAQ,IAAIxD,0BAA0B,CAAC2D,OAAD,CAAtC;UAAkD;;UAC5E,IAAI3P,iBAAJ,EAAuB;YAAEwP,QAAQ,IAAI5C,yBAAyB,CAAC+C,OAAD,CAArC;UAAiD;QAC3E;;QACD,IAAIH,QAAJ,EAAc;UAAEA,QAAQ,GAAG,MAAMhL,OAAN,GAAgB,eAAhB,GAAkCgL,QAAlC,GAA6C,GAAxD;QAA8D,CAlDrD,CAoDzB;;;QACA/O,GAAG,GAAG4O,gBAAgB,GAAGC,eAAnB,GAAqCC,YAArC,GAAoDC,QAA1D;;QAEA,IAAI/O,GAAJ,EAAS;UACPkC,KAAK,CAACmN,UAAN,CAAiB,wBAAwB5F,EAAE,GAAG,EAA7B,GAAkC,OAAlC,GAA4CzJ,GAA5C,GAAkD,GAAnE,EAAwEkC,KAAK,CAACoN,QAAN,CAAejP,MAAvF;QACD;MACF;IACF;EACF;;EAED,SAASsN,SAAT,GAAsB;IACpB;IACA4B,iBAAiB,GAFG,CAIpB;;IACA1O,YAAY,CAAC2O,kBAAb,CAAgC,YAAhC,EAA8C,uHAAuHC,gBAAgB,EAAvI,GAA4I,cAA5I,GAA6JpO,UAA7J,GAA0K,QAAxN;IACAgF,iBAAiB,GAAGxF,YAAY,CAACX,aAAb,CAA2B,0BAA3B,CAApB,CANoB,CAQpB;;IACA,IAAIyF,WAAJ,EAAiB;MACf,IAAI+J,GAAG,GAAG7T,QAAQ,GAAG,MAAH,GAAY,OAA9B;;MACA,IAAIM,cAAJ,EAAoB;QAClB5C,QAAQ,CAAC4C,cAAD,EAAiB;UAAC,eAAeuT;QAAhB,CAAjB,CAAR;MACD,CAFD,MAEO,IAAIrV,OAAO,CAAC+B,oBAAZ,EAAkC;QACvCyE,YAAY,CAAC2O,kBAAb,CAAgCxF,iBAAiB,CAAC3P,OAAO,CAACyB,gBAAT,CAAjD,EAA6E,wCAAwC4T,GAAxC,GAA8C,IAA9C,GAAqDjI,mBAAmB,CAAC,CAAD,CAAxE,GAA8EiI,GAA9E,GAAoFjI,mBAAmB,CAAC,CAAD,CAAvG,GAA6GxL,YAAY,CAAC,CAAD,CAAzH,GAA+H,WAA5M;QACAE,cAAc,GAAG0E,YAAY,CAACX,aAAb,CAA2B,eAA3B,CAAjB;MACD,CAPc,CASf;;;MACA,IAAI/D,cAAJ,EAAoB;QAClBnC,SAAS,CAACmC,cAAD,EAAiB;UAAC,SAASwT;QAAV,CAAjB,CAAT;MACD;;MAED,IAAI9T,QAAJ,EAAc;QACZ+T,aAAa;;QACb,IAAI1T,kBAAJ,EAAwB;UAAElC,SAAS,CAACM,SAAD,EAAYsK,WAAZ,CAAT;QAAoC;;QAC9D,IAAIvI,yBAAJ,EAA+B;UAAErC,SAAS,CAACM,SAAD,EAAYyK,eAAZ,CAAT;QAAwC;MAC1E;IACF,CA5BmB,CA8BpB;;;IACA,IAAIW,MAAJ,EAAY;MACV,IAAImK,SAAS,GAAG,CAACvP,QAAD,GAAY,CAAZ,GAAgB+B,UAAhC,CADU,CAEV;MACA;;MACA,IAAI5G,YAAJ,EAAkB;QAChBlC,QAAQ,CAACkC,YAAD,EAAe;UAAC,cAAc;QAAf,CAAf,CAAR;QACAoL,QAAQ,GAAGpL,YAAY,CAAC2E,QAAxB;QACAnH,OAAO,CAAC4N,QAAD,EAAW,UAAS9H,IAAT,EAAekE,CAAf,EAAkB;UAClC1J,QAAQ,CAACwF,IAAD,EAAO;YACb,YAAYkE,CADC;YAEb,YAAY,IAFC;YAGb,cAAcqE,MAAM,IAAIrE,CAAC,GAAG,CAAR,CAHP;YAIb,iBAAiBc;UAJJ,CAAP,CAAR;QAMD,CAPM,CAAP,CAHgB,CAYlB;MACC,CAbD,MAaO;QACL,IAAI+L,OAAO,GAAG,EAAd;QAAA,IACIC,SAAS,GAAGrU,eAAe,GAAG,EAAH,GAAQ,sBADvC;;QAEA,KAAK,IAAIuH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG5B,UAApB,EAAgC4B,CAAC,EAAjC,EAAqC;UACnC;UACA6M,OAAO,IAAI,qCAAqC7M,CAArC,GAAwC,iCAAxC,GAA4Ec,OAA5E,GAAsF,IAAtF,GAA6FgM,SAA7F,GAAyG,eAAzG,GAA2HzI,MAA3H,IAAqIrE,CAAC,GAAG,CAAzI,IAA6I,aAAxJ;QACD;;QACD6M,OAAO,GAAG,2DAA2DA,OAA3D,GAAqE,QAA/E;QACAjP,YAAY,CAAC2O,kBAAb,CAAgCxF,iBAAiB,CAAC3P,OAAO,CAACmB,WAAT,CAAjD,EAAwEsU,OAAxE;QAEArU,YAAY,GAAGoF,YAAY,CAACX,aAAb,CAA2B,UAA3B,CAAf;QACA2G,QAAQ,GAAGpL,YAAY,CAAC2E,QAAxB;MACD;;MAED4P,mBAAmB,GA/BT,CAiCV;;MACA,IAAI3Q,kBAAJ,EAAwB;QACtB,IAAI2M,MAAM,GAAG3M,kBAAkB,CAAC4M,SAAnB,CAA6B,CAA7B,EAAgC5M,kBAAkB,CAACgB,MAAnB,GAA4B,EAA5D,EAAgE6L,WAAhE,EAAb;QAAA,IACIlM,GAAG,GAAG,qBAAqBpE,KAAK,GAAG,IAA7B,GAAoC,GAD9C;;QAGA,IAAIoQ,MAAJ,EAAY;UACVhM,GAAG,GAAG,MAAMgM,MAAN,GAAe,GAAf,GAAqBhM,GAA3B;QACD;;QAEDpH,UAAU,CAACsJ,KAAD,EAAQ,qBAAqB6B,OAArB,GAA+B,QAAvC,EAAiD/D,GAAjD,EAAsDlH,iBAAiB,CAACoJ,KAAD,CAAvE,CAAV;MACD;;MAED3I,QAAQ,CAACsN,QAAQ,CAACK,eAAD,CAAT,EAA4B;QAAC,cAAcI,MAAM,IAAIJ,eAAe,GAAG,CAAtB,CAAN,GAAiCK;MAAhD,CAA5B,CAAR;MACA/N,WAAW,CAACqN,QAAQ,CAACK,eAAD,CAAT,EAA4B,UAA5B,CAAX;MACA/N,QAAQ,CAAC0N,QAAQ,CAACK,eAAD,CAAT,EAA4BG,cAA5B,CAAR,CA/CU,CAiDV;;MACArN,SAAS,CAACyB,YAAD,EAAegJ,SAAf,CAAT;IACD,CAlFmB,CAsFpB;;;IACA,IAAIe,WAAJ,EAAiB;MACf,IAAI,CAACpK,iBAAD,KAAuB,CAACC,UAAD,IAAe,CAACC,UAAvC,CAAJ,EAAwD;QACtDuF,YAAY,CAAC2O,kBAAb,CAAgCxF,iBAAiB,CAAC3P,OAAO,CAACa,gBAAT,CAAjD,EAA6E,qJAAqJ6I,OAArJ,GAA8J,IAA9J,GAAqK5I,YAAY,CAAC,CAAD,CAAjL,GAAuL,mFAAvL,GAA6Q4I,OAA7Q,GAAsR,IAAtR,GAA6R5I,YAAY,CAAC,CAAD,CAAzS,GAA+S,iBAA5X;QAEAC,iBAAiB,GAAGyF,YAAY,CAACX,aAAb,CAA2B,eAA3B,CAApB;MACD;;MAED,IAAI,CAAC7E,UAAD,IAAe,CAACC,UAApB,EAAgC;QAC9BD,UAAU,GAAGD,iBAAiB,CAACgF,QAAlB,CAA2B,CAA3B,CAAb;QACA9E,UAAU,GAAGF,iBAAiB,CAACgF,QAAlB,CAA2B,CAA3B,CAAb;MACD;;MAED,IAAI/F,OAAO,CAACe,iBAAZ,EAA+B;QAC7B7B,QAAQ,CAAC6B,iBAAD,EAAoB;UAC1B,cAAc,qBADY;UAE1B,YAAY;QAFc,CAApB,CAAR;MAID;;MAED,IAAIf,OAAO,CAACe,iBAAR,IAA8Bf,OAAO,CAACgB,UAAR,IAAsBhB,OAAO,CAACiB,UAAhE,EAA6E;QAC3E/B,QAAQ,CAAC,CAAC8B,UAAD,EAAaC,UAAb,CAAD,EAA2B;UACjC,iBAAiByI,OADgB;UAEjC,YAAY;QAFqB,CAA3B,CAAR;MAID;;MAED,IAAI1J,OAAO,CAACe,iBAAR,IAA8Bf,OAAO,CAACgB,UAAR,IAAsBhB,OAAO,CAACiB,UAAhE,EAA6E;QAC3E/B,QAAQ,CAAC8B,UAAD,EAAa;UAAC,iBAAkB;QAAnB,CAAb,CAAR;QACA9B,QAAQ,CAAC+B,UAAD,EAAa;UAAC,iBAAkB;QAAnB,CAAb,CAAR;MACD;;MAEDoL,YAAY,GAAGuJ,QAAQ,CAAC5U,UAAD,CAAvB;MACAsL,YAAY,GAAGsJ,QAAQ,CAAC3U,UAAD,CAAvB;MAEA4U,oBAAoB,GAlCL,CAoCf;;MACA,IAAI9U,iBAAJ,EAAuB;QACrBpB,SAAS,CAACoB,iBAAD,EAAoBkJ,cAApB,CAAT;MACD,CAFD,MAEO;QACLtK,SAAS,CAACqB,UAAD,EAAaiJ,cAAb,CAAT;QACAtK,SAAS,CAACsB,UAAD,EAAagJ,cAAb,CAAT;MACD;IACF,CAlImB,CAoIpB;;;IACA6L,SAAS;EACV;;EAED,SAASvC,UAAT,GAAuB;IACrB;IACA,IAAItN,QAAQ,IAAIb,aAAhB,EAA+B;MAC7B,IAAI2Q,GAAG,GAAG,EAAV;MACAA,GAAG,CAAC3Q,aAAD,CAAH,GAAqB4Q,eAArB;MACArW,SAAS,CAACM,SAAD,EAAY8V,GAAZ,CAAT;IACD;;IAED,IAAIpT,KAAJ,EAAW;MAAEhD,SAAS,CAACM,SAAD,EAAY6K,WAAZ,EAAyB9K,OAAO,CAACgD,oBAAjC,CAAT;IAAkE;;IAC/E,IAAIJ,SAAJ,EAAe;MAAEjD,SAAS,CAACM,SAAD,EAAYiL,UAAZ,CAAT;IAAmC;;IACpD,IAAI5J,SAAJ,EAAe;MAAE3B,SAAS,CAAC0D,GAAD,EAAMuH,mBAAN,CAAT;IAAsC;;IAEvD,IAAI9H,MAAM,KAAK,OAAf,EAAwB;MACtB0G,MAAM,CAACyM,EAAP,CAAU,cAAV,EAA0B,YAAY;QACpCC,WAAW;QACX1M,MAAM,CAAC2M,IAAP,CAAY,aAAZ,EAA2BC,IAAI,EAA/B;MACD,CAHD;IAID,CALD,MAKO,IAAI5T,UAAU,IAAIjC,UAAd,IAA4BC,SAA5B,IAAyC+B,UAAzC,IAAuD,CAACgE,UAA5D,EAAwE;MAC7E5G,SAAS,CAAC4D,GAAD,EAAM;QAAC,UAAU8S;MAAX,CAAN,CAAT;IACD;;IAED,IAAI9T,UAAJ,EAAgB;MACd,IAAIO,MAAM,KAAK,OAAf,EAAwB;QACtB0G,MAAM,CAACyM,EAAP,CAAU,aAAV,EAAyBK,YAAzB;MACD,CAFD,MAEO,IAAI,CAAC1M,OAAL,EAAc;QAAE0M,YAAY;MAAK;IACzC;;IAEDC,UAAU;;IACV,IAAI3M,OAAJ,EAAa;MAAE4M,aAAa;IAAK,CAAjC,MAAuC,IAAI1M,MAAJ,EAAY;MAAE2M,YAAY;IAAK;;IAEtEjN,MAAM,CAACyM,EAAP,CAAU,cAAV,EAA0BS,iBAA1B;;IACA,IAAI5T,MAAM,KAAK,OAAf,EAAwB;MAAE0G,MAAM,CAAC2M,IAAP,CAAY,aAAZ,EAA2BC,IAAI,EAA/B;IAAqC;;IAC/D,IAAI,OAAOlT,MAAP,KAAkB,UAAtB,EAAkC;MAAEA,MAAM,CAACkT,IAAI,EAAL,CAAN;IAAiB;;IACrDhP,IAAI,GAAG,IAAP;EACD;;EAED,SAASuP,OAAT,GAAoB;IAClB;IACA9O,KAAK,CAACgC,QAAN,GAAiB,IAAjB;;IACA,IAAIhC,KAAK,CAAC+O,SAAV,EAAqB;MAAE/O,KAAK,CAAC+O,SAAN,CAAgBlZ,MAAhB;IAA2B,CAHhC,CAKlB;;;IACAkC,YAAY,CAAC2D,GAAD,EAAM;MAAC,UAAU8S;IAAX,CAAN,CAAZ,CANkB,CAQlB;;IACA,IAAI/U,SAAJ,EAAe;MAAE1B,YAAY,CAACyD,GAAD,EAAMuH,mBAAN,CAAZ;IAAyC;;IAC1D,IAAI7J,iBAAJ,EAAuB;MAAEnB,YAAY,CAACmB,iBAAD,EAAoBkJ,cAApB,CAAZ;IAAkD;;IAC3E,IAAI7I,YAAJ,EAAkB;MAAExB,YAAY,CAACwB,YAAD,EAAegJ,SAAf,CAAZ;IAAwC,CAX1C,CAalB;;;IACAxK,YAAY,CAACK,SAAD,EAAYsK,WAAZ,CAAZ;IACA3K,YAAY,CAACK,SAAD,EAAYyK,eAAZ,CAAZ;;IACA,IAAI5I,cAAJ,EAAoB;MAAElC,YAAY,CAACkC,cAAD,EAAiB;QAAC,SAASwT;MAAV,CAAjB,CAAZ;IAA0D;;IAChF,IAAI9T,QAAJ,EAAc;MAAEqV,aAAa,CAACxJ,aAAD,CAAb;IAA+B,CAjB7B,CAmBlB;;;IACA,IAAIpH,QAAQ,IAAIb,aAAhB,EAA+B;MAC7B,IAAI2Q,GAAG,GAAG,EAAV;MACAA,GAAG,CAAC3Q,aAAD,CAAH,GAAqB4Q,eAArB;MACApW,YAAY,CAACK,SAAD,EAAY8V,GAAZ,CAAZ;IACD;;IACD,IAAIpT,KAAJ,EAAW;MAAE/C,YAAY,CAACK,SAAD,EAAY6K,WAAZ,CAAZ;IAAuC;;IACpD,IAAIlI,SAAJ,EAAe;MAAEhD,YAAY,CAACK,SAAD,EAAYiL,UAAZ,CAAZ;IAAsC,CA1BrC,CA4BlB;;;IACA,IAAI4L,QAAQ,GAAG,CAACjQ,aAAD,EAAgBqF,qBAAhB,EAAuCC,cAAvC,EAAuDC,cAAvD,EAAuEG,gBAAvE,EAAyFY,kBAAzF,CAAf;IAEA1H,OAAO,CAAC7G,OAAR,CAAgB,UAAS8F,IAAT,EAAekE,CAAf,EAAkB;MAChC,IAAIhD,EAAE,GAAGlB,IAAI,KAAK,WAAT,GAAuB8B,YAAvB,GAAsCxG,OAAO,CAAC0E,IAAD,CAAtD;;MAEA,IAAI,OAAOkB,EAAP,KAAc,QAAd,IAA0BA,EAA9B,EAAkC;QAChC,IAAImR,MAAM,GAAGnR,EAAE,CAACoR,sBAAH,GAA4BpR,EAAE,CAACoR,sBAA/B,GAAwD,KAArE;QAAA,IACIC,QAAQ,GAAGrR,EAAE,CAACjI,UADlB;QAEAiI,EAAE,CAACkB,SAAH,GAAegQ,QAAQ,CAAClO,CAAD,CAAvB;QACA5I,OAAO,CAAC0E,IAAD,CAAP,GAAgBqS,MAAM,GAAGA,MAAM,CAACG,kBAAV,GAA+BD,QAAQ,CAACE,iBAA9D;MACD;IACF,CATD,EA/BkB,CA2ClB;;IACA1R,OAAO,GAAGxD,SAAS,GAAGC,UAAU,GAAGE,YAAY,GAAGD,aAAa,GAAGoE,UAAU,GAAGC,YAAY,GAAGE,YAAY,GAAGzG,SAAS,GAAG2G,eAAe,GAAGC,aAAa,GAAGE,UAAU,GAAGC,UAAU,GAAGC,cAAc,GAAGC,WAAW,GAAG1G,SAAS,GAAGD,UAAU,GAAGD,WAAW,GAAGD,MAAM,GAAGmH,QAAQ,GAAGpH,KAAK,GAAGM,OAAO,GAAGD,WAAW,GAAGa,SAAS,GAAGC,KAAK,GAAGe,MAAM,GAAGD,IAAI,GAAGE,UAAU,GAAGsF,KAAK,GAAGpF,QAAQ,GAAGqF,cAAc,GAAGC,aAAa,GAAGC,UAAU,GAAGE,aAAa,GAAGC,gBAAgB,GAAGC,aAAa,GAAGE,0BAA0B,GAAGC,aAAa,GAAGC,eAAe,GAAGC,gBAAgB,GAAGC,WAAW,GAAGI,KAAK,GAAGE,WAAW,GAAGG,QAAQ,GAAGC,QAAQ,GAAGC,WAAW,GAAGxG,UAAU,GAAGyG,qBAAqB,GAAGC,OAAO,GAAGrG,MAAM,GAAGsG,MAAM,GAAGC,mBAAmB,GAAGC,OAAO,GAAGE,OAAO,GAAGC,QAAQ,GAAG5G,SAAS,GAAG6G,MAAM,GAAGE,MAAM,GAAGC,cAAc,GAAGG,SAAS,GAAGG,WAAW,GAAGG,eAAe,GAAGE,mBAAmB,GAAGE,WAAW,GAAGI,UAAU,GAAGC,WAAW,GAAGE,MAAM,GAAGhK,eAAe,GAAGiK,WAAW,GAAGC,QAAQ,GAAGC,YAAY,GAAGC,gBAAgB,GAAGE,gBAAgB,GAAGC,SAAS,GAAGG,YAAY,GAAGnL,QAAQ,GAAGE,YAAY,GAAGC,iBAAiB,GAAGmL,qBAAqB,GAAGlL,UAAU,GAAGC,UAAU,GAAGoL,YAAY,GAAGC,YAAY,GAAGpL,GAAG,GAAGE,YAAY,GAAGmL,gBAAgB,GAAGC,QAAQ,GAAGC,KAAK,GAAGE,WAAW,GAAGC,UAAU,GAAGC,eAAe,GAAGE,qBAAqB,GAAGC,cAAc,GAAGC,MAAM,GAAGC,aAAa,GAAG1L,QAAQ,GAAGE,eAAe,GAAGC,iBAAiB,GAAGC,YAAY,GAAGC,kBAAkB,GAAGC,cAAc,GAAGqL,kBAAkB,GAAGnL,yBAAyB,GAAGoL,mBAAmB,GAAGC,aAAa,GAAGC,SAAS,GAAGC,mBAAmB,GAAGC,kBAAkB,GAAGC,wBAAwB,GAAGC,YAAY,GAAGC,YAAY,GAAGC,aAAa,GAAGC,IAAI,GAAGC,IAAI,GAAGC,QAAQ,GAAGC,QAAQ,GAAGC,OAAO,GAAGtL,KAAK,GAAGC,SAAS,GAAG,IAAzqD,CA5CkB,CA6ClB;IACA;;IAEA,KAAK,IAAIsL,CAAT,IAAc,IAAd,EAAoB;MAClB,IAAIA,CAAC,KAAK,SAAV,EAAqB;QAAE,KAAKA,CAAL,IAAU,IAAV;MAAiB;IACzC;;IACD9G,IAAI,GAAG,KAAP;EACD,CA9oCgC,CAgpCnC;EACE;;;EACA,SAASiP,QAAT,CAAmB5R,CAAnB,EAAsB;IACpB5G,GAAG,CAAC,YAAU;MAAEqY,WAAW,CAACkB,QAAQ,CAAC3S,CAAD,CAAT,CAAX;IAA2B,CAAxC,CAAH;EACD;;EAED,SAASyR,WAAT,CAAsBzR,CAAtB,EAAyB;IACvB,IAAI,CAAC2C,IAAL,EAAW;MAAE;IAAS;;IACtB,IAAItE,MAAM,KAAK,OAAf,EAAwB;MAAE0G,MAAM,CAAC2M,IAAP,CAAY,cAAZ,EAA4BC,IAAI,CAAC3R,CAAD,CAAhC;IAAuC;;IACjEyC,WAAW,GAAGC,cAAc,EAA5B;IACA,IAAIkQ,SAAJ;IAAA,IACIC,iBAAiB,GAAGrQ,cADxB;IAAA,IAEIsQ,sBAAsB,GAAG,KAF7B;;IAIA,IAAI/U,UAAJ,EAAgB;MACd6E,iBAAiB;MACjBgQ,SAAS,GAAGC,iBAAiB,KAAKrQ,cAAlC,CAFc,CAGd;;MACA,IAAIoQ,SAAJ,EAAe;QAAE7N,MAAM,CAAC2M,IAAP,CAAY,oBAAZ,EAAkCC,IAAI,CAAC3R,CAAD,CAAtC;MAA6C;IAC/D;;IAED,IAAI+S,UAAJ;IAAA,IACIC,YADJ;IAAA,IAEIrG,QAAQ,GAAGhR,KAFf;IAAA,IAGIsX,UAAU,GAAG9N,OAHjB;IAAA,IAII+N,SAAS,GAAG7N,MAJhB;IAAA,IAKI8N,YAAY,GAAGtW,SALnB;IAAA,IAMIuW,WAAW,GAAGjX,QANlB;IAAA,IAOIkX,MAAM,GAAG5W,GAPb;IAAA,IAQI6W,QAAQ,GAAGpV,KARf;IAAA,IASIqV,YAAY,GAAGpV,SATnB;IAAA,IAUIqV,WAAW,GAAGzW,QAVlB;IAAA,IAWI0W,qBAAqB,GAAGrW,kBAX5B;IAAA,IAYIsW,4BAA4B,GAAGnW,yBAZnC;IAAA,IAaIoW,QAAQ,GAAGtP,KAbf;;IAeA,IAAIuO,SAAJ,EAAe;MACb,IAAIzG,aAAa,GAAGrQ,UAApB;MAAA,IACI8X,aAAa,GAAG9V,UADpB;MAAA,IAEI+V,eAAe,GAAGxX,YAFtB;MAAA,IAGIyX,SAAS,GAAG5X,MAHhB;MAAA,IAII6X,eAAe,GAAG5W,YAJtB;;MAMA,IAAI,CAACiD,KAAL,EAAY;QACV,IAAI8L,SAAS,GAAGtQ,MAAhB;QAAA,IACIqQ,cAAc,GAAGpQ,WADrB;MAED;IACF,CAzCsB,CA2CvB;IACA;IACA;IACA;;;IACAgB,SAAS,GAAGiG,SAAS,CAAC,WAAD,CAArB;IACA3G,QAAQ,GAAG2G,SAAS,CAAC,UAAD,CAApB;IACArG,GAAG,GAAGqG,SAAS,CAAC,KAAD,CAAf;IACA5E,KAAK,GAAG4E,SAAS,CAAC,OAAD,CAAjB;IACA5G,MAAM,GAAG4G,SAAS,CAAC,QAAD,CAAlB;IACA3E,SAAS,GAAG2E,SAAS,CAAC,WAAD,CAArB;IACA/F,QAAQ,GAAG+F,SAAS,CAAC,UAAD,CAApB;IACA1F,kBAAkB,GAAG0F,SAAS,CAAC,oBAAD,CAA9B;IACAvF,yBAAyB,GAAGuF,SAAS,CAAC,2BAAD,CAArC;;IAEA,IAAI8P,SAAJ,EAAe;MACbzN,OAAO,GAAGrC,SAAS,CAAC,SAAD,CAAnB;MACAhH,UAAU,GAAGgH,SAAS,CAAC,YAAD,CAAtB;MACAhG,KAAK,GAAGgG,SAAS,CAAC,OAAD,CAAjB;MACAhF,UAAU,GAAGgF,SAAS,CAAC,YAAD,CAAtB;MACAzG,YAAY,GAAGyG,SAAS,CAAC,cAAD,CAAxB;MACA3F,YAAY,GAAG2F,SAAS,CAAC,cAAD,CAAxB;MACA7F,eAAe,GAAG6F,SAAS,CAAC,iBAAD,CAA3B;;MAEA,IAAI,CAAC1C,KAAL,EAAY;QACVvE,WAAW,GAAGiH,SAAS,CAAC,aAAD,CAAvB;QACAlH,MAAM,GAAGkH,SAAS,CAAC,QAAD,CAAlB;MACD;IACF,CAtEsB,CAuEvB;;;IACA+G,wBAAwB,CAAC1E,OAAD,CAAxB;IAEApC,QAAQ,GAAGC,gBAAgB,EAA3B,CA1EuB,CA0EQ;;IAC/B,IAAI,CAAC,CAAClB,UAAD,IAAe/F,SAAhB,KAA8B,CAACoJ,OAAnC,EAA4C;MAC1CgK,iBAAiB;;MACjB,IAAI,CAACrN,UAAL,EAAiB;QACfsN,0BAA0B,GADX,CACe;;QAC9B0D,sBAAsB,GAAG,IAAzB;MACD;IACF;;IACD,IAAIhX,UAAU,IAAIC,SAAlB,EAA6B;MAC3B4H,aAAa,GAAGC,gBAAgB,EAAhC,CAD2B,CACS;MACA;;MACpCe,QAAQ,GAAGV,WAAW,EAAtB,CAH2B,CAGD;MACA;IAC3B;;IAED,IAAI2O,SAAS,IAAI9W,UAAjB,EAA6B;MAC3BH,KAAK,GAAGmH,SAAS,CAAC,OAAD,CAAjB;MACA7G,OAAO,GAAG6G,SAAS,CAAC,SAAD,CAAnB;MACAkQ,YAAY,GAAGrX,KAAK,KAAKgR,QAAzB;;MAEA,IAAIqG,YAAJ,EAAkB;QAChB,IAAI,CAAClX,UAAD,IAAe,CAACC,SAApB,EAA+B;UAAE4I,QAAQ,GAAGV,WAAW,EAAtB;QAA2B,CAD5C,CAC6C;QAC7D;QACA;;;QACA+P,WAAW;MACZ;IACF;;IAED,IAAIpB,SAAJ,EAAe;MACb,IAAIzN,OAAO,KAAK8N,UAAhB,EAA4B;QAC1B,IAAI9N,OAAJ,EAAa;UACX4M,aAAa;QACd,CAFD,MAEO;UACLkC,YAAY,GADP,CACW;QACjB;MACF;IACF;;IAED,IAAIzV,SAAS,KAAKoU,SAAS,IAAI9W,UAAb,IAA2BC,SAAhC,CAAb,EAAyD;MACvDsJ,MAAM,GAAGC,SAAS,EAAlB,CADuD,CACjC;MACA;MACA;;MAEtB,IAAID,MAAM,KAAK6N,SAAf,EAA0B;QACxB,IAAI7N,MAAJ,EAAY;UACV6O,oBAAoB,CAACC,0BAA0B,CAAC7P,aAAa,CAAC,CAAD,CAAd,CAA3B,CAApB;UACA0N,YAAY;QACb,CAHD,MAGO;UACLoC,cAAc;UACdtB,sBAAsB,GAAG,IAAzB;QACD;MACF;IACF;;IAEDjJ,wBAAwB,CAAC1E,OAAO,IAAIE,MAAZ,CAAxB,CAhIuB,CAgIsB;;IAC7C,IAAI,CAACtI,QAAL,EAAe;MAAEK,kBAAkB,GAAGG,yBAAyB,GAAG,KAAjD;IAAyD;;IAE1E,IAAIV,SAAS,KAAKsW,YAAlB,EAAgC;MAC9BtW,SAAS,GACP3B,SAAS,CAAC0D,GAAD,EAAMuH,mBAAN,CADF,GAEPhL,YAAY,CAACyD,GAAD,EAAMuH,mBAAN,CAFd;IAGD;;IACD,IAAIhK,QAAQ,KAAKiX,WAAjB,EAA8B;MAC5B,IAAIjX,QAAJ,EAAc;QACZ,IAAIG,iBAAJ,EAAuB;UACrBzB,WAAW,CAACyB,iBAAD,CAAX;QACD,CAFD,MAEO;UACL,IAAIC,UAAJ,EAAgB;YAAE1B,WAAW,CAAC0B,UAAD,CAAX;UAA0B;;UAC5C,IAAIC,UAAJ,EAAgB;YAAE3B,WAAW,CAAC2B,UAAD,CAAX;UAA0B;QAC7C;MACF,CAPD,MAOO;QACL,IAAIF,iBAAJ,EAAuB;UACrB1B,WAAW,CAAC0B,iBAAD,CAAX;QACD,CAFD,MAEO;UACL,IAAIC,UAAJ,EAAgB;YAAE3B,WAAW,CAAC2B,UAAD,CAAX;UAA0B;;UAC5C,IAAIC,UAAJ,EAAgB;YAAE5B,WAAW,CAAC4B,UAAD,CAAX;UAA0B;QAC7C;MACF;IACF;;IACD,IAAIC,GAAG,KAAK4W,MAAZ,EAAoB;MAClB,IAAI5W,GAAJ,EAAS;QACP5B,WAAW,CAAC8B,YAAD,CAAX;QACAuU,mBAAmB;MACpB,CAHD,MAGO;QACLtW,WAAW,CAAC+B,YAAD,CAAX;MACD;IACF;;IACD,IAAIuB,KAAK,KAAKoV,QAAd,EAAwB;MACtBpV,KAAK,GACHhD,SAAS,CAACM,SAAD,EAAY6K,WAAZ,EAAyB9K,OAAO,CAACgD,oBAAjC,CADN,GAEHpD,YAAY,CAACK,SAAD,EAAY6K,WAAZ,CAFd;IAGD;;IACD,IAAIlI,SAAS,KAAKoV,YAAlB,EAAgC;MAC9BpV,SAAS,GACPjD,SAAS,CAACM,SAAD,EAAYiL,UAAZ,CADF,GAEPtL,YAAY,CAACK,SAAD,EAAYiL,UAAZ,CAFd;IAGD;;IACD,IAAI1J,QAAQ,KAAKyW,WAAjB,EAA8B;MAC5B,IAAIzW,QAAJ,EAAc;QACZ,IAAIM,cAAJ,EAAoB;UAAExC,WAAW,CAACwC,cAAD,CAAX;QAA8B;;QACpD,IAAI,CAACwL,SAAD,IAAc,CAACE,kBAAnB,EAAuC;UAAE+H,aAAa;QAAK;MAC5D,CAHD,MAGO;QACL,IAAIzT,cAAJ,EAAoB;UAAEzC,WAAW,CAACyC,cAAD,CAAX;QAA8B;;QACpD,IAAIwL,SAAJ,EAAe;UAAEwL,YAAY;QAAK;MACnC;IACF;;IACD,IAAIjX,kBAAkB,KAAKqW,qBAA3B,EAAkD;MAChDrW,kBAAkB,GAChBlC,SAAS,CAACM,SAAD,EAAYsK,WAAZ,CADO,GAEhB3K,YAAY,CAACK,SAAD,EAAYsK,WAAZ,CAFd;IAGD;;IACD,IAAIvI,yBAAyB,KAAKmW,4BAAlC,EAAgE;MAC9DnW,yBAAyB,GACvBrC,SAAS,CAAC0D,GAAD,EAAMqH,eAAN,CADc,GAEvB9K,YAAY,CAACyD,GAAD,EAAMqH,eAAN,CAFd;IAGD;;IAED,IAAI2M,SAAJ,EAAe;MACb,IAAI9W,UAAU,KAAKqQ,aAAf,IAAgCjQ,MAAM,KAAK4X,SAA/C,EAA0D;QAAEhB,sBAAsB,GAAG,IAAzB;MAAgC;;MAE5F,IAAIhV,UAAU,KAAK8V,aAAnB,EAAkC;QAChC,IAAI,CAAC9V,UAAL,EAAiB;UAAEmE,YAAY,CAACqN,KAAb,CAAmBgF,MAAnB,GAA4B,EAA5B;QAAiC;MACrD;;MAED,IAAInY,QAAQ,IAAIE,YAAY,KAAKwX,eAAjC,EAAkD;QAChDtX,UAAU,CAACgY,SAAX,GAAuBlY,YAAY,CAAC,CAAD,CAAnC;QACAG,UAAU,CAAC+X,SAAX,GAAuBlY,YAAY,CAAC,CAAD,CAAnC;MACD;;MAED,IAAIgB,cAAc,IAAIF,YAAY,KAAK4W,eAAvC,EAAwD;QACtD,IAAI5P,CAAC,GAAGpH,QAAQ,GAAG,CAAH,GAAO,CAAvB;QAAA,IACIyX,IAAI,GAAGnX,cAAc,CAACkX,SAD1B;QAAA,IAEIE,GAAG,GAAGD,IAAI,CAACjT,MAAL,GAAcwS,eAAe,CAAC5P,CAAD,CAAf,CAAmB5C,MAF3C;;QAGA,IAAIiT,IAAI,CAACrH,SAAL,CAAesH,GAAf,MAAwBV,eAAe,CAAC5P,CAAD,CAA3C,EAAgD;UAC9C9G,cAAc,CAACkX,SAAf,GAA2BC,IAAI,CAACrH,SAAL,CAAe,CAAf,EAAkBsH,GAAlB,IAAyBtX,YAAY,CAACgH,CAAD,CAAhE;QACD;MACF;IACF,CApBD,MAoBO;MACL,IAAIjI,MAAM,KAAKJ,UAAU,IAAIC,SAAnB,CAAV,EAAyC;QAAE+W,sBAAsB,GAAG,IAAzB;MAAgC;IAC5E;;IAED,IAAIE,YAAY,IAAIlX,UAAU,IAAI,CAACC,SAAnC,EAA8C;MAC5CiM,KAAK,GAAGC,QAAQ,EAAhB;MACAiJ,mBAAmB;IACpB;;IAED6B,UAAU,GAAG1O,KAAK,KAAKsP,QAAvB;;IACA,IAAIZ,UAAJ,EAAgB;MACdhO,MAAM,CAAC2M,IAAP,CAAY,cAAZ,EAA4BC,IAAI,EAAhC;MACAmB,sBAAsB,GAAG,IAAzB;IACD,CAHD,MAGO,IAAIE,YAAJ,EAAkB;MACvB,IAAI,CAACD,UAAL,EAAiB;QAAEd,iBAAiB;MAAK;IAC1C,CAFM,MAEA,IAAInW,UAAU,IAAIC,SAAlB,EAA6B;MAClC+V,UAAU;MACVrB,iBAAiB;MACjBiE,gBAAgB;IACjB;;IAED,IAAI1B,YAAY,IAAI,CAACxR,QAArB,EAA+B;MAAEmT,2BAA2B;IAAK;;IAEjE,IAAI,CAACxP,OAAD,IAAY,CAACE,MAAjB,EAAyB;MACvB;MACA,IAAIuN,SAAS,IAAI,CAACxS,KAAlB,EAAyB;QACvB;QAEA;QACA,IAAIvE,WAAW,KAAKoQ,cAAhB,IAAkCrQ,MAAM,KAAKsQ,SAAjD,EAA4D;UAC1DjK,YAAY,CAACqN,KAAb,CAAmBM,OAAnB,GAA6B5D,qBAAqB,CAACnQ,WAAD,EAAcD,MAAd,EAAsBE,UAAtB,EAAkCgB,KAAlC,EAAyCgB,UAAzC,CAAlD;QACD;;QAED,IAAIgE,UAAJ,EAAgB;UACd;UACA,IAAIN,QAAJ,EAAc;YACZhG,SAAS,CAAC8T,KAAV,CAAgB/D,KAAhB,GAAwBmB,iBAAiB,CAAC5Q,UAAD,EAAaF,MAAb,EAAqBD,KAArB,CAAzC;UACD,CAJa,CAMd;;;UACA,IAAIuF,GAAG,GAAG0L,kBAAkB,CAAC9Q,UAAD,EAAaF,MAAb,EAAqBD,KAArB,CAAlB,GACAmR,mBAAmB,CAAClR,MAAD,CAD7B,CAPc,CAUd;UACA;;UACA7B,aAAa,CAACqJ,KAAD,EAAQpJ,iBAAiB,CAACoJ,KAAD,CAAjB,GAA2B,CAAnC,CAAb;UACAtJ,UAAU,CAACsJ,KAAD,EAAQ,MAAM6B,OAAN,GAAgB,cAAxB,EAAwC/D,GAAxC,EAA6ClH,iBAAiB,CAACoJ,KAAD,CAA9D,CAAV;QACD;MACF,CAzBsB,CA2BvB;;;MACA,IAAItF,UAAJ,EAAgB;QAAE+T,YAAY;MAAK;;MAEnC,IAAIiB,sBAAJ,EAA4B;QAC1BlE,0BAA0B;QAC1BrK,WAAW,GAAGF,KAAd;MACD;IACF;;IAED,IAAIuO,SAAJ,EAAe;MAAE7N,MAAM,CAAC2M,IAAP,CAAY,kBAAZ,EAAgCC,IAAI,CAAC3R,CAAD,CAApC;IAA2C;EAC7D,CAr6CgC,CA26CjC;;;EACA,SAASsF,SAAT,GAAsB;IACpB,IAAI,CAACxJ,UAAD,IAAe,CAACC,SAApB,EAA+B;MAC7B,IAAI0N,CAAC,GAAGvN,MAAM,GAAGP,KAAK,GAAG,CAACA,KAAK,GAAG,CAAT,IAAc,CAAzB,GAA6BA,KAA3C;MACA,OAAQ4G,UAAU,IAAIkH,CAAtB;IACD;;IAED,IAAI8B,KAAK,GAAGzP,UAAU,GAAG,CAACA,UAAU,GAAGF,MAAd,IAAwB2G,UAA3B,GAAwCc,cAAc,CAACd,UAAD,CAA5E;IAAA,IACIqS,EAAE,GAAG/Y,WAAW,GAAGkH,QAAQ,GAAGlH,WAAW,GAAG,CAA5B,GAAgCkH,QAAQ,GAAGnH,MAD/D;;IAGA,IAAIM,MAAJ,EAAY;MACV0Y,EAAE,IAAI9Y,UAAU,GAAG,CAACiH,QAAQ,GAAGjH,UAAZ,IAA0B,CAA7B,GAAiC,CAACiH,QAAQ,IAAIM,cAAc,CAACgB,KAAK,GAAG,CAAT,CAAd,GAA4BhB,cAAc,CAACgB,KAAD,CAA1C,GAAoDzI,MAAxD,CAAT,IAA4E,CAA7H;IACD;;IAED,OAAO2P,KAAK,IAAIqJ,EAAhB;EACD;;EAED,SAAShS,iBAAT,GAA8B;IAC5BJ,cAAc,GAAG,CAAjB;;IACA,KAAK,IAAImI,EAAT,IAAe5M,UAAf,EAA2B;MACzB4M,EAAE,GAAGmB,QAAQ,CAACnB,EAAD,CAAb,CADyB,CACN;;MACnB,IAAIlI,WAAW,IAAIkI,EAAnB,EAAuB;QAAEnI,cAAc,GAAGmI,EAAjB;MAAsB;IAChD;EACF,CAl8CgC,CAo8CjC;;;EACA,IAAIqJ,WAAW,GAAI,YAAY;IAC7B,OAAOpW,IAAI,GACT4D,QAAQ,GACN;IACA,YAAY;MACV,IAAIqT,QAAQ,GAAGnQ,QAAf;MAAA,IACIoQ,SAAS,GAAGnQ,QADhB;MAGAkQ,QAAQ,IAAI5Y,OAAZ;MACA6Y,SAAS,IAAI7Y,OAAb,CALU,CAOV;MACA;;MACA,IAAIJ,WAAJ,EAAiB;QACfgZ,QAAQ,IAAI,CAAZ;QACAC,SAAS,IAAI,CAAb;MACD,CAHD,MAGO,IAAIhZ,UAAJ,EAAgB;QACrB,IAAI,CAACiH,QAAQ,GAAGnH,MAAZ,KAAqBE,UAAU,GAAGF,MAAlC,CAAJ,EAA+C;UAAEkZ,SAAS,IAAI,CAAb;QAAiB;MACnE;;MAED,IAAIvR,UAAJ,EAAgB;QACd,IAAIc,KAAK,GAAGyQ,SAAZ,EAAuB;UACrBzQ,KAAK,IAAI9B,UAAT;QACD,CAFD,MAEO,IAAI8B,KAAK,GAAGwQ,QAAZ,EAAsB;UAC3BxQ,KAAK,IAAI9B,UAAT;QACD;MACF;IACF,CAzBK,GA0BN;IACA,YAAW;MACT,IAAI8B,KAAK,GAAGM,QAAZ,EAAsB;QACpB,OAAON,KAAK,IAAIK,QAAQ,GAAGnC,UAA3B,EAAuC;UAAE8B,KAAK,IAAI9B,UAAT;QAAsB;MAChE,CAFD,MAEO,IAAI8B,KAAK,GAAGK,QAAZ,EAAsB;QAC3B,OAAOL,KAAK,IAAIM,QAAQ,GAAGpC,UAA3B,EAAuC;UAAE8B,KAAK,IAAI9B,UAAT;QAAsB;MAChE;IACF,CAlCM,GAmCT;IACA,YAAW;MACT8B,KAAK,GAAGpB,IAAI,CAACmB,GAAL,CAASM,QAAT,EAAmBzB,IAAI,CAACoH,GAAL,CAAS1F,QAAT,EAAmBN,KAAnB,CAAnB,CAAR;IACD,CAtCH;EAuCD,CAxCiB,EAAlB;;EA0CA,SAASgN,SAAT,GAAsB;IACpB,IAAI,CAACtU,QAAD,IAAaM,cAAjB,EAAiC;MAAEzC,WAAW,CAACyC,cAAD,CAAX;IAA8B;;IACjE,IAAI,CAACZ,GAAD,IAAQE,YAAZ,EAA0B;MAAE/B,WAAW,CAAC+B,YAAD,CAAX;IAA4B;;IACxD,IAAI,CAACR,QAAL,EAAe;MACb,IAAIG,iBAAJ,EAAuB;QACrB1B,WAAW,CAAC0B,iBAAD,CAAX;MACD,CAFD,MAEO;QACL,IAAIC,UAAJ,EAAgB;UAAE3B,WAAW,CAAC2B,UAAD,CAAX;QAA0B;;QAC5C,IAAIC,UAAJ,EAAgB;UAAE5B,WAAW,CAAC4B,UAAD,CAAX;QAA0B;MAC7C;IACF;EACF;;EAED,SAASuY,QAAT,GAAqB;IACnB,IAAIhY,QAAQ,IAAIM,cAAhB,EAAgC;MAAExC,WAAW,CAACwC,cAAD,CAAX;IAA8B;;IAChE,IAAIZ,GAAG,IAAIE,YAAX,EAAyB;MAAE9B,WAAW,CAAC8B,YAAD,CAAX;IAA4B;;IACvD,IAAIR,QAAJ,EAAc;MACZ,IAAIG,iBAAJ,EAAuB;QACrBzB,WAAW,CAACyB,iBAAD,CAAX;MACD,CAFD,MAEO;QACL,IAAIC,UAAJ,EAAgB;UAAE1B,WAAW,CAAC0B,UAAD,CAAX;QAA0B;;QAC5C,IAAIC,UAAJ,EAAgB;UAAE3B,WAAW,CAAC2B,UAAD,CAAX;QAA0B;MAC7C;IACF;EACF;;EAED,SAASwV,YAAT,GAAyB;IACvB,IAAIzM,MAAJ,EAAY;MAAE;IAAS,CADA,CAGvB;;;IACA,IAAI1J,WAAJ,EAAiB;MAAEoG,YAAY,CAACqN,KAAb,CAAmB0F,MAAnB,GAA4B,KAA5B;IAAoC,CAJhC,CAMvB;;;IACA,IAAIzR,UAAJ,EAAgB;MACd,IAAIrC,GAAG,GAAG,iBAAV;;MACA,KAAK,IAAIiD,CAAC,GAAGZ,UAAb,EAAyBY,CAAC,EAA1B,GAA+B;QAC7B,IAAI3C,QAAJ,EAAc;UAAEnH,QAAQ,CAACiI,UAAU,CAAC6B,CAAD,CAAX,EAAgBjD,GAAhB,CAAR;QAA+B;;QAC/C7G,QAAQ,CAACiI,UAAU,CAACmB,aAAa,GAAGU,CAAhB,GAAoB,CAArB,CAAX,EAAoCjD,GAApC,CAAR;MACD;IACF,CAbsB,CAevB;;;IACAmQ,SAAS;IAET9L,MAAM,GAAG,IAAT;EACD;;EAED,SAAS6O,cAAT,GAA2B;IACzB,IAAI,CAAC7O,MAAL,EAAa;MAAE;IAAS,CADC,CAGzB;IACA;;;IACA,IAAI1J,WAAW,IAAIuE,KAAnB,EAA0B;MAAE6B,YAAY,CAACqN,KAAb,CAAmB0F,MAAnB,GAA4B,EAA5B;IAAiC,CALpC,CAOzB;;;IACA,IAAIzR,UAAJ,EAAgB;MACd,IAAIrC,GAAG,GAAG,iBAAV;;MACA,KAAK,IAAIiD,CAAC,GAAGZ,UAAb,EAAyBY,CAAC,EAA1B,GAA+B;QAC7B,IAAI3C,QAAJ,EAAc;UAAElH,WAAW,CAACgI,UAAU,CAAC6B,CAAD,CAAX,EAAgBjD,GAAhB,CAAX;QAAkC;;QAClD5G,WAAW,CAACgI,UAAU,CAACmB,aAAa,GAAGU,CAAhB,GAAoB,CAArB,CAAX,EAAoCjD,GAApC,CAAX;MACD;IACF,CAdwB,CAgBzB;;;IACA6T,QAAQ;IAERxP,MAAM,GAAG,KAAT;EACD;;EAED,SAASwM,aAAT,GAA0B;IACxB,IAAI3M,QAAJ,EAAc;MAAE;IAAS;;IAEzBhC,KAAK,CAACgC,QAAN,GAAiB,IAAjB;IACA5J,SAAS,CAACqH,SAAV,GAAsBrH,SAAS,CAACqH,SAAV,CAAoBiH,OAApB,CAA4B9E,mBAAmB,CAACmI,SAApB,CAA8B,CAA9B,CAA5B,EAA8D,EAA9D,CAAtB;IACAzS,WAAW,CAACc,SAAD,EAAY,CAAC,OAAD,CAAZ,CAAX;;IACA,IAAIoC,IAAJ,EAAU;MACR,KAAK,IAAIkQ,CAAC,GAAGvK,UAAb,EAAyBuK,CAAC,EAA1B,GAA+B;QAC7B,IAAItM,QAAJ,EAAc;UAAE5G,WAAW,CAAC0H,UAAU,CAACwL,CAAD,CAAX,CAAX;QAA6B;;QAC7ClT,WAAW,CAAC0H,UAAU,CAACmB,aAAa,GAAGqK,CAAhB,GAAoB,CAArB,CAAX,CAAX;MACD;IACF,CAXuB,CAaxB;;;IACA,IAAI,CAAChM,UAAD,IAAe,CAACN,QAApB,EAA8B;MAAE9G,WAAW,CAACuH,YAAD,EAAe,CAAC,OAAD,CAAf,CAAX;IAAuC,CAd/C,CAgBxB;;;IACA,IAAI,CAACT,QAAL,EAAe;MACb,KAAK,IAAI2C,CAAC,GAAGE,KAAR,EAAegL,CAAC,GAAGhL,KAAK,GAAG9B,UAAhC,EAA4C4B,CAAC,GAAGkL,CAAhD,EAAmDlL,CAAC,EAApD,EAAwD;QACtD,IAAIlE,IAAI,GAAGqC,UAAU,CAAC6B,CAAD,CAArB;QACAzJ,WAAW,CAACuF,IAAD,EAAO,CAAC,OAAD,CAAP,CAAX;QACA3F,WAAW,CAAC2F,IAAD,EAAOzC,SAAP,CAAX;QACAlD,WAAW,CAAC2F,IAAD,EAAOvC,aAAP,CAAX;MACD;IACF,CAxBuB,CA0BxB;;;IACA2T,SAAS;IAETjM,QAAQ,GAAG,IAAX;EACD;;EAED,SAAS6O,YAAT,GAAyB;IACvB,IAAI,CAAC7O,QAAL,EAAe;MAAE;IAAS;;IAE1BhC,KAAK,CAACgC,QAAN,GAAiB,KAAjB;IACA5J,SAAS,CAACqH,SAAV,IAAuBmC,mBAAvB;IACA4J,0BAA0B;;IAE1B,IAAIhR,IAAJ,EAAU;MACR,KAAK,IAAIkQ,CAAC,GAAGvK,UAAb,EAAyBuK,CAAC,EAA1B,GAA+B;QAC7B,IAAItM,QAAJ,EAAc;UAAE3G,WAAW,CAACyH,UAAU,CAACwL,CAAD,CAAX,CAAX;QAA6B;;QAC7CjT,WAAW,CAACyH,UAAU,CAACmB,aAAa,GAAGqK,CAAhB,GAAoB,CAArB,CAAX,CAAX;MACD;IACF,CAZsB,CAcvB;;;IACA,IAAI,CAACtM,QAAL,EAAe;MACb,KAAK,IAAI2C,CAAC,GAAGE,KAAR,EAAegL,CAAC,GAAGhL,KAAK,GAAG9B,UAAhC,EAA4C4B,CAAC,GAAGkL,CAAhD,EAAmDlL,CAAC,EAApD,EAAwD;QACtD,IAAIlE,IAAI,GAAGqC,UAAU,CAAC6B,CAAD,CAArB;QAAA,IACI8Q,MAAM,GAAG9Q,CAAC,GAAGE,KAAK,GAAG1I,KAAZ,GAAoB6B,SAApB,GAAgCE,aAD7C;QAEAuC,IAAI,CAACqP,KAAL,CAAW3D,IAAX,GAAkB,CAACxH,CAAC,GAAGE,KAAL,IAAc,GAAd,GAAoB1I,KAApB,GAA4B,GAA9C;QACAtB,QAAQ,CAAC4F,IAAD,EAAOgV,MAAP,CAAR;MACD;IACF,CAtBsB,CAwBvB;;;IACAF,QAAQ;IAER3P,QAAQ,GAAG,KAAX;EACD;;EAED,SAASsP,gBAAT,GAA6B;IAC3B,IAAIxT,GAAG,GAAGyP,gBAAgB,EAA1B;;IACA,IAAIpJ,iBAAiB,CAACgN,SAAlB,KAAgCrT,GAApC,EAAyC;MAAEqG,iBAAiB,CAACgN,SAAlB,GAA8BrT,GAA9B;IAAoC;EAChF;;EAED,SAASyP,gBAAT,GAA6B;IAC3B,IAAIjG,GAAG,GAAGwK,oBAAoB,EAA9B;IAAA,IACIC,KAAK,GAAGzK,GAAG,CAAC,CAAD,CAAH,GAAS,CADrB;IAAA,IAEI0K,GAAG,GAAG1K,GAAG,CAAC,CAAD,CAAH,GAAS,CAFnB;IAGA,OAAOyK,KAAK,KAAKC,GAAV,GAAgBD,KAAK,GAAG,EAAxB,GAA6BA,KAAK,GAAG,MAAR,GAAiBC,GAArD;EACD;;EAED,SAASF,oBAAT,CAA+BvT,GAA/B,EAAoC;IAClC,IAAIA,GAAG,IAAI,IAAX,EAAiB;MAAEA,GAAG,GAAGwS,0BAA0B,EAAhC;IAAqC;;IACxD,IAAIgB,KAAK,GAAG9Q,KAAZ;IAAA,IAAmB+Q,GAAnB;IAAA,IAAwBC,UAAxB;IAAA,IAAoCC,QAApC,CAFkC,CAIlC;;IACA,IAAIpZ,MAAM,IAAIL,WAAd,EAA2B;MACzB,IAAIE,SAAS,IAAID,UAAjB,EAA6B;QAC3BuZ,UAAU,GAAG,EAAGE,UAAU,CAAC5T,GAAD,CAAV,GAAkB9F,WAArB,CAAb;QACAyZ,QAAQ,GAAGD,UAAU,GAAGtS,QAAb,GAAwBlH,WAAW,GAAG,CAAjD;MACD;IACF,CALD,MAKO;MACL,IAAIE,SAAJ,EAAe;QACbsZ,UAAU,GAAGhS,cAAc,CAACgB,KAAD,CAA3B;QACAiR,QAAQ,GAAGD,UAAU,GAAGtS,QAAxB;MACD;IACF,CAfiC,CAiBlC;IACA;;;IACA,IAAIhH,SAAJ,EAAe;MACbsH,cAAc,CAAClJ,OAAf,CAAuB,UAASqb,KAAT,EAAgBrR,CAAhB,EAAmB;QACxC,IAAIA,CAAC,GAAGV,aAAR,EAAuB;UACrB,IAAI,CAACvH,MAAM,IAAIL,WAAX,KAA2B2Z,KAAK,IAAIH,UAAU,GAAG,GAArD,EAA0D;YAAEF,KAAK,GAAGhR,CAAR;UAAY;;UACxE,IAAImR,QAAQ,GAAGE,KAAX,IAAoB,GAAxB,EAA6B;YAAEJ,GAAG,GAAGjR,CAAN;UAAU;QAC1C;MACF,CALD,EADa,CAQf;IACC,CATD,MASO;MAEL,IAAIrI,UAAJ,EAAgB;QACd,IAAI2Z,IAAI,GAAG3Z,UAAU,GAAGF,MAAxB;;QACA,IAAIM,MAAM,IAAIL,WAAd,EAA2B;UACzBsZ,KAAK,GAAGlS,IAAI,CAACC,KAAL,CAAWmS,UAAU,GAACI,IAAtB,CAAR;UACAL,GAAG,GAAGnS,IAAI,CAACiB,IAAL,CAAUoR,QAAQ,GAACG,IAAT,GAAgB,CAA1B,CAAN;QACD,CAHD,MAGO;UACLL,GAAG,GAAGD,KAAK,GAAGlS,IAAI,CAACiB,IAAL,CAAUnB,QAAQ,GAAC0S,IAAnB,CAAR,GAAmC,CAAzC;QACD;MAEF,CATD,MASO;QACL,IAAIvZ,MAAM,IAAIL,WAAd,EAA2B;UACzB,IAAI4N,CAAC,GAAG9N,KAAK,GAAG,CAAhB;;UACA,IAAIO,MAAJ,EAAY;YACViZ,KAAK,IAAI1L,CAAC,GAAG,CAAb;YACA2L,GAAG,GAAG/Q,KAAK,GAAGoF,CAAC,GAAG,CAAlB;UACD,CAHD,MAGO;YACL2L,GAAG,GAAG/Q,KAAK,GAAGoF,CAAd;UACD;;UAED,IAAI5N,WAAJ,EAAiB;YACf,IAAI6N,CAAC,GAAG7N,WAAW,GAAGF,KAAd,GAAsBoH,QAA9B;YACAoS,KAAK,IAAIzL,CAAT;YACA0L,GAAG,IAAI1L,CAAP;UACD;;UAEDyL,KAAK,GAAGlS,IAAI,CAACC,KAAL,CAAWiS,KAAX,CAAR;UACAC,GAAG,GAAGnS,IAAI,CAACiB,IAAL,CAAUkR,GAAV,CAAN;QACD,CAjBD,MAiBO;UACLA,GAAG,GAAGD,KAAK,GAAGxZ,KAAR,GAAgB,CAAtB;QACD;MACF;;MAEDwZ,KAAK,GAAGlS,IAAI,CAACmB,GAAL,CAAS+Q,KAAT,EAAgB,CAAhB,CAAR;MACAC,GAAG,GAAGnS,IAAI,CAACoH,GAAL,CAAS+K,GAAT,EAAc3R,aAAa,GAAG,CAA9B,CAAN;IACD;;IAED,OAAO,CAAC0R,KAAD,EAAQC,GAAR,CAAP;EACD;;EAED,SAAStD,UAAT,GAAuB;IACrB,IAAI9T,QAAQ,IAAI,CAACmH,OAAjB,EAA0B;MACxB,IAAIuQ,GAAG,GAAGR,oBAAoB,EAA9B;MACAQ,GAAG,CAAC3c,IAAJ,CAASkF,gBAAT;MAEAyQ,aAAa,CAAC9D,KAAd,CAAoB,IAApB,EAA0B8K,GAA1B,EAA+Bvb,OAA/B,CAAuC,UAAUkU,GAAV,EAAe;QACpD,IAAI,CAACjU,QAAQ,CAACiU,GAAD,EAAMnH,gBAAN,CAAb,EAAsC;UACpC;UACA,IAAIoK,GAAG,GAAG,EAAV;;UACAA,GAAG,CAAC3Q,aAAD,CAAH,GAAqB,UAAUX,CAAV,EAAa;YAAEA,CAAC,CAAC2V,eAAF;UAAsB,CAA1D;;UACAza,SAAS,CAACmT,GAAD,EAAMiD,GAAN,CAAT;UAEApW,SAAS,CAACmT,GAAD,EAAMlH,SAAN,CAAT,CANoC,CAQpC;;UACAkH,GAAG,CAACC,GAAJ,GAAU9T,OAAO,CAAC6T,GAAD,EAAM,UAAN,CAAjB,CAToC,CAWpC;;UACA,IAAIuH,MAAM,GAAGpb,OAAO,CAAC6T,GAAD,EAAM,aAAN,CAApB;;UACA,IAAIuH,MAAJ,EAAY;YAAEvH,GAAG,CAACuH,MAAJ,GAAaA,MAAb;UAAsB;;UAEpCvb,QAAQ,CAACgU,GAAD,EAAM,SAAN,CAAR;QACD;MACF,CAlBD;IAmBD;EACF;;EAED,SAASjH,WAAT,CAAsBpH,CAAtB,EAAyB;IACvBwO,SAAS,CAACqH,SAAS,CAAC7V,CAAD,CAAV,CAAT;EACD;;EAED,SAASqH,WAAT,CAAsBrH,CAAtB,EAAyB;IACvB8V,SAAS,CAACD,SAAS,CAAC7V,CAAD,CAAV,CAAT;EACD;;EAED,SAASwO,SAAT,CAAoBH,GAApB,EAAyB;IACvBhU,QAAQ,CAACgU,GAAD,EAAM,QAAN,CAAR;IACA0H,YAAY,CAAC1H,GAAD,CAAZ;EACD;;EAED,SAASyH,SAAT,CAAoBzH,GAApB,EAAyB;IACvBhU,QAAQ,CAACgU,GAAD,EAAM,QAAN,CAAR;IACA0H,YAAY,CAAC1H,GAAD,CAAZ;EACD;;EAED,SAAS0H,YAAT,CAAuB1H,GAAvB,EAA4B;IAC1BhU,QAAQ,CAACgU,GAAD,EAAMnH,gBAAN,CAAR;IACA5M,WAAW,CAAC+T,GAAD,EAAM,SAAN,CAAX;IACAlT,YAAY,CAACkT,GAAD,EAAMlH,SAAN,CAAZ;EACD;;EAED,SAASuH,aAAT,CAAwByG,KAAxB,EAA+BC,GAA/B,EAAoCY,WAApC,EAAiD;IAC/C,IAAI7H,IAAI,GAAG,EAAX;;IACA,IAAI,CAAC6H,WAAL,EAAkB;MAAEA,WAAW,GAAG,KAAd;IAAsB;;IAE1C,OAAOb,KAAK,IAAIC,GAAhB,EAAqB;MACnBjb,OAAO,CAACmI,UAAU,CAAC6S,KAAD,CAAV,CAAkB/G,gBAAlB,CAAmC4H,WAAnC,CAAD,EAAkD,UAAU3H,GAAV,EAAe;QAAEF,IAAI,CAACpV,IAAL,CAAUsV,GAAV;MAAiB,CAApF,CAAP;MACA8G,KAAK;IACN;;IAED,OAAOhH,IAAP;EACD,CAhwDgC,CAkwDjC;EACA;;;EACA,SAAS0D,YAAT,GAAyB;IACvB,IAAI1D,IAAI,GAAGO,aAAa,CAAC9D,KAAd,CAAoB,IAApB,EAA0BsK,oBAAoB,EAA9C,CAAX;IACA9b,GAAG,CAAC,YAAU;MAAEqV,eAAe,CAACN,IAAD,EAAO8H,wBAAP,CAAf;IAAkD,CAA/D,CAAH;EACD;;EAED,SAASxH,eAAT,CAA0BN,IAA1B,EAAgC+H,EAAhC,EAAoC;IAClC;IACA,IAAI5O,YAAJ,EAAkB;MAAE,OAAO4O,EAAE,EAAT;IAAc,CAFA,CAIlC;;;IACA/H,IAAI,CAAChU,OAAL,CAAa,UAAUkU,GAAV,EAAehK,KAAf,EAAsB;MACjC,IAAI,CAACrG,QAAD,IAAaqQ,GAAG,CAAC8H,QAArB,EAA+B;QAAEJ,YAAY,CAAC1H,GAAD,CAAZ;MAAoB,CADpB,CACqB;;;MACtD,IAAIjU,QAAQ,CAACiU,GAAD,EAAMnH,gBAAN,CAAZ,EAAqC;QAAEiH,IAAI,CAACiI,MAAL,CAAY/R,KAAZ,EAAmB,CAAnB;MAAwB;IAChE,CAHD,EALkC,CAUlC;;IACA,IAAI,CAAC8J,IAAI,CAAC5M,MAAV,EAAkB;MAAE,OAAO2U,EAAE,EAAT;IAAc,CAXA,CAalC;;;IACA9c,GAAG,CAAC,YAAU;MAAEqV,eAAe,CAACN,IAAD,EAAO+H,EAAP,CAAf;IAA4B,CAAzC,CAAH;EACD;;EAED,SAASjE,iBAAT,GAA8B;IAC5BH,UAAU;IACVrB,iBAAiB;IACjBiE,gBAAgB;IAChBtD,oBAAoB;IACpBiF,eAAe;EAChB;;EAGD,SAAS1G,mCAAT,GAAgD;IAC9C,IAAInO,QAAQ,IAAI1D,UAAhB,EAA4B;MAC1BoE,aAAa,CAACoN,KAAd,CAAoB/O,kBAApB,IAA0CzD,KAAK,GAAG,IAAR,GAAe,GAAzD;IACD;EACF;;EAED,SAASwZ,iBAAT,CAA4BC,UAA5B,EAAwCC,UAAxC,EAAoD;IAClD,IAAIC,OAAO,GAAG,EAAd;;IACA,KAAK,IAAItS,CAAC,GAAGoS,UAAR,EAAoBlH,CAAC,GAAGpM,IAAI,CAACoH,GAAL,CAASkM,UAAU,GAAGC,UAAtB,EAAkC/S,aAAlC,CAA7B,EAA+EU,CAAC,GAAGkL,CAAnF,EAAsFlL,CAAC,EAAvF,EAA2F;MACzFsS,OAAO,CAAC1d,IAAR,CAAauJ,UAAU,CAAC6B,CAAD,CAAV,CAAcuS,YAA3B;IACD;;IAED,OAAOzT,IAAI,CAACmB,GAAL,CAASwG,KAAT,CAAe,IAAf,EAAqB6L,OAArB,CAAP;EACD,CAhzDgC,CAkzDjC;EACA;EACA;EACA;EACA;;;EACA,SAASR,wBAAT,GAAqC;IACnC,IAAIU,SAAS,GAAG7Y,UAAU,GAAGwY,iBAAiB,CAACjS,KAAD,EAAQ1I,KAAR,CAApB,GAAqC2a,iBAAiB,CAAC/S,UAAD,EAAahB,UAAb,CAAhF;IAAA,IACIkL,EAAE,GAAGvL,aAAa,GAAGA,aAAH,GAAmBD,YADzC;;IAGA,IAAIwL,EAAE,CAAC6B,KAAH,CAASgF,MAAT,KAAoBqC,SAAxB,EAAmC;MAAElJ,EAAE,CAAC6B,KAAH,CAASgF,MAAT,GAAkBqC,SAAS,GAAG,IAA9B;IAAqC;EAC3E,CA5zDgC,CA8zDjC;EACA;;;EACA,SAASxH,iBAAT,GAA8B;IAC5B9L,cAAc,GAAG,CAAC,CAAD,CAAjB;IACA,IAAIuT,IAAI,GAAG9U,UAAU,GAAG,MAAH,GAAY,KAAjC;IAAA,IACI+U,KAAK,GAAG/U,UAAU,GAAG,OAAH,GAAa,QADnC;IAAA,IAEIgV,IAAI,GAAGxU,UAAU,CAAC,CAAD,CAAV,CAAcmJ,qBAAd,GAAsCmL,IAAtC,CAFX;IAIAzc,OAAO,CAACmI,UAAD,EAAa,UAASrC,IAAT,EAAekE,CAAf,EAAkB;MACpC;MACA,IAAIA,CAAJ,EAAO;QAAEd,cAAc,CAACtK,IAAf,CAAoBkH,IAAI,CAACwL,qBAAL,GAA6BmL,IAA7B,IAAqCE,IAAzD;MAAiE,CAFtC,CAGpC;;;MACA,IAAI3S,CAAC,KAAKV,aAAa,GAAG,CAA1B,EAA6B;QAAEJ,cAAc,CAACtK,IAAf,CAAoBkH,IAAI,CAACwL,qBAAL,GAA6BoL,KAA7B,IAAsCC,IAA1D;MAAkE;IAClG,CALM,CAAP;EAMD,CA50DgC,CA80DjC;;;EACA,SAASrG,iBAAT,GAA8B;IAC5B,IAAIsG,KAAK,GAAG7B,oBAAoB,EAAhC;IAAA,IACIC,KAAK,GAAG4B,KAAK,CAAC,CAAD,CADjB;IAAA,IAEI3B,GAAG,GAAG2B,KAAK,CAAC,CAAD,CAFf;IAIA5c,OAAO,CAACmI,UAAD,EAAa,UAASrC,IAAT,EAAekE,CAAf,EAAkB;MACpC;MACA,IAAIA,CAAC,IAAIgR,KAAL,IAAchR,CAAC,IAAIiR,GAAvB,EAA4B;QAC1B,IAAI7a,OAAO,CAAC0F,IAAD,EAAO,aAAP,CAAX,EAAkC;UAChCvF,WAAW,CAACuF,IAAD,EAAO,CAAC,aAAD,EAAgB,UAAhB,CAAP,CAAX;UACA5F,QAAQ,CAAC4F,IAAD,EAAO+G,gBAAP,CAAR;QACD,CAJyB,CAK5B;;MACC,CAND,MAMO;QACL,IAAI,CAACzM,OAAO,CAAC0F,IAAD,EAAO,aAAP,CAAZ,EAAmC;UACjCxF,QAAQ,CAACwF,IAAD,EAAO;YACb,eAAe,MADF;YAEb,YAAY;UAFC,CAAP,CAAR;UAIA3F,WAAW,CAAC2F,IAAD,EAAO+G,gBAAP,CAAX;QACD;MACF;IACF,CAjBM,CAAP;EAkBD,CAt2DgC,CAw2DjC;;;EACA,SAAS2N,2BAAT,GAAwC;IACtC,IAAItF,CAAC,GAAGhL,KAAK,GAAGpB,IAAI,CAACoH,GAAL,CAAS9H,UAAT,EAAqB5G,KAArB,CAAhB;;IACA,KAAK,IAAIwI,CAAC,GAAGV,aAAb,EAA4BU,CAAC,EAA7B,GAAkC;MAChC,IAAIlE,IAAI,GAAGqC,UAAU,CAAC6B,CAAD,CAArB;;MAEA,IAAIA,CAAC,IAAIE,KAAL,IAAcF,CAAC,GAAGkL,CAAtB,EAAyB;QACvB;QACAhV,QAAQ,CAAC4F,IAAD,EAAO,YAAP,CAAR;QAEAA,IAAI,CAACqP,KAAL,CAAW3D,IAAX,GAAkB,CAACxH,CAAC,GAAGE,KAAL,IAAc,GAAd,GAAoB1I,KAApB,GAA4B,GAA9C;QACAtB,QAAQ,CAAC4F,IAAD,EAAOzC,SAAP,CAAR;QACAlD,WAAW,CAAC2F,IAAD,EAAOvC,aAAP,CAAX;MACD,CAPD,MAOO,IAAIuC,IAAI,CAACqP,KAAL,CAAW3D,IAAf,EAAqB;QAC1B1L,IAAI,CAACqP,KAAL,CAAW3D,IAAX,GAAkB,EAAlB;QACAtR,QAAQ,CAAC4F,IAAD,EAAOvC,aAAP,CAAR;QACApD,WAAW,CAAC2F,IAAD,EAAOzC,SAAP,CAAX;MACD,CAd+B,CAgBhC;;;MACAlD,WAAW,CAAC2F,IAAD,EAAOxC,UAAP,CAAX;IACD,CApBqC,CAsBtC;;;IACAyR,UAAU,CAAC,YAAW;MACpB/U,OAAO,CAACmI,UAAD,EAAa,UAASnB,EAAT,EAAa;QAC/B7G,WAAW,CAAC6G,EAAD,EAAK,YAAL,CAAX;MACD,CAFM,CAAP;IAGD,CAJS,EAIP,GAJO,CAAV;EAKD,CAr4DgC,CAu4DjC;;;EACA,SAASkV,eAAT,GAA4B;IAC1B;IACA,IAAI5Z,GAAJ,EAAS;MACP2L,eAAe,GAAGD,UAAU,IAAI,CAAd,GAAkBA,UAAlB,GAA+BE,kBAAkB,EAAnE;MACAF,UAAU,GAAG,CAAC,CAAd;;MAEA,IAAIC,eAAe,KAAKE,qBAAxB,EAA+C;QAC7C,IAAI0O,OAAO,GAAGjP,QAAQ,CAACO,qBAAD,CAAtB;QAAA,IACI2O,UAAU,GAAGlP,QAAQ,CAACK,eAAD,CADzB;QAGA3N,QAAQ,CAACuc,OAAD,EAAU;UAChB,YAAY,IADI;UAEhB,cAAcxO,MAAM,IAAIF,qBAAqB,GAAG,CAA5B;QAFJ,CAAV,CAAR;QAIAhO,WAAW,CAAC0c,OAAD,EAAUzO,cAAV,CAAX;QAEA9N,QAAQ,CAACwc,UAAD,EAAa;UAAC,cAAczO,MAAM,IAAIJ,eAAe,GAAG,CAAtB,CAAN,GAAiCK;QAAhD,CAAb,CAAR;QACA/N,WAAW,CAACuc,UAAD,EAAa,UAAb,CAAX;QACA5c,QAAQ,CAAC4c,UAAD,EAAa1O,cAAb,CAAR;QAEAD,qBAAqB,GAAGF,eAAxB;MACD;IACF;EACF;;EAED,SAAS8O,oBAAT,CAA+B/V,EAA/B,EAAmC;IACjC,OAAOA,EAAE,CAACE,QAAH,CAAY+L,WAAZ,EAAP;EACD;;EAED,SAAS+D,QAAT,CAAmBhQ,EAAnB,EAAuB;IACrB,OAAO+V,oBAAoB,CAAC/V,EAAD,CAApB,KAA6B,QAApC;EACD;;EAED,SAASgW,cAAT,CAAyBhW,EAAzB,EAA6B;IAC3B,OAAOA,EAAE,CAACiW,YAAH,CAAgB,eAAhB,MAAqC,MAA5C;EACD;;EAED,SAASC,gBAAT,CAA2BlG,QAA3B,EAAqChQ,EAArC,EAAyCQ,GAAzC,EAA8C;IAC5C,IAAIwP,QAAJ,EAAc;MACZhQ,EAAE,CAACiE,QAAH,GAAczD,GAAd;IACD,CAFD,MAEO;MACLR,EAAE,CAACmW,YAAH,CAAgB,eAAhB,EAAiC3V,GAAG,CAAC4V,QAAJ,EAAjC;IACD;EACF,CAn7DgC,CAq7DjC;;;EACA,SAASnG,oBAAT,GAAiC;IAC/B,IAAI,CAACjV,QAAD,IAAa0B,MAAb,IAAuBD,IAA3B,EAAiC;MAAE;IAAS;;IAE5C,IAAI4Z,YAAY,GAAI5P,YAAD,GAAiBrL,UAAU,CAAC6I,QAA5B,GAAuC+R,cAAc,CAAC5a,UAAD,CAAxE;IAAA,IACIkb,YAAY,GAAI5P,YAAD,GAAiBrL,UAAU,CAAC4I,QAA5B,GAAuC+R,cAAc,CAAC3a,UAAD,CADxE;IAAA,IAEIkb,WAAW,GAAIrT,KAAK,IAAIK,QAAV,GAAsB,IAAtB,GAA6B,KAF/C;IAAA,IAGIiT,WAAW,GAAI,CAAC9Z,MAAD,IAAWwG,KAAK,IAAIM,QAArB,GAAiC,IAAjC,GAAwC,KAH1D;;IAKA,IAAI+S,WAAW,IAAI,CAACF,YAApB,EAAkC;MAChCH,gBAAgB,CAACzP,YAAD,EAAerL,UAAf,EAA2B,IAA3B,CAAhB;IACD;;IACD,IAAI,CAACmb,WAAD,IAAgBF,YAApB,EAAkC;MAChCH,gBAAgB,CAACzP,YAAD,EAAerL,UAAf,EAA2B,KAA3B,CAAhB;IACD;;IACD,IAAIob,WAAW,IAAI,CAACF,YAApB,EAAkC;MAChCJ,gBAAgB,CAACxP,YAAD,EAAerL,UAAf,EAA2B,IAA3B,CAAhB;IACD;;IACD,IAAI,CAACmb,WAAD,IAAgBF,YAApB,EAAkC;MAChCJ,gBAAgB,CAACxP,YAAD,EAAerL,UAAf,EAA2B,KAA3B,CAAhB;IACD;EACF,CA18DgC,CA48DjC;;;EACA,SAASob,aAAT,CAAwBzW,EAAxB,EAA4BD,GAA5B,EAAiC;IAC/B,IAAIX,kBAAJ,EAAwB;MAAEY,EAAE,CAACmO,KAAH,CAAS/O,kBAAT,IAA+BW,GAA/B;IAAqC;EAChE;;EAED,SAAS2W,cAAT,GAA2B;IACzB,OAAO/b,UAAU,GAAG,CAACA,UAAU,GAAGF,MAAd,IAAwB6H,aAA3B,GAA2CJ,cAAc,CAACI,aAAD,CAA1E;EACD;;EAED,SAASqU,YAAT,CAAuB7K,GAAvB,EAA4B;IAC1B,IAAIA,GAAG,IAAI,IAAX,EAAiB;MAAEA,GAAG,GAAG5I,KAAN;IAAc;;IAEjC,IAAIuH,GAAG,GAAG/P,WAAW,GAAGD,MAAH,GAAY,CAAjC;IACA,OAAOG,SAAS,GAAG,CAAEgH,QAAQ,GAAG6I,GAAZ,IAAoBvI,cAAc,CAAC4J,GAAG,GAAG,CAAP,CAAd,GAA0B5J,cAAc,CAAC4J,GAAD,CAAxC,GAAgDrR,MAApE,CAAD,IAA8E,CAAjF,GACdE,UAAU,GAAG,CAACiH,QAAQ,GAAGjH,UAAZ,IAA0B,CAA7B,GACR,CAACH,KAAK,GAAG,CAAT,IAAc,CAFlB;EAGD;;EAED,SAASiI,gBAAT,GAA6B;IAC3B,IAAIgI,GAAG,GAAG/P,WAAW,GAAGD,MAAH,GAAY,CAAjC;IAAA,IACI4O,MAAM,GAAIzH,QAAQ,GAAG6I,GAAZ,GAAmBiM,cAAc,EAD9C;;IAGA,IAAI3b,MAAM,IAAI,CAAC0B,IAAf,EAAqB;MACnB4M,MAAM,GAAG1O,UAAU,GAAG,EAAGA,UAAU,GAAGF,MAAhB,KAA2B6H,aAAa,GAAG,CAA3C,IAAgDqU,YAAY,EAA/D,GACjBA,YAAY,CAACrU,aAAa,GAAG,CAAjB,CAAZ,GAAkCJ,cAAc,CAACI,aAAa,GAAG,CAAjB,CADlD;IAED;;IACD,IAAI+G,MAAM,GAAG,CAAb,EAAgB;MAAEA,MAAM,GAAG,CAAT;IAAa;;IAE/B,OAAOA,MAAP;EACD;;EAED,SAAS2J,0BAAT,CAAqClH,GAArC,EAA0C;IACxC,IAAIA,GAAG,IAAI,IAAX,EAAiB;MAAEA,GAAG,GAAG5I,KAAN;IAAc;;IAEjC,IAAI1C,GAAJ;;IACA,IAAIG,UAAU,IAAI,CAAC/F,SAAnB,EAA8B;MAC5B,IAAID,UAAJ,EAAgB;QACd6F,GAAG,GAAG,EAAG7F,UAAU,GAAGF,MAAhB,IAA0BqR,GAAhC;;QACA,IAAI/Q,MAAJ,EAAY;UAAEyF,GAAG,IAAImW,YAAY,EAAnB;QAAwB;MACvC,CAHD,MAGO;QACL,IAAIC,WAAW,GAAG1X,SAAS,GAAGoD,aAAH,GAAmB9H,KAA9C;;QACA,IAAIO,MAAJ,EAAY;UAAE+Q,GAAG,IAAI6K,YAAY,EAAnB;QAAwB;;QACtCnW,GAAG,GAAG,CAAEsL,GAAF,GAAQ,GAAR,GAAc8K,WAApB;MACD;IACF,CATD,MASO;MACLpW,GAAG,GAAG,CAAE0B,cAAc,CAAC4J,GAAD,CAAtB;;MACA,IAAI/Q,MAAM,IAAIH,SAAd,EAAyB;QACvB4F,GAAG,IAAImW,YAAY,EAAnB;MACD;IACF;;IAED,IAAIpU,gBAAJ,EAAsB;MAAE/B,GAAG,GAAGsB,IAAI,CAACmB,GAAL,CAASzC,GAAT,EAAcgC,aAAd,CAAN;IAAqC;;IAE7DhC,GAAG,IAAKG,UAAU,IAAI,CAAC/F,SAAf,IAA4B,CAACD,UAA9B,GAA4C,GAA5C,GAAkD,IAAzD;IAEA,OAAO6F,GAAP;EACD;;EAED,SAASiN,0BAAT,CAAqCjN,GAArC,EAA0C;IACxCiW,aAAa,CAACpc,SAAD,EAAY,IAAZ,CAAb;IACA0Y,oBAAoB,CAACvS,GAAD,CAApB;EACD;;EAED,SAASuS,oBAAT,CAA+BvS,GAA/B,EAAoC;IAClC,IAAIA,GAAG,IAAI,IAAX,EAAiB;MAAEA,GAAG,GAAGwS,0BAA0B,EAAhC;IAAqC;;IACxD3Y,SAAS,CAAC8T,KAAV,CAAgBxL,aAAhB,IAAiCC,eAAe,GAAGpC,GAAlB,GAAwBqC,gBAAzD;EACD;;EAED,SAASgU,YAAT,CAAuBC,MAAvB,EAA+BC,QAA/B,EAAyCC,OAAzC,EAAkDC,KAAlD,EAAyD;IACvD,IAAI/I,CAAC,GAAG4I,MAAM,GAAGtc,KAAjB;;IACA,IAAI,CAACiC,IAAL,EAAW;MAAEyR,CAAC,GAAGpM,IAAI,CAACoH,GAAL,CAASgF,CAAT,EAAY5L,aAAZ,CAAJ;IAAiC;;IAE9C,KAAK,IAAIU,CAAC,GAAG8T,MAAb,EAAqB9T,CAAC,GAAGkL,CAAzB,EAA4BlL,CAAC,EAA7B,EAAiC;MAC7B,IAAIlE,IAAI,GAAGqC,UAAU,CAAC6B,CAAD,CAArB,CAD6B,CAG/B;;MACA,IAAI,CAACiU,KAAL,EAAY;QAAEnY,IAAI,CAACqP,KAAL,CAAW3D,IAAX,GAAkB,CAACxH,CAAC,GAAGE,KAAL,IAAc,GAAd,GAAoB1I,KAApB,GAA4B,GAA9C;MAAoD;;MAElE,IAAIgC,YAAY,IAAI6C,eAApB,EAAqC;QACnCP,IAAI,CAACqP,KAAL,CAAW9O,eAAX,IAA8BP,IAAI,CAACqP,KAAL,CAAW5O,cAAX,IAA6B/C,YAAY,IAAIwG,CAAC,GAAG8T,MAAR,CAAZ,GAA8B,IAA9B,GAAqC,GAAhG;MACD;;MACD3d,WAAW,CAAC2F,IAAD,EAAOiY,QAAP,CAAX;MACA7d,QAAQ,CAAC4F,IAAD,EAAOkY,OAAP,CAAR;;MAEA,IAAIC,KAAJ,EAAW;QAAE9U,aAAa,CAACvK,IAAd,CAAmBkH,IAAnB;MAA2B;IACzC;EACF,CAliEgC,CAoiEjC;EACA;EACA;;;EACA,IAAIoY,aAAa,GAAI,YAAY;IAC/B,OAAO7W,QAAQ,GACb,YAAY;MACVoW,aAAa,CAACpc,SAAD,EAAY,EAAZ,CAAb;;MACA,IAAI+E,kBAAkB,IAAI,CAACzD,KAA3B,EAAkC;QAChC;QACA;QACAoX,oBAAoB,GAHY,CAIhC;QACA;;QACA,IAAI,CAACpX,KAAD,IAAU,CAAChC,SAAS,CAACU,SAAD,CAAxB,EAAqC;UAAE+V,eAAe;QAAK;MAE5D,CARD,MAQO;QACL;QACAlW,WAAW,CAACG,SAAD,EAAYsI,aAAZ,EAA2BC,eAA3B,EAA4CC,gBAA5C,EAA8DmQ,0BAA0B,EAAxF,EAA4FrX,KAA5F,EAAmGyU,eAAnG,CAAX;MACD;;MAED,IAAI,CAACzP,UAAL,EAAiB;QAAEsN,0BAA0B;MAAK;IACnD,CAjBY,GAkBb,YAAY;MACV9L,aAAa,GAAG,EAAhB;MAEA,IAAIgO,GAAG,GAAG,EAAV;MACAA,GAAG,CAAC3Q,aAAD,CAAH,GAAqB2Q,GAAG,CAAC1Q,YAAD,CAAH,GAAoB2Q,eAAzC;MACApW,YAAY,CAACmH,UAAU,CAACiC,WAAD,CAAX,EAA0B+M,GAA1B,CAAZ;MACApW,SAAS,CAACoH,UAAU,CAAC+B,KAAD,CAAX,EAAoBiN,GAApB,CAAT;MAEA0G,YAAY,CAACzT,WAAD,EAAc/G,SAAd,EAAyBC,UAAzB,EAAqC,IAArC,CAAZ;MACAua,YAAY,CAAC3T,KAAD,EAAQ3G,aAAR,EAAuBF,SAAvB,CAAZ,CATU,CAWV;MACA;;MACA,IAAI,CAACmD,aAAD,IAAkB,CAACC,YAAnB,IAAmC,CAAC9D,KAApC,IAA6C,CAAChC,SAAS,CAACU,SAAD,CAA3D,EAAwE;QAAE+V,eAAe;MAAK;IAC/F,CAhCH;EAiCD,CAlCmB,EAApB;;EAoCA,SAAS+G,MAAT,CAAiBtY,CAAjB,EAAoBuY,WAApB,EAAiC;IAC/B,IAAI1U,0BAAJ,EAAgC;MAAEmQ,WAAW;IAAK,CADnB,CAG/B;;;IACA,IAAI3P,KAAK,KAAKE,WAAV,IAAyBgU,WAA7B,EAA0C;MACxC;MACAxT,MAAM,CAAC2M,IAAP,CAAY,cAAZ,EAA4BC,IAAI,EAAhC;MACA5M,MAAM,CAAC2M,IAAP,CAAY,iBAAZ,EAA+BC,IAAI,EAAnC;;MACA,IAAI7T,UAAJ,EAAgB;QAAE+T,YAAY;MAAK,CAJK,CAMxC;;;MACA,IAAIhJ,SAAS,IAAI7I,CAAb,IAAkB,CAAC,OAAD,EAAU,SAAV,EAAqBuO,OAArB,CAA6BvO,CAAC,CAACwY,IAA/B,KAAwC,CAA9D,EAAiE;QAAEnE,YAAY;MAAK;;MAEpFvP,OAAO,GAAG,IAAV;MACAuT,aAAa;IACd;EACF;EAED;AACF;AACA;AACA;AACA;AACA;AACA;;;EACE,SAASI,QAAT,CAAmBvX,GAAnB,EAAwB;IACtB,OAAOA,GAAG,CAACkM,WAAJ,GAAkBtD,OAAlB,CAA0B,IAA1B,EAAgC,EAAhC,CAAP;EACD,CAtmEgC,CAwmEjC;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;;EACA,SAASyH,eAAT,CAA0BmH,KAA1B,EAAiC;IAC/B;IACA;IACA,IAAIlX,QAAQ,IAAIsD,OAAhB,EAAyB;MACvBC,MAAM,CAAC2M,IAAP,CAAY,eAAZ,EAA6BC,IAAI,CAAC+G,KAAD,CAAjC;;MAEA,IAAI,CAAClX,QAAD,IAAa8B,aAAa,CAAC/B,MAAd,GAAuB,CAAxC,EAA2C;QACzC,KAAK,IAAI4C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGb,aAAa,CAAC/B,MAAlC,EAA0C4C,CAAC,EAA3C,EAA+C;UAC7C,IAAIlE,IAAI,GAAGqD,aAAa,CAACa,CAAD,CAAxB,CAD6C,CAE7C;;UACAlE,IAAI,CAACqP,KAAL,CAAW3D,IAAX,GAAkB,EAAlB;;UAEA,IAAIjL,cAAc,IAAIF,eAAtB,EAAuC;YACrCP,IAAI,CAACqP,KAAL,CAAW5O,cAAX,IAA6B,EAA7B;YACAT,IAAI,CAACqP,KAAL,CAAW9O,eAAX,IAA8B,EAA9B;UACD;;UACDlG,WAAW,CAAC2F,IAAD,EAAOxC,UAAP,CAAX;UACApD,QAAQ,CAAC4F,IAAD,EAAOvC,aAAP,CAAR;QACD;MACF;MAED;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;MACM,IAAI,CAACgb,KAAD,IACA,CAAClX,QAAD,IAAakX,KAAK,CAACC,MAAN,CAAazf,UAAb,KAA4BsC,SADzC,IAEAkd,KAAK,CAACC,MAAN,KAAiBnd,SAAjB,IAA8Bid,QAAQ,CAACC,KAAK,CAACE,YAAP,CAAR,KAAiCH,QAAQ,CAAC3U,aAAD,CAF3E,EAE4F;QAE1F,IAAI,CAACD,0BAAL,EAAiC;UAC/B,IAAI8P,QAAQ,GAAGtP,KAAf;UACA2P,WAAW;;UACX,IAAI3P,KAAK,KAAKsP,QAAd,EAAwB;YACtB5O,MAAM,CAAC2M,IAAP,CAAY,cAAZ,EAA4BC,IAAI,EAAhC;YAEA/C,0BAA0B;UAC3B;QACF;;QAED,IAAIvQ,MAAM,KAAK,OAAf,EAAwB;UAAE0G,MAAM,CAAC2M,IAAP,CAAY,aAAZ,EAA2BC,IAAI,EAA/B;QAAqC;;QAC/D7M,OAAO,GAAG,KAAV;QACAP,WAAW,GAAGF,KAAd;MACD;IACF;EAEF,CAlqEgC,CAoqEjC;;;EACA,SAASwU,IAAT,CAAeC,WAAf,EAA4B9Y,CAA5B,EAA+B;IAC7B,IAAIqF,MAAJ,EAAY;MAAE;IAAS,CADM,CAG7B;;;IACA,IAAIyT,WAAW,KAAK,MAApB,EAA4B;MAC1BrT,eAAe,CAACzF,CAAD,EAAI,CAAC,CAAL,CAAf,CAD0B,CAG5B;IACC,CAJD,MAIO,IAAI8Y,WAAW,KAAK,MAApB,EAA4B;MACjCrT,eAAe,CAACzF,CAAD,EAAI,CAAJ,CAAf,CADiC,CAGnC;IACC,CAJM,MAIA;MACL,IAAI8E,OAAJ,EAAa;QACX,IAAIxG,wBAAJ,EAA8B;UAAE;QAAS,CAAzC,MAA+C;UAAEiT,eAAe;QAAK;MACtE;;MAED,IAAIhH,QAAQ,GAAGD,WAAW,EAA1B;MAAA,IACIyO,QAAQ,GAAG,CADf;;MAGA,IAAID,WAAW,KAAK,OAApB,EAA6B;QAC3BC,QAAQ,GAAG,CAAExO,QAAb;MACD,CAFD,MAEO,IAAIuO,WAAW,KAAK,MAApB,EAA4B;QACjCC,QAAQ,GAAGvX,QAAQ,GAAGe,UAAU,GAAG5G,KAAb,GAAqB4O,QAAxB,GAAmChI,UAAU,GAAG,CAAb,GAAiBgI,QAAvE;MACD,CAFM,MAEA;QACL,IAAI,OAAOuO,WAAP,KAAuB,QAA3B,EAAqC;UAAEA,WAAW,GAAGhN,QAAQ,CAACgN,WAAD,CAAtB;QAAsC;;QAE7E,IAAI,CAACE,KAAK,CAACF,WAAD,CAAV,EAAyB;UACvB;UACA,IAAI,CAAC9Y,CAAL,EAAQ;YAAE8Y,WAAW,GAAG7V,IAAI,CAACmB,GAAL,CAAS,CAAT,EAAYnB,IAAI,CAACoH,GAAL,CAAS9H,UAAU,GAAG,CAAtB,EAAyBuW,WAAzB,CAAZ,CAAd;UAAmE;;UAE7EC,QAAQ,GAAGD,WAAW,GAAGvO,QAAzB;QACD;MACF,CArBI,CAuBL;;;MACA,IAAI,CAAC/I,QAAD,IAAauX,QAAb,IAAyB9V,IAAI,CAAC+L,GAAL,CAAS+J,QAAT,IAAqBpd,KAAlD,EAAyD;QACvD,IAAIsd,MAAM,GAAGF,QAAQ,GAAG,CAAX,GAAe,CAAf,GAAmB,CAAC,CAAjC;QACAA,QAAQ,IAAK1U,KAAK,GAAG0U,QAAR,GAAmBxW,UAApB,IAAmCmC,QAAnC,GAA8CnC,UAAU,GAAG0W,MAA3D,GAAoE1W,UAAU,GAAG,CAAb,GAAiB0W,MAAjB,GAA0B,CAAC,CAA3G;MACD;;MAED5U,KAAK,IAAI0U,QAAT,CA7BK,CA+BL;;MACA,IAAIvX,QAAQ,IAAI5D,IAAhB,EAAsB;QACpB,IAAIyG,KAAK,GAAGK,QAAZ,EAAsB;UAAEL,KAAK,IAAI9B,UAAT;QAAsB;;QAC9C,IAAI8B,KAAK,GAAGM,QAAZ,EAAsB;UAAEN,KAAK,IAAI9B,UAAT;QAAsB;MAC/C,CAnCI,CAqCL;;;MACA,IAAI+H,WAAW,CAACjG,KAAD,CAAX,KAAuBiG,WAAW,CAAC/F,WAAD,CAAtC,EAAqD;QACnD+T,MAAM,CAACtY,CAAD,CAAN;MACD;IAEF;EACF,CA5tEgC,CA8tEjC;;;EACA,SAASyF,eAAT,CAA0BzF,CAA1B,EAA6BwM,GAA7B,EAAkC;IAChC,IAAI1H,OAAJ,EAAa;MACX,IAAIxG,wBAAJ,EAA8B;QAAE;MAAS,CAAzC,MAA+C;QAAEiT,eAAe;MAAK;IACtE;;IACD,IAAI2H,eAAJ;;IAEA,IAAI,CAAC1M,GAAL,EAAU;MACRxM,CAAC,GAAG2S,QAAQ,CAAC3S,CAAD,CAAZ;MACA,IAAI2Y,MAAM,GAAG9C,SAAS,CAAC7V,CAAD,CAAtB;;MAEA,OAAO2Y,MAAM,KAAKrc,iBAAX,IAAgC,CAACC,UAAD,EAAaC,UAAb,EAAyB+R,OAAzB,CAAiCoK,MAAjC,IAA2C,CAAlF,EAAqF;QAAEA,MAAM,GAAGA,MAAM,CAACzf,UAAhB;MAA6B;;MAEpH,IAAIigB,QAAQ,GAAG,CAAC5c,UAAD,EAAaC,UAAb,EAAyB+R,OAAzB,CAAiCoK,MAAjC,CAAf;;MACA,IAAIQ,QAAQ,IAAI,CAAhB,EAAmB;QACjBD,eAAe,GAAG,IAAlB;QACA1M,GAAG,GAAG2M,QAAQ,KAAK,CAAb,GAAiB,CAAC,CAAlB,GAAsB,CAA5B;MACD;IACF;;IAED,IAAItb,MAAJ,EAAY;MACV,IAAIwG,KAAK,KAAKK,QAAV,IAAsB8H,GAAG,KAAK,CAAC,CAAnC,EAAsC;QACpCqM,IAAI,CAAC,MAAD,EAAS7Y,CAAT,CAAJ;QACA;MACD,CAHD,MAGO,IAAIqE,KAAK,KAAKM,QAAV,IAAsB6H,GAAG,KAAK,CAAlC,EAAqC;QAC1CqM,IAAI,CAAC,OAAD,EAAU7Y,CAAV,CAAJ;QACA;MACD;IACF;;IAED,IAAIwM,GAAJ,EAAS;MACPnI,KAAK,IAAIpI,OAAO,GAAGuQ,GAAnB;;MACA,IAAIzQ,SAAJ,EAAe;QAAEsI,KAAK,GAAGpB,IAAI,CAACC,KAAL,CAAWmB,KAAX,CAAR;MAA4B,CAFtC,CAGP;;;MACAiU,MAAM,CAAEY,eAAe,IAAKlZ,CAAC,IAAIA,CAAC,CAACwY,IAAF,KAAW,SAArC,GAAmDxY,CAAnD,GAAuD,IAAxD,CAAN;IACD;EACF,CAlwEgC,CAowEjC;;;EACA,SAAS4F,UAAT,CAAqB5F,CAArB,EAAwB;IACtB,IAAI8E,OAAJ,EAAa;MACX,IAAIxG,wBAAJ,EAA8B;QAAE;MAAS,CAAzC,MAA+C;QAAEiT,eAAe;MAAK;IACtE;;IAEDvR,CAAC,GAAG2S,QAAQ,CAAC3S,CAAD,CAAZ;IACA,IAAI2Y,MAAM,GAAG9C,SAAS,CAAC7V,CAAD,CAAtB;IAAA,IAA2BoZ,QAA3B,CANsB,CAQtB;;IACA,OAAOT,MAAM,KAAKhc,YAAX,IAA2B,CAACpC,OAAO,CAACoe,MAAD,EAAS,UAAT,CAA1C,EAAgE;MAAEA,MAAM,GAAGA,MAAM,CAACzf,UAAhB;IAA6B;;IAC/F,IAAIqB,OAAO,CAACoe,MAAD,EAAS,UAAT,CAAX,EAAiC;MAC/B,IAAIS,QAAQ,GAAGjR,UAAU,GAAGkR,MAAM,CAAC7e,OAAO,CAACme,MAAD,EAAS,UAAT,CAAR,CAAlC;MAAA,IACIW,eAAe,GAAGxd,UAAU,IAAIC,SAAd,GAA0Bqd,QAAQ,GAAG7W,UAAX,GAAwByF,KAAlD,GAA0DoR,QAAQ,GAAGzd,KAD3F;MAAA,IAEImd,WAAW,GAAGlc,eAAe,GAAGwc,QAAH,GAAcnW,IAAI,CAACoH,GAAL,CAASpH,IAAI,CAACiB,IAAL,CAAUoV,eAAV,CAAT,EAAqC/W,UAAU,GAAG,CAAlD,CAF/C;MAGAsW,IAAI,CAACC,WAAD,EAAc9Y,CAAd,CAAJ;;MAEA,IAAIoI,eAAe,KAAKgR,QAAxB,EAAkC;QAChC,IAAIvQ,SAAJ,EAAe;UAAEwL,YAAY;QAAK;;QAClClM,UAAU,GAAG,CAAC,CAAd,CAFgC,CAEf;MAClB;IACF;EACF,CA1xEgC,CA4xEjC;;;EACA,SAASoR,gBAAT,GAA6B;IAC3B3Q,aAAa,GAAG4Q,WAAW,CAAC,YAAY;MACtC/T,eAAe,CAAC,IAAD,EAAOvI,iBAAP,CAAf;IACD,CAF0B,EAExBD,eAFwB,CAA3B;IAIA4L,SAAS,GAAG,IAAZ;EACD;;EAED,SAAS4Q,iBAAT,GAA8B;IAC5BrH,aAAa,CAACxJ,aAAD,CAAb;IACAC,SAAS,GAAG,KAAZ;EACD;;EAED,SAAS6Q,oBAAT,CAA+BC,MAA/B,EAAuC/I,GAAvC,EAA4C;IAC1CnW,QAAQ,CAAC4C,cAAD,EAAiB;MAAC,eAAesc;IAAhB,CAAjB,CAAR;IACAtc,cAAc,CAACkX,SAAf,GAA2B5L,mBAAmB,CAAC,CAAD,CAAnB,GAAyBgR,MAAzB,GAAkChR,mBAAmB,CAAC,CAAD,CAArD,GAA2DiI,GAAtF;EACD;;EAED,SAASE,aAAT,GAA0B;IACxByI,gBAAgB;;IAChB,IAAIlc,cAAJ,EAAoB;MAAEqc,oBAAoB,CAAC,MAAD,EAASvc,YAAY,CAAC,CAAD,CAArB,CAApB;IAAgD;EACvE;;EAED,SAASkX,YAAT,GAAyB;IACvBoF,iBAAiB;;IACjB,IAAIpc,cAAJ,EAAoB;MAAEqc,oBAAoB,CAAC,OAAD,EAAUvc,YAAY,CAAC,CAAD,CAAtB,CAApB;IAAiD;EACxE,CAvzEgC,CAyzEjC;;;EACA,SAASyc,IAAT,GAAiB;IACf,IAAI7c,QAAQ,IAAI,CAAC8L,SAAjB,EAA4B;MAC1BiI,aAAa;MACb/H,kBAAkB,GAAG,KAArB;IACD;EACF;;EACD,SAAS8Q,KAAT,GAAkB;IAChB,IAAIhR,SAAJ,EAAe;MACbwL,YAAY;MACZtL,kBAAkB,GAAG,IAArB;IACD;EACF;;EAED,SAAS8H,cAAT,GAA2B;IACzB,IAAIhI,SAAJ,EAAe;MACbwL,YAAY;MACZtL,kBAAkB,GAAG,IAArB;IACD,CAHD,MAGO;MACL+H,aAAa;MACb/H,kBAAkB,GAAG,KAArB;IACD;EACF;;EAED,SAAS7C,kBAAT,GAA+B;IAC7B,IAAItH,GAAG,CAACkb,MAAR,EAAgB;MACd,IAAIjR,SAAJ,EAAe;QACb4Q,iBAAiB;QACjBzQ,wBAAwB,GAAG,IAA3B;MACD;IACF,CALD,MAKO,IAAIA,wBAAJ,EAA8B;MACnCuQ,gBAAgB;MAChBvQ,wBAAwB,GAAG,KAA3B;IACD;EACF;;EAED,SAASjD,cAAT,GAA2B;IACzB,IAAI8C,SAAJ,EAAe;MACb4Q,iBAAiB;MACjB3Q,mBAAmB,GAAG,IAAtB;IACD;EACF;;EAED,SAAS9C,eAAT,GAA4B;IAC1B,IAAI8C,mBAAJ,EAAyB;MACvByQ,gBAAgB;MAChBzQ,mBAAmB,GAAG,KAAtB;IACD;EACF,CAz2EgC,CA22EjC;;;EACA,SAAS1C,iBAAT,CAA4BpG,CAA5B,EAA+B;IAC7BA,CAAC,GAAG2S,QAAQ,CAAC3S,CAAD,CAAZ;IACA,IAAI+Z,QAAQ,GAAG,CAAC/a,IAAI,CAACG,IAAN,EAAYH,IAAI,CAACI,KAAjB,EAAwBmP,OAAxB,CAAgCvO,CAAC,CAACga,OAAlC,CAAf;;IAEA,IAAID,QAAQ,IAAI,CAAhB,EAAmB;MACjBtU,eAAe,CAACzF,CAAD,EAAI+Z,QAAQ,KAAK,CAAb,GAAiB,CAAC,CAAlB,GAAsB,CAA1B,CAAf;IACD;EACF,CAn3EgC,CAq3EjC;;;EACA,SAASrU,iBAAT,CAA4B1F,CAA5B,EAA+B;IAC7BA,CAAC,GAAG2S,QAAQ,CAAC3S,CAAD,CAAZ;IACA,IAAI+Z,QAAQ,GAAG,CAAC/a,IAAI,CAACG,IAAN,EAAYH,IAAI,CAACI,KAAjB,EAAwBmP,OAAxB,CAAgCvO,CAAC,CAACga,OAAlC,CAAf;;IAEA,IAAID,QAAQ,IAAI,CAAhB,EAAmB;MACjB,IAAIA,QAAQ,KAAK,CAAjB,EAAoB;QAClB,IAAI,CAACxd,UAAU,CAAC6I,QAAhB,EAA0B;UAAEK,eAAe,CAACzF,CAAD,EAAI,CAAC,CAAL,CAAf;QAAyB;MACtD,CAFD,MAEO,IAAI,CAACxD,UAAU,CAAC4I,QAAhB,EAA0B;QAC/BK,eAAe,CAACzF,CAAD,EAAI,CAAJ,CAAf;MACD;IACF;EACF,CAj4EgC,CAm4EjC;;;EACA,SAASia,QAAT,CAAmB9Y,EAAnB,EAAuB;IACrBA,EAAE,CAAC+Y,KAAH;EACD,CAt4EgC,CAw4EjC;;;EACA,SAASrU,YAAT,CAAuB7F,CAAvB,EAA0B;IACxBA,CAAC,GAAG2S,QAAQ,CAAC3S,CAAD,CAAZ;IACA,IAAIma,UAAU,GAAGvb,GAAG,CAACwb,aAArB;;IACA,IAAI,CAAC7f,OAAO,CAAC4f,UAAD,EAAa,UAAb,CAAZ,EAAsC;MAAE;IAAS,CAHzB,CAKxB;;;IACA,IAAIJ,QAAQ,GAAG,CAAC/a,IAAI,CAACG,IAAN,EAAYH,IAAI,CAACI,KAAjB,EAAwBJ,IAAI,CAACC,KAA7B,EAAoCD,IAAI,CAACE,KAAzC,EAAgDqP,OAAhD,CAAwDvO,CAAC,CAACga,OAA1D,CAAf;IAAA,IACIZ,QAAQ,GAAGC,MAAM,CAAC7e,OAAO,CAAC2f,UAAD,EAAa,UAAb,CAAR,CADrB;;IAGA,IAAIJ,QAAQ,IAAI,CAAhB,EAAmB;MACjB,IAAIA,QAAQ,KAAK,CAAjB,EAAoB;QAClB,IAAIX,QAAQ,GAAG,CAAf,EAAkB;UAAEa,QAAQ,CAAClS,QAAQ,CAACqR,QAAQ,GAAG,CAAZ,CAAT,CAAR;QAAmC;MACxD,CAFD,MAEO,IAAIW,QAAQ,KAAK,CAAjB,EAAoB;QACzB,IAAIX,QAAQ,GAAGpR,KAAK,GAAG,CAAvB,EAA0B;UAAEiS,QAAQ,CAAClS,QAAQ,CAACqR,QAAQ,GAAG,CAAZ,CAAT,CAAR;QAAmC;MAChE,CAFM,MAEA;QACLjR,UAAU,GAAGiR,QAAb;QACAP,IAAI,CAACO,QAAD,EAAWpZ,CAAX,CAAJ;MACD;IACF;EACF;;EAED,SAAS2S,QAAT,CAAmB3S,CAAnB,EAAsB;IACpBA,CAAC,GAAGA,CAAC,IAAIlB,GAAG,CAAC4Z,KAAb;IACA,OAAO2B,YAAY,CAACra,CAAD,CAAZ,GAAkBA,CAAC,CAACsa,cAAF,CAAiB,CAAjB,CAAlB,GAAwCta,CAA/C;EACD;;EACD,SAAS6V,SAAT,CAAoB7V,CAApB,EAAuB;IACrB,OAAOA,CAAC,CAAC2Y,MAAF,IAAY7Z,GAAG,CAAC4Z,KAAJ,CAAU6B,UAA7B;EACD;;EAED,SAASF,YAAT,CAAuBra,CAAvB,EAA0B;IACxB,OAAOA,CAAC,CAACwY,IAAF,CAAOjK,OAAP,CAAe,OAAf,KAA2B,CAAlC;EACD;;EAED,SAASiM,sBAAT,CAAiCxa,CAAjC,EAAoC;IAClCA,CAAC,CAACya,cAAF,GAAmBza,CAAC,CAACya,cAAF,EAAnB,GAAwCza,CAAC,CAAC0a,WAAF,GAAgB,KAAxD;EACD;;EAED,SAASC,wBAAT,GAAqC;IACnC,OAAOzgB,iBAAiB,CAACD,QAAQ,CAACiP,YAAY,CAACU,CAAb,GAAiBX,YAAY,CAACW,CAA/B,EAAkCV,YAAY,CAACS,CAAb,GAAiBV,YAAY,CAACU,CAAhE,CAAT,EAA6EvL,UAA7E,CAAjB,KAA8G7C,OAAO,CAACG,IAA7H;EACD;;EAED,SAAS4K,UAAT,CAAqBtG,CAArB,EAAwB;IACtB,IAAI8E,OAAJ,EAAa;MACX,IAAIxG,wBAAJ,EAA8B;QAAE;MAAS,CAAzC,MAA+C;QAAEiT,eAAe;MAAK;IACtE;;IAED,IAAIxU,QAAQ,IAAI8L,SAAhB,EAA2B;MAAE4Q,iBAAiB;IAAK;;IAEnDnQ,QAAQ,GAAG,IAAX;;IACA,IAAIC,QAAJ,EAAc;MACZlQ,GAAG,CAACkQ,QAAD,CAAH;MACAA,QAAQ,GAAG,IAAX;IACD;;IAED,IAAIqR,CAAC,GAAGjI,QAAQ,CAAC3S,CAAD,CAAhB;IACA+E,MAAM,CAAC2M,IAAP,CAAY2I,YAAY,CAACra,CAAD,CAAZ,GAAkB,YAAlB,GAAiC,WAA7C,EAA0D2R,IAAI,CAAC3R,CAAD,CAA9D;;IAEA,IAAI,CAACqa,YAAY,CAACra,CAAD,CAAb,IAAoB,CAAC,KAAD,EAAQ,GAAR,EAAauO,OAAb,CAAqB2I,oBAAoB,CAACrB,SAAS,CAAC7V,CAAD,CAAV,CAAzC,KAA4D,CAApF,EAAuF;MACrFwa,sBAAsB,CAACxa,CAAD,CAAtB;IACD;;IAEDkJ,YAAY,CAACS,CAAb,GAAiBV,YAAY,CAACU,CAAb,GAAiBiR,CAAC,CAACC,OAApC;IACA3R,YAAY,CAACU,CAAb,GAAiBX,YAAY,CAACW,CAAb,GAAiBgR,CAAC,CAACE,OAApC;;IACA,IAAItZ,QAAJ,EAAc;MACZ2H,aAAa,GAAGoM,UAAU,CAAC/Z,SAAS,CAAC8T,KAAV,CAAgBxL,aAAhB,EAA+BgG,OAA/B,CAAuC/F,eAAvC,EAAwD,EAAxD,CAAD,CAA1B;MACA6T,aAAa,CAACpc,SAAD,EAAY,IAAZ,CAAb;IACD;EACF;;EAED,SAAS+K,SAAT,CAAoBvG,CAApB,EAAuB;IACrB,IAAIsJ,QAAJ,EAAc;MACZ,IAAIsR,CAAC,GAAGjI,QAAQ,CAAC3S,CAAD,CAAhB;MACAkJ,YAAY,CAACS,CAAb,GAAiBiR,CAAC,CAACC,OAAnB;MACA3R,YAAY,CAACU,CAAb,GAAiBgR,CAAC,CAACE,OAAnB;;MAEA,IAAItZ,QAAJ,EAAc;QACZ,IAAI,CAAC+H,QAAL,EAAe;UAAEA,QAAQ,GAAGnQ,GAAG,CAAC,YAAU;YAAE2hB,SAAS,CAAC/a,CAAD,CAAT;UAAe,CAA5B,CAAd;QAA8C;MAChE,CAFD,MAEO;QACL,IAAI6E,qBAAqB,KAAK,GAA9B,EAAmC;UAAEA,qBAAqB,GAAG8V,wBAAwB,EAAhD;QAAqD;;QAC1F,IAAI9V,qBAAJ,EAA2B;UAAE2C,aAAa,GAAG,IAAhB;QAAuB;MACrD;;MAED,IAAI,CAAC,OAAOxH,CAAC,CAACgb,UAAT,KAAwB,SAAxB,IAAqChb,CAAC,CAACgb,UAAxC,KAAuDxT,aAA3D,EAA0E;QACxExH,CAAC,CAACya,cAAF;MACD;IACF;EACF;;EAED,SAASM,SAAT,CAAoB/a,CAApB,EAAuB;IACrB,IAAI,CAAC6E,qBAAL,EAA4B;MAC1ByE,QAAQ,GAAG,KAAX;MACA;IACD;;IACDjQ,GAAG,CAACkQ,QAAD,CAAH;;IACA,IAAID,QAAJ,EAAc;MAAEC,QAAQ,GAAGnQ,GAAG,CAAC,YAAU;QAAE2hB,SAAS,CAAC/a,CAAD,CAAT;MAAe,CAA5B,CAAd;IAA8C;;IAE9D,IAAI6E,qBAAqB,KAAK,GAA9B,EAAmC;MAAEA,qBAAqB,GAAG8V,wBAAwB,EAAhD;IAAqD;;IAC1F,IAAI9V,qBAAJ,EAA2B;MACzB,IAAI,CAAC2C,aAAD,IAAkB6S,YAAY,CAACra,CAAD,CAAlC,EAAuC;QAAEwH,aAAa,GAAG,IAAhB;MAAuB;;MAEhE,IAAI;QACF,IAAIxH,CAAC,CAACwY,IAAN,EAAY;UAAEzT,MAAM,CAAC2M,IAAP,CAAY2I,YAAY,CAACra,CAAD,CAAZ,GAAkB,WAAlB,GAAgC,UAA5C,EAAwD2R,IAAI,CAAC3R,CAAD,CAA5D;QAAmE;MAClF,CAFD,CAEE,OAAMib,GAAN,EAAW,CAAE;;MAEf,IAAItR,CAAC,GAAGR,aAAR;MAAA,IACI+R,IAAI,GAAG1R,OAAO,CAACN,YAAD,EAAeD,YAAf,CADlB;;MAEA,IAAI,CAACnH,UAAD,IAAehG,UAAf,IAA6BC,SAAjC,EAA4C;QAC1C4N,CAAC,IAAIuR,IAAL;QACAvR,CAAC,IAAI,IAAL;MACD,CAHD,MAGO;QACL,IAAIwR,WAAW,GAAG9a,SAAS,GAAG6a,IAAI,GAAGvf,KAAP,GAAe,GAAf,IAAsB,CAACoH,QAAQ,GAAGnH,MAAZ,IAAsB6H,aAA5C,CAAH,GAA+DyX,IAAI,GAAG,GAAP,IAAcnY,QAAQ,GAAGnH,MAAzB,CAA1F;QACA+N,CAAC,IAAIwR,WAAL;QACAxR,CAAC,IAAI,GAAL;MACD;;MAEDnO,SAAS,CAAC8T,KAAV,CAAgBxL,aAAhB,IAAiCC,eAAe,GAAG4F,CAAlB,GAAsB3F,gBAAvD;IACD;EACF;;EAED,SAASwC,QAAT,CAAmBxG,CAAnB,EAAsB;IACpB,IAAIsJ,QAAJ,EAAc;MACZ,IAAIC,QAAJ,EAAc;QACZlQ,GAAG,CAACkQ,QAAD,CAAH;QACAA,QAAQ,GAAG,IAAX;MACD;;MACD,IAAI/H,QAAJ,EAAc;QAAEoW,aAAa,CAACpc,SAAD,EAAY,EAAZ,CAAb;MAA+B;;MAC/C8N,QAAQ,GAAG,KAAX;MAEA,IAAIsR,CAAC,GAAGjI,QAAQ,CAAC3S,CAAD,CAAhB;MACAkJ,YAAY,CAACS,CAAb,GAAiBiR,CAAC,CAACC,OAAnB;MACA3R,YAAY,CAACU,CAAb,GAAiBgR,CAAC,CAACE,OAAnB;MACA,IAAII,IAAI,GAAG1R,OAAO,CAACN,YAAD,EAAeD,YAAf,CAAlB;;MAEA,IAAIhG,IAAI,CAAC+L,GAAL,CAASkM,IAAT,CAAJ,EAAoB;QAClB;QACA,IAAI,CAACb,YAAY,CAACra,CAAD,CAAjB,EAAsB;UACpB;UACA,IAAI2Y,MAAM,GAAG9C,SAAS,CAAC7V,CAAD,CAAtB;UACA9E,SAAS,CAACyd,MAAD,EAAS;YAAC,SAAS,SAASyC,YAAT,CAAuBpb,CAAvB,EAA0B;cACpDwa,sBAAsB,CAACxa,CAAD,CAAtB;cACA7E,YAAY,CAACwd,MAAD,EAAS;gBAAC,SAASyC;cAAV,CAAT,CAAZ;YACD;UAHiB,CAAT,CAAT;QAID;;QAED,IAAI5Z,QAAJ,EAAc;UACZ+H,QAAQ,GAAGnQ,GAAG,CAAC,YAAW;YACxB,IAAI0I,UAAU,IAAI,CAAC/F,SAAnB,EAA8B;cAC5B,IAAIsf,UAAU,GAAG,CAAEH,IAAF,GAASvf,KAAT,IAAkBoH,QAAQ,GAAGnH,MAA7B,CAAjB;cACAyf,UAAU,GAAGH,IAAI,GAAG,CAAP,GAAWjY,IAAI,CAACC,KAAL,CAAWmY,UAAX,CAAX,GAAoCpY,IAAI,CAACiB,IAAL,CAAUmX,UAAV,CAAjD;cACAhX,KAAK,IAAIgX,UAAT;YACD,CAJD,MAIO;cACL,IAAIC,KAAK,GAAG,EAAGnS,aAAa,GAAG+R,IAAnB,CAAZ;;cACA,IAAII,KAAK,IAAI,CAAb,EAAgB;gBACdjX,KAAK,GAAGK,QAAR;cACD,CAFD,MAEO,IAAI4W,KAAK,IAAIjY,cAAc,CAACI,aAAa,GAAG,CAAjB,CAA3B,EAAgD;gBACrDY,KAAK,GAAGM,QAAR;cACD,CAFM,MAEA;gBACL,IAAIR,CAAC,GAAG,CAAR;;gBACA,OAAOA,CAAC,GAAGV,aAAJ,IAAqB6X,KAAK,IAAIjY,cAAc,CAACc,CAAD,CAAnD,EAAwD;kBACtDE,KAAK,GAAGF,CAAR;;kBACA,IAAImX,KAAK,GAAGjY,cAAc,CAACc,CAAD,CAAtB,IAA6B+W,IAAI,GAAG,CAAxC,EAA2C;oBAAE7W,KAAK,IAAI,CAAT;kBAAa;;kBAC1DF,CAAC;gBACF;cACF;YACF;;YAEDmU,MAAM,CAACtY,CAAD,EAAIkb,IAAJ,CAAN;YACAnW,MAAM,CAAC2M,IAAP,CAAY2I,YAAY,CAACra,CAAD,CAAZ,GAAkB,UAAlB,GAA+B,SAA3C,EAAsD2R,IAAI,CAAC3R,CAAD,CAA1D;UACD,CAvBa,CAAd;QAwBD,CAzBD,MAyBO;UACL,IAAI6E,qBAAJ,EAA2B;YACzBY,eAAe,CAACzF,CAAD,EAAIkb,IAAI,GAAG,CAAP,GAAW,CAAC,CAAZ,GAAgB,CAApB,CAAf;UACD;QACF;MACF;IACF,CAxDmB,CA0DpB;;;IACA,IAAI3f,OAAO,CAACgD,oBAAR,KAAiC,MAArC,EAA6C;MAAEiJ,aAAa,GAAG,KAAhB;IAAwB;;IACvE,IAAIpJ,UAAJ,EAAgB;MAAEyG,qBAAqB,GAAG,GAAxB;IAA8B;;IAChD,IAAI9H,QAAQ,IAAI,CAAC8L,SAAjB,EAA4B;MAAE0Q,gBAAgB;IAAK;EACpD,CA9jFgC,CAgkFjC;EACA;;;EACA,SAASnK,0BAAT,GAAuC;IACrC,IAAI3B,EAAE,GAAGvL,aAAa,GAAGA,aAAH,GAAmBD,YAAzC;IACAwL,EAAE,CAAC6B,KAAH,CAASgF,MAAT,GAAkBjR,cAAc,CAACgB,KAAK,GAAG1I,KAAT,CAAd,GAAgC0H,cAAc,CAACgB,KAAD,CAA9C,GAAwD,IAA1E;EACD;;EAED,SAAS4D,QAAT,GAAqB;IACnB,IAAIsT,KAAK,GAAGzf,UAAU,GAAG,CAACA,UAAU,GAAGF,MAAd,IAAwB2G,UAAxB,GAAqCQ,QAAxC,GAAmDR,UAAU,GAAG5G,KAAtF;IACA,OAAOsH,IAAI,CAACoH,GAAL,CAASpH,IAAI,CAACiB,IAAL,CAAUqX,KAAV,CAAT,EAA2BhZ,UAA3B,CAAP;EACD;EAED;AACF;AACA;AACA;AACA;;;EACE,SAAS2O,mBAAT,GAAgC;IAC9B,IAAI,CAACzU,GAAD,IAAQG,eAAZ,EAA6B;MAAE;IAAS;;IAExC,IAAIoL,KAAK,KAAKE,WAAd,EAA2B;MACzB,IAAImC,GAAG,GAAGnC,WAAV;MAAA,IACI9D,GAAG,GAAG4D,KADV;MAAA,IAEIwT,EAAE,GAAG3gB,WAFT;;MAIA,IAAIqN,WAAW,GAAGF,KAAlB,EAAyB;QACvBqC,GAAG,GAAGrC,KAAN;QACA5D,GAAG,GAAG8D,WAAN;QACAsT,EAAE,GAAG5gB,WAAL;MACD;;MAED,OAAOyP,GAAG,GAAGjG,GAAb,EAAkB;QAChBoX,EAAE,CAACzT,QAAQ,CAACsC,GAAD,CAAT,CAAF;QACAA,GAAG;MACJ,CAdwB,CAgBzB;;;MACAnC,WAAW,GAAGF,KAAd;IACD;EACF;;EAED,SAAS2J,IAAT,CAAe3R,CAAf,EAAkB;IAChB,OAAO;MACLxE,SAAS,EAAEA,SADN;MAEL8G,UAAU,EAAEA,UAFP;MAGL3F,YAAY,EAAEA,YAHT;MAILoL,QAAQ,EAAEA,QAJL;MAKLzL,iBAAiB,EAAEA,iBALd;MAMLoK,WAAW,EAAEA,WANR;MAOLnK,UAAU,EAAEA,UAPP;MAQLC,UAAU,EAAEA,UARP;MASLb,KAAK,EAAEA,KATF;MAULM,OAAO,EAAEA,OAVJ;MAWLsH,UAAU,EAAEA,UAXP;MAYLhB,UAAU,EAAEA,UAZP;MAaLkB,aAAa,EAAEA,aAbV;MAcLY,KAAK,EAAEA,KAdF;MAeLE,WAAW,EAAEA,WAfR;MAgBLC,YAAY,EAAEC,eAAe,EAhBxB;MAiBL2D,eAAe,EAAEA,eAjBZ;MAkBLE,qBAAqB,EAAEA,qBAlBlB;MAmBLN,KAAK,EAAEA,KAnBF;MAoBLE,WAAW,EAAEA,WApBR;MAqBL9E,KAAK,EAAEA,KArBF;MAsBLT,IAAI,EAAEA,IAtBD;MAuBL+V,KAAK,EAAE1Y,CAAC,IAAI;IAvBP,CAAP;EAyBD;;EAED,OAAO;IACLyb,OAAO,EAAE,OADJ;IAELC,OAAO,EAAE/J,IAFJ;IAGL5M,MAAM,EAAEA,MAHH;IAIL8T,IAAI,EAAEA,IAJD;IAKLe,IAAI,EAAEA,IALD;IAMLC,KAAK,EAAEA,KANF;IAOLlX,IAAI,EAAEA,IAPD;IAQLgZ,kBAAkB,EAAE1F,wBARf;IASL2F,OAAO,EAAE3R,mBATJ;IAULiI,OAAO,EAAEA,OAVJ;IAWL2J,OAAO,EAAE,YAAW;MAClB,OAAOvgB,GAAG,CAAChC,MAAM,CAACiC,OAAD,EAAU0F,eAAV,CAAP,CAAV;IACD;EAbI,CAAP;AAeD,CAppFM"},"metadata":{},"sourceType":"module"}